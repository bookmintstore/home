<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>In Search of My Kanha Ji</title>

  <link rel="icon" type="image/png" href="https://bookmintor.shop/images/logo.png">
  
  <link rel="preload" as="image" href="https://bookmintor.shop/images/Full%20Package%20Ebook,%20Audio,%20Video%20&%20Mind%20Map%20(5).png">

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    document.onkeydown = function(e) {
      if (e.keyCode == 123) return false;
      if (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0) || e.keyCode == 'C'.charCodeAt(0))) return false;
      if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
      if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) return false;
    };
  </script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { 
            brandGreen: '#10b981', 
            brandDark: '#0b0e13',
            brandIndigo: '#6366f1',
            brandFuchsia: '#a855f7'
          },
          boxShadow: {
            glow: '0 12px 36px -12px rgba(99,102,241,0.7)',
            ctaglow: '0 12px 40px -12px rgba(168,85,247,.7)',
            book: '0 28px 60px -18px rgba(0, 0, 0, 0.65)',
            saleGlow: '0 0 15px rgba(34, 197, 94, 0.4)',
            profileGlow: '0 0 30px rgba(168, 85, 247, 0.3)',
            notification: '0 8px 25px rgba(0,0,0,0.4)',
            premiumGlow: '0 0 25px rgba(251, 191, 36, 0.4)'
          },
          animation: {
            shine: 'shine 1.6s ease-in-out infinite',
            btnshine: 'btnshine 3.0s ease-in-out infinite',
            slideUp: 'slideUp .45s ease-out forwards',
            glowspin: 'glowspin 1.2s linear infinite',
            modalFadeIn: 'modalFadeIn 0.35s ease-out forwards',
            tagShine: 'tagShine 1.0s ease-in-out infinite',
            shakeInput: 'shakeInput 0.4s ease-in-out 1', 
            redGlow: 'redGlow 2.5s infinite ease-in-out',
            popFloat: 'popFloat 3s ease-in-out infinite',
            pulseArrow: 'pulseArrow 1.2s ease-in-out infinite 0.5s',
            'gradient-shift': 'gradient-shift 8s ease infinite',
            snakeRotate: 'snakeRotate 3s linear infinite',
            priceSlash: 'priceSlash 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards',
            coverFast: 'coverFast 0.45s linear infinite', 
            softPulse: 'softPulse 2s infinite ease-in-out', 
            subtleZoomIn: 'subtleZoomIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
            blackShine: 'blackShine 4s ease-in-out infinite',
            tapRipple: 'tapRipple 1.6s cubic-bezier(0, 0, 0.2, 1) infinite',
            blinkSupport: 'blinkSupport 2s ease-in-out infinite',
            slideUpFade: 'slideUpFade 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
            profileShine: 'profileShine 1.2s ease-out forwards',
            fadeInOut: 'fadeInOut 0.3s ease forwards',
            textSlideUp: 'textSlideUp 0.5s ease-out forwards',
            textGlow: 'textGlow 2s ease-in-out infinite',
            bounceIn: 'bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards',
            pulseGlow: 'pulseGlow 2s ease-in-out infinite',
            menuSlideIn: 'menuSlideIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards',
            menuSlideOut: 'menuSlideOut 0.25s cubic-bezier(0.34, 1.56, 0.64, 1) forwards',
            cuteItemIn: 'cuteItemIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards',
            cuteItemOut: 'cuteItemOut 0.3s ease-in-out forwards',
            iconTap: 'iconTap 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
            popupSlideIn: 'popupSlideIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
            popupFadeIn: 'popupFadeIn 0.4s ease-out forwards',
            labelSlideIn: 'labelSlideIn 0.4s ease-out forwards 0.2s',
            shimmer: 'shimmer 2.5s infinite',
            cuteBounce: 'cuteBounce 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
            progressPulse: 'progressPulse 2.5s infinite',
            notificationSlideIn: 'notificationSlideIn 0.5s ease-out forwards',
            notificationSlideOut: 'notificationSlideOut 0.5s ease-in forwards',
            stickyBarSlideUp: 'stickyBarSlideUp 0.4s ease-out forwards',
            stickyBarSlideDown: 'stickyBarSlideDown 0.4s ease-in forwards'
          },
          keyframes: {
            shine: { '0%': { transform: 'translateX(-140%)' }, '100%': { transform: 'translateX(140%)' } },
            btnshine: { '0%': { transform: 'translateX(-140%) skewX(-30deg)' }, '100%': { transform: 'translateX(220%) skewX(-30deg)' } },
            blackShine: { '0%': { transform: 'translateX(-140%) skewX(-30deg)' }, '100%': { transform: 'translateX(220%) skewX(-30deg)' } },
            slideUp: { '0%': {opacity:'0', transform:'translateY(20px)'}, '100%':{opacity:'1', transform:'translateY(0)'} },
            glowspin: { '0%': { transform: 'rotate(0deg)' }, '100%': { transform: 'rotate(360deg)' } },
            modalFadeIn: { '0%': { opacity: 0, transform: 'translateY(20px) scale(0.95)' }, '100%': { opacity: 1, transform: 'translateY(0) scale(1)' } },
            tagShine: { '0%': { transform: 'translateX(-140%) skewX(-30deg)' }, '100%': { transform: 'translateX(220%) skewX(-30deg)' } },
            shakeInput: { '0%, 100%': { transform: 'translateX(0)' }, '20%, 60%': { transform: 'translateX(-5px)' }, '40%, 80%': { transform: 'translateX(5px)' } },
            redGlow: { '0%, 100%': { boxShadow: '0 0 8px rgba(239, 68, 68, 0.6)' }, '50%': { boxShadow: '0 0 16px rgba(239, 68, 68, 1)' } },
            popFloat: { '0%, 100%': { transform: 'scale(1) translateY(0px)', opacity: 0.9 }, '50%': { transform: 'scale(1.05) translateY(-2px)', opacity: 1 } },
            pulseArrow: { '0%': { transform: 'translateX(0px)', opacity: 0.5 }, '50%': { transform: 'translateX(6px)', opacity: 1 }, '100%': { transform: 'translateX(0px)', opacity: 0.5 } },
            'gradient-shift': { '0%': { 'background-position': '0% 50%' }, '50%': { 'background-position': '100% 50%' }, '100%': { 'background-position': '0% 50%' } },
            snakeRotate: { '0%': { transform: 'translate(-50%, -50%) rotate(0deg)' }, '100%': { transform: 'translate(-50%, -50%) rotate(360deg)' } },
            priceSlash: { '0%': { transform: 'scale(1)', opacity: 1 }, '50%': { transform: 'scale(1.2) rotate(-10deg)', opacity: 0.8 }, '100%': { transform: 'scale(0) rotate(20deg)', opacity: 0 } },
            coverFast: { '0%': { transform: 'translateX(-160%) skewX(-10deg)' }, '100%': { transform: 'translateX(160%) skewX(-10deg)' } },
            softPulse: { '0%, 100%': { opacity: 1 }, '50%': { opacity: 0.8 } },
            subtleZoomIn: { '0%': { opacity: 0, transform: 'scale(0.96) translateY(5px)' }, '100%': { opacity: 1, transform: 'scale(1) translateY(0)' } },
            tapRipple: { '0%': { transform: 'scale(0.8)', opacity: '0.6' }, '100%': { transform: 'scale(2.2)', opacity: '0' } },
            blinkSupport: { '0%, 100%': { opacity: '1', transform: 'scale(1)' }, '50%': { opacity: '0.7', transform: 'scale(0.95)' } },
            slideUpFade: { '0%': { opacity: 0, transform: 'translateY(50px) scale(0.95)' }, '100%': { opacity: 1, transform: 'translateY(0) scale(1)' } },
            profileShine: { 
              '0%': { 
                transform: 'translateX(-150%) translateY(-150%) rotate(45deg)',
                opacity: '0' 
              }, 
              '15%': { 
                opacity: '0.8' 
              },
              '50%': { 
                opacity: '0.9' 
              },
              '85%': { 
                opacity: '0.8' 
              },
              '100%': { 
                transform: 'translateX(150%) translateY(150%) rotate(45deg)',
                opacity: '0' 
              } 
            },
            fadeInOut: {
              '0%': { opacity: 0 },
              '100%': { opacity: 1 }
            },
            textSlideUp: {
              '0%': { opacity: 0, transform: 'translateY(20px)' },
              '100%': { opacity: 1, transform: 'translateY(0)' }
            },
            textGlow: {
              '0%, 100%': { textShadow: '0 0 8px rgba(168, 85, 247, 0.5)' },
              '50%': { textShadow: '0 0 15px rgba(168, 85, 247, 0.8), 0 0 20px rgba(168, 85, 247, 0.4)' }
            },
            bounceIn: {
              '0%': { opacity: 0, transform: 'scale(0.3)' },
              '50%': { opacity: 1, transform: 'scale(1.05)' },
              '70%': { transform: 'scale(0.9)' },
              '100%': { opacity: 1, transform: 'scale(1)' }
            },
            pulseGlow: {
              '0%, 100%': { boxShadow: '0 0 5px rgba(168, 85, 247, 0.3)' },
              '50%': { boxShadow: '0 0 15px rgba(168, 85, 247, 0.6)' }
            },
            menuSlideIn: {
              '0%': { opacity: 0, transform: 'translateY(10px) scale(0.95)' },
              '100%': { opacity: 1, transform: 'translateY(0) scale(1)' }
            },
            menuSlideOut: {
              '0%': { opacity: 1, transform: 'translateY(0) scale(1)' },
              '100%': { opacity: 0, transform: 'translateY(10px) scale(0.95)' }
            },
            cuteItemIn: {
              '0%': { opacity: 0, transform: 'translateY(15px) scale(0.8) rotate(-5deg)' },
              '60%': { opacity: 1, transform: 'translateY(-5px) scale(1.05) rotate(2deg)' },
              '80%': { transform: 'translateY(2px) scale(0.98) rotate(-1deg)' },
              '100%': { opacity: 1, transform: 'translateY(0) scale(1) rotate(0deg)' }
            },
            cuteItemOut: {
              '0%': { opacity: 1, transform: 'translateY(0) scale(1)' },
              '100%': { opacity: 0, transform: 'translateY(15px) scale(0.8)' }
            },
            iconTap: {
              '0%, 100%': { transform: 'scale(1)' },
              '50%': { transform: 'scale(0.85)' }
            },
            popupSlideIn: {
              '0%': { opacity: 0, transform: 'translateY(40px) scale(0.9)' },
              '70%': { opacity: 1, transform: 'translateY(-10px) scale(1.02)' },
              '100%': { opacity: 1, transform: 'translateY(0) scale(1)' }
            },
            popupFadeIn: {
              '0%': { opacity: 0 },
              '100%': { opacity: 1 }
            },
            labelSlideIn: {
              '0%': { opacity: 0, transform: 'translateX(15px)' },
              '100%': { opacity: 1, transform: 'translateX(0)' }
            },
            shimmer: {
              '0%': { transform: 'translateX(-100%)' },
              '100%': { transform: 'translateX(100%)' }
            },
            cuteBounce: {
              '0%': { opacity: 0, transform: 'scale(0.5) translateY(20px)' },
              '60%': { opacity: 1, transform: 'scale(1.1) translateY(-8px)' },
              '80%': { transform: 'scale(0.95) translateY(2px)' },
              '100%': { opacity: 1, transform: 'scale(1) translateY(0)' }
            },
            progressPulse: {
              '0%, 100%': { 'border-color': 'rgba(34, 197, 94, 0.4)' },
              '50%': { 'border-color': 'rgba(34, 197, 94, 0.8)' }
            },
            notificationSlideIn: {
              '0%': { opacity: 0, transform: 'translateX(-20px)' },
              '100%': { opacity: 1, transform: 'translateX(0)' }
            },
            notificationSlideOut: {
              '0%': { opacity: 1, transform: 'translateX(0)' },
              '100%': { opacity: 0, transform: 'translateX(-20px)' }
            },
            stickyBarSlideUp: {
              '0%': { transform: 'translateY(100%)' },
              '100%': { transform: 'translateY(0)' }
            },
            stickyBarSlideDown: {
              '0%': { transform: 'translateY(0)' },
              '100%': { transform: 'translateY(100%)' }
            }
          }
        }
      }
    }
  </script>

  <style>
    /* BASIC SETUP */
    @keyframes waveJump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    @keyframes gradient-shift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    @keyframes snakeRotate { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }

    body { 
      font-family:'Poppins',sans-serif; 
      overflow-x: hidden; 
      scroll-behavior: smooth; 
      background-color: #0b0e13;
      padding-bottom: 0;
    }
    
    /* ROLLING TEXT */
    .rolling-text-list { padding: 0; margin: 0; list-style: none; animation: scrollText 16s infinite cubic-bezier(0.25, 1, 0.5, 1); }
    .rolling-text-list li { height: 26px; line-height: 26px; display: flex; align-items: center; white-space: nowrap; }
    @keyframes scrollText { 0%, 9% { transform: translateY(0px); } 12.5%, 21.5% { transform: translateY(-26px); } 25%, 34% { transform: translateY(-52px); } 37.5%, 46.5% { transform: translateY(-78px); } 50%, 59% { transform: translateY(-104px); } 62.5%, 71.5% { transform: translateY(-130px); } 75%, 84% { transform: translateY(-156px); } 87.5%, 96.5% { transform: translateY(-182px); } 100% { transform: translateY(-208px); } }

    .brand-col { display: flex; flex-direction: column; line-height: 1; justify-content: center; }
    .creator-text { font-size: 0.55rem; font-weight: 800; letter-spacing: 2px; color: rgba(255,255,255,0.7); text-transform: uppercase; margin-top: 3px; margin-left: 1px; }
    
    .aarohi-profile-trigger {
        display: flex; 
        align-items: center; 
        gap: 10px;
        cursor: pointer;
        padding: 12px 16px; 
        border-radius: 16px;
        background: rgba(255,255,255,0.03); 
        border: 1px solid rgba(255,255,255,0.08);
        transition: all 0.3s ease;
        width: fit-content;
        position: relative;
        overflow: hidden;
        margin-bottom: 20px;
    }
    .aarohi-profile-trigger:hover {
        background: rgba(255,255,255,0.08); 
        transform: translateY(-2px); 
        border-color: rgba(168, 85, 247, 0.4);
    }
    
    .profile-shine-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
        opacity: 0;
    }
    
    .profile-shine {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 300%;
        background: linear-gradient(
            45deg,
            transparent 0%,
            rgba(255, 255, 255, 0) 25%,
            rgba(255, 255, 255, 0.8) 50%,
            rgba(255, 255, 255, 0) 75%,
            transparent 100%
        );
        transform: translateX(-150%) translateY(-150%) rotate(45deg);
        filter: blur(15px);
    }
    
    .profile-shine-overlay.active .profile-shine {
        animation: profileShine 1.2s ease-out forwards;
    }
    
    .dp-container { position: relative; width: 100px; height: 100px; margin: -50px auto 10px; }
    .dp-img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 4px solid #0f172a; z-index: 2; position: relative; }
    .dp-blur-bg { position: absolute; inset: 0; background-size: cover; filter: blur(12px); border-radius: 50%; z-index: 1; opacity: 0.6; }

    .social-btn {
        background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
        padding: 10px; border-radius: 10px; display: flex; align-items: center; gap: 8px;
        font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: 0.3s;
    }
    .social-btn:hover { background: rgba(255,255,255,0.1); transform: scale(1.02); }

    .reaction-trigger-btn {
        background: rgba(255,255,255,0.03);
        border: 1px solid rgba(255,255,255,0.1);
        backdrop-filter: blur(4px);
        transition: all 0.3s ease;
    }
    .reaction-trigger-btn:hover {
        background: rgba(255,255,255,0.1);
        border-color: rgba(239, 68, 68, 0.4);
    }

    /* BUTTON STACKING LOGIC */
    .action-container { display: flex; flex-wrap: wrap; gap: 16px; margin-top: 16px; align-items: center; }
    .action-container.stacked { flex-direction: column; align-items: flex-start; }
    .action-container.stacked .cta-btn { width: 100%; max-width: 320px; justify-content: center; }
    .action-container.stacked .snake-container { width: 100%; max-width: 320px; }
    .action-container.stacked .unlock-btn { width: 100%; justify-content: center; }

    /* BUNDLE SHOWCASE */
    .bundle-grid { display: flex; gap: 24px; margin: 12px 0; flex-wrap: wrap; }
    .bundle-card { text-align: left; transition: all 0.3s ease; display: flex; flex-direction: column; align-items: flex-start; justify-content: center; }
    .bundle-card:hover { transform: translateY(-2px); }
    .bundle-icon-wrap { width: 44px; height: 44px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 0px; background: rgba(255, 255, 255, 0.05); }
    .bundle-label { font-size: 0.75rem; font-weight: 500; color: #cbd5e1; line-height: 1.1; }

    /* COVER SHINE & SPINNER */
    .cover { position:absolute; width: 100%; height: 100%; left: 0; top: 0; transform: translateZ(12px) rotateY(0deg); border-radius: 8px; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.45); background: linear-gradient(180deg,#111217,#0f1216); }
    .cover img { width:100%; height:100%; object-fit:cover; display:block; transition: opacity 0.28s ease, transform 0.28s ease; opacity:0; transform: scale(1.02); will-change: opacity, transform; }
    #coverFace { cursor: pointer; }
    
    .cover-loading-spin { position: absolute; inset: 0; z-index: 7; pointer-events: none; display: flex; align-items: center; justify-content: center; opacity: 1; transition: opacity 0.4s ease-out; }
    .loading-half-wheel { width: 40px; height: 40px; border: 4px solid transparent; border-radius: 50%; border-top-color: #6366f1; border-left-color: #a855f7; box-shadow: 0 0 10px rgba(168, 85, 247, 0.7), inset 0 0 6px rgba(99, 102, 241, 0.5); }
    .cover.loaded .cover-loading-spin { opacity: 0; }
    
    .cover-shine { position:absolute; inset:0; z-index:20; pointer-events:none; background: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.7) 28%, rgba(0,0,0,0.95) 50%, rgba(0,0,0,0.7) 72%, rgba(0,0,0,0) 100%); transform: translateX(-160%) skewX(-10deg); mix-blend-mode: multiply; opacity:0.95; animation: coverFast 0.45s linear infinite; transition: none; filter: blur(8px); }

    .cover-black-overlay {
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        z-index: 14;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.5s ease;
        border-radius: 8px;
    }
    
    .cover-black-overlay.active {
        opacity: 1;
    }

    /* UPGRADED LASER GLOW BORDER */
    .snake-container { 
        position: relative; 
        display: none; 
        padding: 4px; 
        border-radius: 14px; 
        z-index: 100; 
        margin-left: 0; 
        background: transparent; 
        overflow: hidden; 
        box-shadow: 0 0 35px rgba(16, 185, 129, 0.4); 
    }
    .snake-border { 
        position: absolute; 
        top: 50%; 
        left: 50%; 
        width: 400%; 
        height: 400%; 
        background: conic-gradient(
            from 0deg,
            transparent 0deg,
            transparent 150deg,
            #10b981 180deg,
            #34d399 240deg,
            #ffffff 280deg,
            #10b981 320deg,
            transparent 360deg
        );
        animation: snakeRotate 2.2s linear infinite; 
        z-index: 0; 
        pointer-events: none; 
        filter: blur(1px);
    }
    .snake-mask { 
        position: absolute; 
        inset: 3px; 
        background: #0b0e13; 
        border-radius: 11px; 
        z-index: 1; 
    }
    .snake-glow { 
        position: absolute; 
        top: 50%; 
        left: 50%; 
        transform: translate(-50%, -50%); 
        width: 115%; 
        height: 115%; 
        background: #10b981; 
        filter: blur(30px); 
        opacity: 0.6; 
        z-index: -1; 
        animation: softPulse 2.5s ease-in-out infinite; 
    }
    .unlock-btn { 
        position: relative; 
        z-index: 10; 
        display: flex; 
        align-items: center; 
        gap: 8px; 
        background-color: #10b981; 
        color: white; 
        padding: 11px 24px; 
        border-radius: 10px; 
        font-weight: 800; 
        font-size: 0.95rem; 
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); 
        cursor: pointer; 
        border: none; 
        transition: transform 0.2s, background-color 0.2s; 
        margin: 0; 
        overflow: hidden; 
    }
    .unlock-btn:hover { 
        transform: scale(1.03); 
        background-color: #059669; 
    }
    
    .unlock-btn .btn-shine { 
        position: absolute; 
        inset: -6px; 
        transform: translateX(-140%) skewX(-30deg); 
        background: linear-gradient(90deg,rgba(0,0,0,0) 0%, rgba(0,0,0,0.3) 45%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0) 100%); 
        mix-blend-mode: overlay; 
        pointer-events: none; 
        animation: blackShine 4s ease-in-out infinite; 
        display: none; 
    }

    /* CTA BUTTONS */
    .cta-btn{ position:relative; overflow:hidden; box-shadow: 0 8px 30px rgba(124,58,237,0.25); }
    .cta-btn .cta-shine{ position:absolute; inset:-6px; transform:translateX(-140%) skewX(-30deg); background:linear-gradient(90deg,rgba(255,255,255,0) 0%, rgba(255,255,255,0.43) 45%, rgba(255,255,255,0.15) 60%, rgba(255,255,255,0) 100%); transition: opacity 0.2s; opacity: 0.90; mix-blend-mode: screen; pointer-events:none; }
    .cta-btn:hover .cta-shine { opacity: 1; }
    .cta-btn.no-shine .cta-shine { display: none !important; animation: none !important; }
    .cta-btn.no-shine { box-shadow: none; background: rgba(255,255,255,0.1); color: #94a3b8; }
    .cta-btn .corner-bling{ pointer-events:none; position:absolute; inset:-6px; border-radius:12px; background:radial-gradient(160px 160px at 0 0, rgba(255,255,255,.65), transparent 60%), radial-gradient(160px 160px at 100% 0, rgba(255,255,255,.5), transparent 60%), radial-gradient(160px 160px at 0 100%, rgba(255,255,255,.5), transparent 60%), radial-gradient(160px 160px at 100% 100%, rgba(255,255,255,.5), transparent 60%); opacity:0; filter: blur(6px); }
    .cta-btn:hover .corner-bling { opacity: .95; }

    /* BOOK 3D */
    .book-wrap { perspective:1600px; display:flex; align-items:center; justify-content:center; position: relative; }
    .book-3d { width: 240px; height: 340px; position: relative; transform-style: preserve-3d; transform: rotateY(-12deg) rotateX(4deg); transition: transform .35s ease; margin: 12px; }
    .book-3d:hover { transform: rotateY(-8deg) rotateX(6deg) translateY(-8px); }
    .spine { position:absolute; left: -12px; top: 6px; width: 24px; height: calc(100% - 12px); transform-origin: left center; transform: rotateY(90deg) translateX(-12px); border-radius: 8px 0 0 8px; background: linear-gradient(180deg,#e6e6e8,#cfcfd3); box-shadow: inset 0 2px 6px rgba(0,0,0,0.06); }
    .pages { position:absolute; left: -8px; top: 10px; width: 16px; height: calc(100% - 20px); transform: rotateY(-90deg) translateX(-8px); background: linear-gradient(90deg,#fcfbf9,#f0efe9); border-radius: 4px 0 0 4px; box-shadow: inset 0 0 8px rgba(0,0,0,0.08); overflow:hidden; }
    .top-edge { position:absolute; top: -10px; left: 10px; width: calc(100% - 20px); height: 16px; transform: rotateX(90deg) translateY(-10px); background: linear-gradient(180deg,#fbfbfb,#f0efef); border-radius: 8px 8px 0 0; }
    .bottom-edge { position:absolute; bottom: -10px; left: 10px; width: calc(100% - 20px); height: 16px; transform: rotateX(-90deg) translateY(10px); background: linear-gradient(180deg,#fbfbfb,#f0efef); border-radius: 0 0 8px 8px; }
    .book-ghost { position:absolute; bottom: -28px; left: 20px; width: 70%; height: 28px; background: rgba(0,0,0,0.45); border-radius: 50%; filter: blur(16px); transform: rotateX(90deg); }
    @media (max-width:700px){ .book-3d { width: 170px; height: 245px; } }

    .cover-support-btn {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 100;
        width: 32px;
        height: 32px;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .cover-support-btn:hover {
        background: rgba(99, 102, 241, 0.6);
        transform: scale(1.1);
        border-color: rgba(255, 255, 255, 0.4);
    }

    /* TAG & STATS */
    .subtle-tag { position: relative; overflow: hidden; display: inline-flex; align-items: center; gap: 4px; background-color: rgba(255, 255, 255, 0.08); backdrop-filter: blur(2px); border: 1px solid rgba(255, 255, 255, 0.15); font-size: 0.75rem; font-weight: 700; padding: 0 10px; border-radius: 6px; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2); text-transform: uppercase; letter-spacing: 0.5px; cursor: default; margin-bottom: 8px; height: 26px; min-width: 120px; }
    .tag-text-wrapper { position: relative; height: 100%; display: flex; align-items: flex-start; overflow: hidden; flex-grow: 1; }
    .tag-text { position: relative; white-space: nowrap; background-image: linear-gradient(90deg, #a855f7, #6366f1, #e0f2f1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-fill-color: transparent; line-height: 1; background-size: 200% auto; animation: gradient-shift 8s ease infinite; }
    .subtle-tag .tag-shine { position: absolute; inset: -6px; transform: translateX(-140%) skewX(-30deg); background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 45%, rgba(255,255,255,0.1) 60%, rgba(255,255,255,0) 100%); mix-blend-mode: overlay; pointer-events: none; opacity: 0.8; animation: tagShine 3.0s ease-in-out infinite; }
    .stats-section { display: flex; justify-content: space-around; align-items: center; padding: 0; border-top: none; border-bottom: none; margin-top: 16px; }
    .stat-item { text-align: center; flex-grow: 1; padding: 0 8px; }
    .stat-value { font-size: 1.35rem; font-weight: 700; line-height: 1.1; color: #e0f2f1; margin-bottom: 4px; text-shadow: none; display: flex; align-items: center; justify-content: center; gap: 6px; }
    .stat-value svg { color: #a855f7; filter: drop-shadow(0 0 4px rgba(168, 85, 247, 0.7)); }
    .stat-label { font-size: 0.75rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; color: #94a3b8; }
    .star-glow svg { filter: drop-shadow(0 0 4px rgba(251, 191, 36, 0.6)); }
    .star-glow .filled { fill: #fbbf24; color: #fbbf24; }
    .star-glow .half { fill: transparent; color: #fbbf24; }
    .star-glow .empty { color: #475569; opacity: 0.45; }

    /* MODALS */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); z-index: 1000; overflow: auto; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
    .modal-content { position: relative; background-color: #ffffff; color: #1f2937; padding: 30px; border-radius: 12px; width: 85%; max-width: 400px; border: 1px solid rgba(0,0,0,0.1); box-shadow: 0 5px 20px rgba(0,0,0,0.5), 0 0 20px rgba(99,102,241,0.25); opacity: 0; transform: translateY(20px) scale(0.95); }
    #previewOverlay { position: absolute; inset: 0; z-index: 8; background: #111; opacity: 0; transition: opacity 0.3s ease; display: flex; align-items: center; justify-content: center; pointer-events: none; }
    #previewScreenshot { width: 100%; height: 100%; object-fit: cover; opacity: 0; border-radius: 8px; }

    #communityModal { align-items: flex-end; justify-content: center; padding-bottom: 20px; }
    @media (min-width: 640px) { #communityModal { align-items: center; padding-bottom: 0; } }

    /* PREMIUM TOAST */
    #toastNotification { 
        position: fixed; 
        top: 24px; 
        right: 24px; 
        transform: translateX(120%); 
        background: rgba(15, 23, 42, 0.85); 
        backdrop-filter: blur(12px);
        color: white; 
        padding: 14px 20px; 
        border-radius: 16px; 
        box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1); 
        z-index: 5000; 
        display: flex; 
        align-items: center; 
        gap: 12px; 
        font-weight: 600; 
        font-size: 0.9rem;
        transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1); 
        border-left: 4px solid #10b981;
    }
    #toastNotification.show { transform: translateX(0); }
    #toastNotification.error { border-left-color: #ef4444; }

    #paymentTimer { display: none; position: fixed; top: 10px; left: 50%; transform: translateX(-50%); background: transparent; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.5); font-size: 1.1rem; font-weight: 800; font-family: monospace; z-index: 2010; padding: 4px 10px; border-radius: 8px; }

    /* DASHBOARD */
    #productViewerModal { z-index: 4000; }
    #productViewerContent { width: 95%; max-width: 900px; height: 80vh; padding: 0; background: #0f172a; display: flex; flex-direction: column; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 0 50px rgba(0, 0, 0, 0.8); }
    .viewer-header { padding: 16px 24px; border-bottom: 1px solid rgba(255,255,255,0.08); display: flex; justify-content: space-between; align-items: center; background: rgba(15, 23, 42, 0.95); }
    .viewer-body { flex: 1; display: flex; height: 100%; overflow: hidden; }
    .viewer-sidebar { width: 240px; background: rgba(17, 24, 39, 0.6); border-right: 1px solid rgba(255,255,255,0.08); padding: 20px 12px; display: flex; flex-direction: column; gap: 8px; }
    .viewer-tab { padding: 12px 16px; border-radius: 10px; cursor: pointer; color: #94a3b8; transition: all 0.3s ease; font-size: 0.95rem; display: flex; align-items: center; gap: 12px; font-weight: 500; }
    .viewer-tab.active { background: linear-gradient(90deg, rgba(99,102,241,0.15) 0%, rgba(99,102,241,0) 100%); color: #818cf8; border-left: 3px solid #6366f1; }
    /* FIXED: Changed to display flex to keep visible */
    .viewer-tab.tab-disabled { opacity: 0.4; filter: grayscale(1); pointer-events: none; cursor: not-allowed; display: flex; background: rgba(255,255,255,0.02); }
    .viewer-main { flex: 1; padding: 0; overflow: hidden; background: #020617; position: relative; }
    .viewer-section { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center; position: relative; }
    .viewer-section.active { display: flex; }
    .pdf-container { width: 100%; height: 100%; }
    .flipbook-container { width: 100%; height: 100%; }
    .flipbook-iframe { width: 100%; height: 100%; border: none; }
    .mindmap-container { width: 100%; height: 100%; overflow: hidden; display: flex; align-items: center; justify-content: center; cursor: grab; position: relative; }
    .mindmap-container:active { cursor: grabbing; }
    .mindmap-img { max-width: 90%; max-height: 90%; transition: transform 0.1s ease; transform-origin: 0 0; }
    .audio-player-card { width: 100%; max-width: 500px; padding: 30px; background: rgba(255,255,255,0.03); border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); text-align: center; }
    
    .viewer-download-btn { position: absolute; top: 10px; right: 10px; z-index: 50; display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.2s; text-decoration: none; }
    .viewer-download-btn:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }

    /* FEEDBACKS */
    .user-avatar { width: 40px; height: 40px; min-width: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1rem; color: white; margin-right: 12px; flex-shrink: 0; }
    .feedback-item { display: flex; align-items: flex-start; padding: 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); margin-bottom: 12px; transition: all 0.3s ease; }
    .feedback-item:hover { background: rgba(255, 255, 255, 0.08); transform: translateY(-2px); }
    .feedback-content { flex: 1; }
    .feedback-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
    .user-info { display: flex; align-items: center; }
    .user-details { display: flex; flex-direction: column; }
    .user-name { font-weight: 600; font-size: 0.9rem; color: #e2e8f0; }
    .user-location { font-size: 0.75rem; color: #94a3b8; margin-top: 2px; }
    .feedback-date { font-size: 0.75rem; color: #64748b; text-align: right; }
    .feedback-text { font-size: 0.9rem; line-height: 1.5; color: #cbd5e1; margin-bottom: 8px; }
    .extra-feedback { display: none; }

    /* LOADER BALLS */
    .jumping-loader { display: flex; justify-content: center; align-items: center; height: 60px; }
    .jumping-loader .ball { width: 14px; height: 14px; margin: 0 4px; background-color: #a855f7; border-radius: 50%; display: inline-block; }
    .jumping-loader .ball:nth-child(1) { animation: waveJump 0.8s ease-in-out infinite 0s; }
    .jumping-loader .ball:nth-child(2) { animation: waveJump 0.8s ease-in-out infinite 0.1s; }
    .jumping-loader .ball:nth-child(3) { animation: waveJump 0.8s ease-in-out infinite 0.2s; }

    /* PAYMENT & CONFIRMATION */
    #confirmationModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; align-items: center; justify-content: center; opacity: 0; backdrop-filter: blur(0px); transition: opacity 0.3s ease, backdrop-filter 0.3s ease; }
    #confirmationModal.active { display: flex; opacity: 1; backdrop-filter: blur(4px); }
    #confirmationContent { background: #1e293b; backdrop-filter: none; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 24px; width: 80%; max-width: 380px; text-align: center; color: white; box-shadow: 0 10px 40px 0 rgba(0, 0, 0, 0.5); transition: box-shadow 0.3s ease; }
    .conf-text-glow { color: #f87171; font-weight: 700; font-size: 1.25rem; text-shadow: 0 0 12px rgba(239, 68, 68, 0.8); animation: redGlow 2.5s infinite ease-in-out; }
    .invisible-shield { position: absolute; left: 0; width: 100%; background: transparent; z-index: 25; pointer-events: auto; }
    #bottomShield { height: 120px; }
    .invisible-shield.inactive { pointer-events: none; z-index: 1; }

    .payment-lang-btn { position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 16px; margin-bottom: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; font-weight: 600; font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease; }
    .payment-lang-btn:hover { background: rgba(255,255,255,0.1); border-color: rgba(168, 85, 247, 0.5); transform: translateY(-2px); box-shadow: 0 8px 20px -6px rgba(168, 85, 247, 0.4); }
    .payment-lang-btn .btn-shine { position: absolute; inset: -6px; transform: translateX(-140%) skewX(-30deg); background: linear-gradient(90deg,rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 45%, rgba(255,255,255,0.1) 60%, rgba(255,255,255,0) 100%); mix-blend-mode: overlay; pointer-events: none; animation: btnshine 3.0s ease-in-out infinite; }
    #saleBanner { display: none; background: linear-gradient(90deg, #ef4444, #b91c1c); padding: 8px; text-align: center; font-weight: 700; font-size: 0.9rem; box-shadow: 0 4px 20px rgba(239, 68, 68, 0.4); border-bottom: 1px solid rgba(255,255,255,0.1); }
    
    .download-button { position: relative; overflow: hidden; display: inline-flex; align-items: center; justify-content: center; gap: 8px; background-color: #4CAF50; background-image: linear-gradient(135deg, #4CAF50, #10B981); color: white; padding: 12px 25px; margin-top: 0px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 1.1em; cursor: pointer; border: none; transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.3s; box-shadow: 0 4px 15px rgba(16,185,129,0.4); }
    .no-shine-button { position: relative; overflow: hidden; display: inline-flex; align-items: center; justify-content: center; gap: 8px; color: white; padding: 12px 25px; margin-top: 0px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 1.1em; cursor: pointer; border: none; transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.3s; background-image: linear-gradient(135deg, #6366f1, #a855f7); box-shadow: 0 4px 15px rgba(168,85,247,0.4); }
    .details-content { overflow: hidden; height: 0; opacity: 0; transition: height 0.3s ease-out, opacity 0.3s ease-out; }
    details[open] summary svg { transform: rotate(180deg); }
    summary { list-style: none; outline: none; }
    summary::-webkit-details-marker { display: none; }
    
    .language-modal-close { position: absolute; top: 10px; right: 10px; background: none; border: none; cursor: pointer; padding: 8px; border-radius: 50%; color: #94a3b8; z-index: 10; transition: color 0.2s; }
    .language-modal-close:hover { color: white; }
    .premium-list-container { margin-top: 10px; padding: 10px; padding-bottom: 0; }
    .premium-list-item { 
    display: flex; 
    align-items: center; 
    gap: 15px; 
    margin-bottom: 20px; 
    font-size: 1.0rem; 
    color: #cbd5e1; 
    line-height: 1; 
}
    .premium-list-item strong { color: #e0f2f1; }
    .simple-tick { color: #34d399; filter: drop-shadow(0 0 3px rgba(52, 211, 153, 0.5)); font-size: 1.4rem; line-height: 1; margin-right: 10px; min-width: 20px; font-weight: 900; transform: translateY(-2px); }

    .action-card {
        background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 16px;
        padding: 16px;
        margin-bottom: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 16px;
        width: 100%;
        text-align: left;
    }
    .action-card:hover {
        background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
        border-color: rgba(168,85,247,0.4);
        transform: translateY(-2px);
    }
    .action-icon {
        width: 48px;
        height: 48px;
        background: rgba(168,85,247,0.1);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }
    .action-text h4 { color: #f1f5f9; font-weight: 700; font-size: 1rem; margin-bottom: 2px; }
    .action-text p { color: #94a3b8; font-size: 0.8rem; }

    #tapPrompt { transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1); }

    .floating-quick-actions { 
        position: absolute; 
        bottom: 8px; 
        right: 8px; 
        z-index: 105; 
    }
    .quick-actions-btn {
        width: 38px; 
        height: 38px; 
        background: rgba(15, 23, 42, 0.92); 
        backdrop-filter: blur(12px);
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        color: white; 
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4); 
        cursor: pointer; 
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 1px solid rgba(255, 255, 255, 0.15); 
        position: relative; 
        z-index: 110;
    }
    .quick-actions-btn:hover { 
        background: rgba(15, 23, 42, 0.98); 
        transform: scale(1.1) rotate(15deg); 
        color: #a855f7; 
    }
    .quick-actions-btn.active { 
        background: #a855f7; 
        color: white; 
        transform: rotate(90deg); 
    }

    .cute-quick-menu {
        position: absolute; 
        bottom: 54px; 
        right: 0; 
        display: flex; 
        flex-direction: column;
        gap: 12px; 
        opacity: 0; 
        transform: translateY(10px) scale(0.9);
        pointer-events: none; 
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); 
        z-index: 104;
    }
    .cute-quick-menu.active { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
        pointer-events: auto; 
    }
    .cute-menu-item { 
        display: flex; 
        align-items: center; 
        justify-content: flex-end; 
        gap: 12px; 
        cursor: pointer; 
        position: relative; 
    }
    
    .cute-label {
        background: rgba(0, 0, 0, 0.7); 
        backdrop-filter: blur(10px); 
        padding: 7px 15px;
        border-radius: 12px; 
        color: white; 
        font-size: 0.78rem; 
        font-weight: 600;
        white-space: nowrap; 
        border: 1px solid rgba(255, 255, 255, 0.15);
        opacity: 0; 
        transform: translateX(10px); 
        transition: all 0.3s ease; 
        pointer-events: none;
    }
    .cute-quick-menu.active .cute-label { 
        opacity: 1; 
        transform: translateX(0); 
        transition-delay: 0.1s; 
    }
    .cute-icon-wrapper {
        width: 34px; 
        height: 34px; 
        background: rgba(15, 23, 42, 0.95); 
        backdrop-filter: blur(12px);
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        color: white; 
        border: 1px solid rgba(255, 255, 255, 0.2); 
        transition: all 0.2s ease;
    }
    .cute-menu-item:hover .cute-icon-wrapper { 
        transform: scale(1.1); 
        border-color: #a855f7; 
        color: #a855f7; 
    }

    /* COVER BLUR - REDUCED INTENSITY */
    .cover-blur-overlay {
        position: absolute; 
        inset: 0; 
        background: rgba(0, 0, 0, 0.35);
        backdrop-filter: blur(3.2px); 
        z-index: 99; 
        opacity: 0;
        pointer-events: none; 
        transition: opacity 0.4s ease; 
        border-radius: 8px;
    }
    .cover-blur-overlay.active { 
        opacity: 1; 
    }

    /* BACKGROUND GLOW EFFECTS */
    .background-glow {
        pointer-events: none;
        position: fixed;
        inset: 0;
        z-index: -10;
    }
    
    .glow-circle {
        position: absolute;
        border-radius: 50%;
        filter: blur(140px);
    }
    
    .glow-top-left {
        top: -56px;
        left: -40px;
        width: 680px;
        height: 680px;
        background-color: rgba(99, 102, 241, 0.2);
    }
    
    .glow-bottom-right {
        bottom: -56px;
        right: -40px;
        width: 600px;
        height: 600px;
        background-color: rgba(168, 85, 247, 0.2);
    }

    /* PREMIUM LOADING OVERLAY */
    .premium-loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(11, 14, 19, 0.95);
        backdrop-filter: blur(8px);
        z-index: 9999;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    .premium-loading-overlay.active {
        opacity: 1;
        pointer-events: all;
    }

    .rolling-text-animation {
        height: 40px;
        margin-top: 30px;
        position: relative;
        width: 300px;
        overflow: hidden;
    }

    .loading-text {
        position: absolute;
        width: 100%;
        text-align: center;
        font-size: 1.1rem;
        font-weight: 600;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease, transform 0.5s ease;
    }

    .loading-text.active {
        opacity: 1;
        transform: translateY(0);
        animation: textGlow 2s ease-in-out infinite;
    }

    .loading-text .text-shine {
        background: linear-gradient(90deg, #a855f7, #6366f1, #e0f2f1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        background-size: 200% auto;
        animation: gradient-shift 8s ease infinite;
    }

    /* Demo Flipbook Modal */
    #demoFlipbookModal .modal-content {
        max-width: 95%;
        max-height: 90vh;
        padding: 0;
        background: #0f172a;
        width: 95%;
    }

    #demoFlipbookModal .viewer-header {
        padding: 16px 24px;
        border-bottom: 1px solid rgba(255,255,255,0.08);
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(15, 23, 42, 0.95);
    }

    #demoFlipbookModal .flipbook-container {
        height: calc(90vh - 60px);
    }

    /* STICKY MOBILE BAR */
    .mobile-sticky-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(11, 14, 19, 0.95);
        backdrop-filter: blur(12px);
        border-top: 1px solid rgba(168, 85, 247, 0.2);
        padding: 12px 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9998;
        transform: translateY(100%);
        transition: transform 0.4s ease-out;
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
    }
    
    .mobile-sticky-bar.show {
        transform: translateY(0);
    }
    
    .sticky-bar-button {
        background: linear-gradient(135deg, #6366f1, #a855f7);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-weight: 700;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
        justify-content: center;
    }
    
    .sticky-bar-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(168, 85, 247, 0.5);
    }
    
    /* WHY THIS BOOK MODAL */
    #whyBookModal .modal-content {
    background: #0f172a;
    max-width: 450px;
    width: 90%; 
    padding: 20px;
    max-height: 85vh; 
    overflow-y: auto; 
    position: relative;
    margin: 20px auto; 
    scrollbar-width: thin; 
}

#whyBookModal .modal-content .absolute.top-4.right-4 {
    position: sticky; 
    top: -10px;
    right: -10px;
    float: right;
    z-index: 50;
    background: rgba(15, 23, 42, 0.8);
    border-radius: 50%;
    padding: 5px;
   }
    
    .why-book-list {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        gap: 16px;
    }
    
    .why-book-item {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        padding: 10px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        transition: all 0.3s ease;
    }
    
    .why-book-item:hover {
        background: rgba(255, 255, 255, 0.05);
        border-color: rgba(168, 85, 247, 0.2);
        transform: translateY(-2px);
    }
    
    .why-book-icon {
        width: 36px;
        height: 36px;
        background: rgba(168, 85, 247, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #a855f7;
        flex-shrink: 0;
    }
    
    .why-book-content h4 {
        font-size: 0.85rem;
        font-weight: 600;
        color: #f1f5f9;
        margin-bottom: 4px;
    }
    
    .why-book-content p {
        font-size: 0.85rem;
        color: #94a3b8;
        line-height: 1.4;
    }

    /* PLAN SELECTION MODAL */
    #planSelectionModal .modal-content {
        background-color: #0b0e13;
        width: 95%;
        max-width: 1000px;
        padding: 24px;
        border: 1px solid rgba(255,255,255,0.1);
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .plan-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin-top: 24px;
    }
    
    @media (min-width: 768px) {
        .plan-grid {
            grid-template-columns: repeat(3, 1fr);
            align-items: stretch;
        }
    }
    
    .plan-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        position: relative;
        transition: all 0.3s ease;
        overflow: hidden; /* Added to contain the shine effect inside the card */
    }
    
    .plan-card:hover {
        transform: translateY(-5px);
        background: rgba(255, 255, 255, 0.05);
    }
    
    .plan-card.premium {
        border-color: rgba(251, 191, 36, 0.4);
        background: linear-gradient(145deg, rgba(251, 191, 36, 0.05), rgba(0,0,0,0));
        box-shadow: 0 0 20px rgba(251, 191, 36, 0.1);
    }
    
    .plan-card.standard {
        border-color: rgba(168, 85, 247, 0.4);
        box-shadow: 0 0 20px rgba(168, 85, 247, 0.1);
    }
    
    .plan-badge {
        position: absolute;
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: white;
        z-index: 10;
    }
    
    .badge-standard { background: #a855f7; box-shadow: 0 4px 10px rgba(168, 85, 247, 0.4); }
    .badge-premium { background: linear-gradient(135deg, #f59e0b, #d97706); box-shadow: 0 4px 10px rgba(245, 158, 11, 0.4); animation: pulseGlow 2s infinite; }
    
    .plan-header { text-align: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .plan-name { font-size: 1.1rem; font-weight: 700; color: #cbd5e1; margin-bottom: 8px; }
    .plan-price { font-size: 2rem; font-weight: 800; color: white; display: flex; align-items: center; justify-content: center; gap: 4px; }
    .plan-currency { font-size: 1rem; font-weight: 600; color: #94a3b8; }
    
    .plan-features { list-style: none; padding: 0; margin: 0; flex-grow: 1; display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; }
    .plan-feature-item { display: flex; align-items: center; gap: 10px; font-size: 0.85rem; color: #cbd5e1; }
    .plan-feature-item.excluded { color: #64748b; text-decoration: line-through; opacity: 0.6; }
    .feature-icon { width: 18px; height: 18px; flex-shrink: 0; }
    .icon-check { color: #10b981; }
    .icon-cross { color: #64748b; }

    .plan-btn {
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        font-weight: 700;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
        color: white;
        margin-top: auto;
    }
    
    .btn-basic { background: rgba(255,255,255,0.1); color: #cbd5e1; }
    .btn-basic:hover { background: rgba(255,255,255,0.15); color: white; }
    
    .btn-standard { background: #a855f7; box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3); }
    .btn-standard:hover { background: #9333ea; transform: translateY(-2px); }
    
    .btn-premium { background: linear-gradient(135deg, #f59e0b, #d97706); box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3); position: relative; overflow: hidden; }
    .btn-premium:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4); }

    /* Custom Shine Animation Definition */
    @keyframes shineEffect {
        0% { transform: skewX(-20deg) translateX(-150%); }
        100% { transform: skewX(-20deg) translateX(150%); }
    }

    /* FIXED: Shine effect loop continuously */
    .premium-shine-effect {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.15) 50%, transparent 100%);
        transform: skewX(-20deg) translateX(-150%);
        /* Changed animation to infinite and increased duration for smoothness */
        animation: shineEffect 1.5s linear infinite;
        pointer-events: none;
        z-index: 1;
    }

    @media (max-width: 640px) { 
        .viewer-body { flex-direction: column; } 
        .viewer-sidebar { width: 100%; flex-direction: row; height: auto; padding: 12px; overflow-x: auto; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.08); background: #111827; } 
        .viewer-tab { flex: 0 0 auto; justify-content: center; white-space: nowrap; padding: 10px 14px; font-size: 0.85rem; border-left: none; border-bottom: 3px solid transparent; border-radius: 4px; }
        .viewer-tab.active { background: transparent; border-left: none; border-bottom-color: #6366f1; color: #818cf8; }
        .floating-quick-actions {
            bottom: 8px;
            right: 8px;
        }
        .cute-quick-menu {
            bottom: 54px;
            right: 0;
        }
        .cute-label {
            display: none;
        }
        #demoFlipbookModal .modal-content {
            max-width: 98%;
            max-height: 85vh;
            width: 98%;
        }
        #demoFlipbookModal .flipbook-container {
            height: calc(85vh - 60px);
        }
        .mobile-sticky-bar {
            display: flex;
        }
        .bundle-grid {
            gap: 16px;
        }
    }
    
    @media (min-width: 641px) {
        .mobile-sticky-bar {
            display: none;
        }
    }
  </style>
</head>
<body class="bg-[#0b0e13] text-white selection:bg-indigo-500/30">

  <div class="background-glow">
      <div class="glow-circle glow-top-left"></div>
      <div class="glow-circle glow-bottom-right"></div>
  </div>

  <div id="toastNotification">
      <div id="toastIcon"><i data-lucide="check-circle" class="h-5 w-5 text-emerald-400"></i></div>
      <span id="toastMessage">Product Unlocked! Access Granted.</span>
  </div>

  <div id="mobileStickyBar" class="mobile-sticky-bar">
      <button onclick="openPlanSelectionModal()" class="sticky-bar-button">
          <i data-lucide="shopping-cart" class="h-4 w-4"></i>
          Get Access
      </button>
  </div>

  <div id="premiumLoadingOverlay" class="premium-loading-overlay">
      <div class="jumping-loader">
          <span class="ball"></span>
          <span class="ball"></span>
          <span class="ball"></span>
      </div>
      <div class="rolling-text-animation">
          <div id="loadingText1" class="loading-text"><span class="text-shine">Initializing Data...</span></div>
          <div id="loadingText2" class="loading-text"><span class="text-shine">Fetching Source...</span></div>
          <div id="loadingText3" class="loading-text"><span class="text-shine">Loading 3D Assets...</span></div>
          <div id="loadingText4" class="loading-text"><span class="text-shine">Rendering Pages...</span></div>
          <div id="loadingText5" class="loading-text"><span class="text-shine">Optimizing Experience...</span></div>
          <div id="loadingText6" class="loading-text"><span class="text-shine">Almost There...</span></div>
      </div>
  </div>

  <div id="paymentTimer"><span id="timerCount"></span></div>

  <header class="max-w-7xl mx-auto px-6 py-6 flex items-center justify-between">
    <a href="/become-creator" class="flex items-center gap-3 group">
      <img src="https://bookmintor.shop/images/logo.png" 
           alt="Logo" 
           class="h-10 w-10 rounded-full drop-shadow-[0_0_20px_rgba(168,85,247,0.6)] group-hover:scale-110 transition-all duration-300 object-cover">
      
      <div class="brand-col">
          <span class="text-lg font-bold tracking-wide text-zinc-100 leading-none">
            <span class="bg-gradient-to-r from-indigo-300 to-fuchsia-300 bg-clip-text text-transparent">Book</span>mintor
          </span>
          <span class="creator-text">CREATOR</span>
      </div>
    </a>
    
    <a href="/Top-Academics" class="text-xs font-bold uppercase tracking-widest text-white/30 hover:text-white transition duration-300">
        Library
    </a>
  </header>

  <div id="creatorProfileModal" class="modal">
      <div class="modal-content !max-width-none !w-[90%] !max-w-md bg-[#0f172a] border border-white/10 !p-0 overflow-hidden shadow-profileGlow">
          <div class="h-32 relative overflow-hidden">
              <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('https://bookmintor.shop/images/aarohi_pandey.png'); filter: blur(3px); transform: scale(1.1); opacity: 0.7;"></div>
              <div class="absolute inset-0 bg-black/20"></div>
              <button onclick="closeCreatorProfile()" class="absolute top-4 right-4 text-white hover:text-white/80 transition z-20"><i data-lucide="x" class="h-6 w-6"></i></button>
          </div>

          <div class="px-6 pb-8 text-center">
              <div class="dp-container">
                  <img src="https://bookmintor.shop/images/aarohi_pandey.png" class="dp-img" alt="Aarohi DP">
              </div>
              <h2 class="text-2xl font-bold mt-4 text-white flex items-center justify-center gap-2">Aarohi Pandey <i data-lucide="verified" class="h-5 w-5 text-blue-400"></i></h2>
              <p class="text-indigo-400 font-medium text-sm">Reader & Writer</p>
              
              <div class="flex justify-center gap-8 my-6 py-4 border-y border-white/5">
                  <div><p class="text-xl font-bold text-white">01</p><p class="text-[10px] text-zinc-500 uppercase font-bold tracking-widest">Book</p></div>
                  <div><p class="text-xl font-bold text-white">574+</p><p class="text-[10px] text-zinc-500 uppercase font-bold tracking-widest">Views</p></div>
                  <div><p class="text-xl font-bold text-white">4.9</p><p class="text-[10px] text-zinc-500 uppercase font-bold tracking-widest">Rating</p></div>
              </div>

              <div class="text-left mb-6">
                  <h4 class="text-xs font-bold text-zinc-500 uppercase tracking-widest mb-2">About Aarohi</h4>
                  <p class="text-sm text-zinc-300 leading-relaxed">I love reading books and writing stories from real life.I write what I feel, and what words can't stay silent about.</p>
              </div>

              <div class="grid grid-cols-2 gap-3">
                  <a href="https://www.snapchat.com/@aarohi_pandey17?share_id=WnZ3MNYm-d8&locale=en-GB" target="_blank" class="social-btn text-[#fffc00] flex justify-center no-underline"><i data-lucide="ghost" class="h-4 w-4"></i> Snapchat</a>
                  <a href="https://www.instagram.com/aarohi__pandey17/" target="_blank" class="social-btn text-[#e4405f] flex justify-center no-underline"><i data-lucide="instagram" class="h-4 w-4"></i> Instagram</a>
                  <a href="https://whatsapp.com/channel/0029Vb7dw6J2UPBJe7iDpq2y" target="_blank" class="social-btn col-span-2 text-emerald-400 border-emerald-400/20 bg-emerald-400/5 justify-center shadow-[0_0_15px_rgba(16,185,129,0.2)] no-underline"><i data-lucide="message-circle" class="h-5 w-5"></i> Join WhatsApp Community</a>
              </div>
          </div>
      </div>
  </div>

  <div id="communityModal" class="modal">
      <div class="modal-content !w-full !max-w-md !p-0 bg-[#0f172a] border border-emerald-500/30 shadow-[0_0_50px_rgba(16,185,129,0.2)] animate-slideUpFade rounded-2xl overflow-hidden mb-0 sm:mb-8">
          <div class="h-1.5 w-full bg-gradient-to-r from-emerald-400 to-green-600"></div>
          <div class="p-8 text-center relative">
              <div class="w-16 h-16 bg-emerald-500/10 rounded-full flex items-center justify-center mx-auto mb-5 shadow-[0_0_30px_rgba(16,185,129,0.2)] animate-pulse border border-emerald-500/20">
                  <i data-lucide="message-circle" class="h-8 w-8 text-emerald-500"></i>
              </div>
              <h2 class="text-2xl font-bold text-white mb-2">You're In</h2>
              <p class="text-zinc-400 text-sm mb-6 leading-relaxed">Don't miss out. Join <span class="text-white font-bold">Aarohi's Private Community.</span></p>
              
              <a href="https://whatsapp.com/channel/0029Vb7dw6J2UPBJe7iDpq2y" target="_blank" class="block w-full bg-[#25D366] hover:bg-[#128C7E] text-white font-bold py-3.5 rounded-xl shadow-lg transition-all transform hover:scale-[1.02] flex items-center justify-center gap-2 mb-3 no-underline">
                  <i data-lucide="message-circle" class="h-5 w-5 fill-current"></i> Join WhatsApp Community
              </a>
              <button onclick="closeCommunityModal()" class="text-xs font-semibold text-zinc-500 hover:text-zinc-300 uppercase tracking-widest py-2 transition-colors">No thanks, I'll study alone</button>
          </div>
      </div>
  </div>

  <div id="whyBookModal" class="modal">
      <div class="modal-content animate-modalFadeIn">
          <button onclick="closeWhyBookModal()" class="absolute top-4 right-4 text-zinc-400 hover:text-white"><i data-lucide="x" class="h-5 w-5"></i></button>
          <div class="text-center mb-6">
              <div class="w-16 h-16 bg-indigo-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
                  <i data-lucide="star" class="h-8 w-8 text-indigo-400"></i>
              </div>
              <h2 class="text-2xl font-bold text-white">Why This Book?</h2>
              <p class="text-zinc-400 text-sm mt-2">Discover what makes this spiritual journey special</p>
          </div>
          
          <div class="why-book-list">
              <div class="why-book-item">
                  <div class="why-book-icon">
                      <i data-lucide="heart" class="h-4 w-4"></i>
                  </div>
                  <div class="why-book-content">
                      <h4>Heartfelt Authenticity</h4>
                      <p>Written from genuine emotions, not just words. Every page feels like a personal conversation.</p>
                  </div>
              </div>
              
              <div class="why-book-item">
                  <div class="why-book-icon">
                      <i data-lucide="headphones" class="h-4 w-4"></i>
                  </div>
                  <div class="why-book-content">
                      <h4>Multi-Sensory Experience</h4>
                      <p>Not just an eBook - includes audio podcast and video for complete immersion.</p>
                  </div>
              </div>
              
              <div class="why-book-item">
                  <div class="why-book-icon">
                      <i data-lucide="shield" class="h-4 w-4"></i>
                  </div>
                  <div class="why-book-content">
                      <h4>Timeless Wisdom</h4>
                      <p>Spiritual insights that stay with you long after reading. A companion for life's journey.</p>
                  </div>
              </div>
              
              <div class="why-book-item">
                  <div class="why-book-icon">
                      <i data-lucide="users" class="h-4 w-4"></i>
                  </div>
                  <div class="why-book-content">
                      <h4>Community Support</h4>
                      <p>Join hundreds of readers on the same spiritual path. You're not alone in this journey.</p>
                  </div>
              </div>
          </div>
          
          <button onclick="closeWhyBookModal(); openPlanSelectionModal();" class="mt-6 w-full bg-gradient-to-r from-indigo-500 to-fuchsia-500 text-white font-bold py-3 rounded-xl hover:opacity-90 transition-all">
              Start Your Journey Now
          </button>
      </div>
  </div>

  <section class="max-w-5xl mx-auto px-6 py-12 space-y-8">
      <div class="flex flex-col md:flex-row items-center gap-8">
      <div class="book-wrap relative" data-aos="fade-right">
        
        <div class="book-3d" id="book3d">
          <div class="cover" id="coverFace" aria-busy="true">
            <div class="cover-black-overlay" id="coverBlackOverlay"></div>
            <div class="cover-blur-overlay" id="coverBlurOverlay"></div>

            <div class="cover-loading-spin" id="loadingSpin" aria-hidden="true"><div class="loading-half-wheel animate-glowspin"></div></div>
            <div class="cover-shine animate-coverFast" id="coverShine" aria-hidden="true"></div>
            <img id="coverImg" alt="ebook cover" src="" loading="eager" />

            <div id="tapPrompt" class="absolute inset-0 z-[15] flex flex-col items-center justify-center pointer-events-none opacity-0">
                <div class="relative flex items-center justify-center">
                    <div class="absolute w-14 h-14 bg-white/30 rounded-full animate-tapRipple"></div>
                    <div class="bg-indigo-600/80 backdrop-blur-md p-4 rounded-full shadow-2xl border border-white/20 animate-softPulse">
                        <i data-lucide="hand" class="h-8 w-8 text-white"></i>
                    </div>
                </div>
                <div class="mt-4 px-3 py-1.5 bg-black/60 backdrop-blur-md rounded-lg border border-white/10 shadow-xl">
                    <span class="text-[11px] font-bold uppercase tracking-widest text-white flex items-center gap-2">
                        Tap to See Preview <i data-lucide="eye" class="h-3 w-3"></i>
                    </span>
                </div>
            </div>
            <div id="previewOverlay" aria-hidden="true">
                <div class="cover-shine" id="previewShine" style="display: none; z-index: 20; opacity: 1;"></div>
                <img id="previewScreenshot" src="" alt="Preview" class="absolute inset-0 w-full h-full object-contain" />
                <button onclick="exitPreview(event)" id="exitPreviewBtn" class="absolute top-2 right-2 p-1 bg-black/30 text-white rounded-full hover:bg-black/50 transition z-10"><i data-lucide="x" class="h-4 w-4"></i></button>
                <p id="imageCounter" class="absolute bottom-2 left-1/2 -translate-x-1/2 text-xs font-medium px-2 py-0.5 bg-black/50 rounded-full text-white/80 z-10"></p>
            </div>
            
            <div class="floating-quick-actions">
                <div id="cuteQuickMenu" class="cute-quick-menu">
                    <div class="cute-menu-item" onclick="handleCuteMenuItemClick('love', event)">
                        <span class="cute-label">Share Love</span>
                        <div class="cute-icon-wrapper" id="loveIconWrapper">
                            <i data-lucide="heart" class="h-4 w-4 text-red-400" id="loveIcon"></i>
                        </div>
                    </div>
                    <div class="cute-menu-item" onclick="handleCuteMenuItemClick('why', event)">
                        <span class="cute-label">Why This Book?</span>
                        <div class="cute-icon-wrapper"><i data-lucide="star" class="h-4 w-4 text-yellow-400"></i></div>
                    </div>
                    <div class="cute-menu-item" onclick="handleCuteMenuItemClick('support', event)">
                        <span class="cute-label">Get Support</span>
                        <div class="cute-icon-wrapper"><i data-lucide="help-circle" class="h-4 w-4 text-indigo-400"></i></div>
                    </div>
                    <div class="cute-menu-item" onclick="handleCuteMenuItemClick('demo', event)">
                        <span class="cute-label">Flipbook Demo</span>
                        <div class="cute-icon-wrapper"><i data-lucide="book-open" class="h-6 w-6 text-emerald-400"></i></div>
                    </div>
                </div>
                <button id="quickActionsBtn" class="quick-actions-btn" onclick="handleQuickActionsClick(event)">
                    <i data-lucide="settings" class="h-4 w-4"></i>
                </button>
            </div>
          </div>
          <div class="spine" aria-hidden="true"></div><div class="pages" aria-hidden="true"></div><div class="top-edge" aria-hidden="true"></div><div class="bottom-edge" aria-hidden="true"></div><div class="book-ghost" aria-hidden="true"></div>
        </div>

        <div class="absolute -bottom-4 right-0 flex flex-col items-end z-[40]">
            <div id="reactionMenu" class="hidden mb-3 bg-white/10 backdrop-blur-md p-2 rounded-full border border-white/20 flex gap-3 animate-slideUp">
                <button onclick="sendReaction('')" class="hover:scale-125 transition"></button>
                <button onclick="sendReaction('')" class="hover:scale-125 transition"></button>
                <button onclick="sendReaction('')" class="hover:scale-125 transition"></button>
                <button onclick="sendReaction('')" class="hover:scale-125 transition"></button>
            </div>
        </div>
      </div>

      <div class="flex-1 space-y-4" data-aos="fade-left">
        <div onclick="openCreatorProfile()" class="aarohi-profile-trigger" id="aarohiProfileCard">
            <div class="profile-shine-overlay" id="profileShineOverlay">
                <div class="profile-shine"></div>
            </div>
            
            <div class="relative">
                <img src="https://bookmintor.shop/images/aarohi_pandey.png" class="h-9 w-9 rounded-full object-cover border-2 border-white/20" alt="Aarohi">
                <div class="absolute -bottom-0.5 -right-0.5 bg-emerald-500 h-2.5 w-2.5 rounded-full border-2 border-[#0b0e13]"></div>
            </div>
            <div class="flex flex-col">
                <span class="text-xs font-bold text-zinc-100 flex items-center gap-1 leading-tight">Aarohi Pandey <i data-lucide="verified" class="h-3 w-3 text-blue-400"></i></span>
                <div class="flex items-center gap-1 mt-0.5">
                    <div class="flex text-amber-400 drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]"><i data-lucide="star" class="h-2 w-2 fill-current"></i><i data-lucide="star" class="h-2 w-2 fill-current"></i><i data-lucide="star" class="h-2 w-2 fill-current"></i><i data-lucide="star" class="h-2 w-2 fill-current"></i><i data-lucide="star" class="h-2 w-2 fill-current"></i></div>
                    <span class="text-[9px] text-zinc-400 font-bold ml-1">4.9</span>
                </div>
            </div>
        </div>
        
        <div id="custom-tag-container">
            <div class="subtle-tag">
                <div class="tag-text-wrapper">
                    <ul class="rolling-text-list">
                        <li><span class="tag-text">spiritual journey</span></li>
                        <li><span class="tag-text">krishna devotion</span></li>
                        <li><span class="tag-text">inner peace</span></li>
                        <li><span class="tag-text">heartfelt writing</span></li>
                        <li><span class="tag-text">personal reflections</span></li>
                        <li><span class="tag-text">devotional reading</span></li>
                        <li><span class="tag-text">calm mind</span></li>
                        <li><span class="tag-text">self introspection</span></li>
                        <li aria-hidden="true"><span class="tag-text">spiritual journey</span></li>
                    </ul>
                </div>
                <div class="tag-shine"></div>
            </div>
        </div>

        <h1 class="text-3xl font-bold">In Search of My Kanha Ji</h1>
        <p class="text-zinc-300">A heartfelt spiritual journey written in simple words, connecting devotion, emotions, and inner peace.</p>

        <div class="stats-section" id="stats-section">
          <div class="stat-item"><div class="stat-value text-red-400"><i data-lucide="heart" class="h-5 w-5 fill-current"></i><span data-target="400" id="live-heart-count">400</span><span class="text-lg">+</span></div><div class="stat-label">Hearts Reached</div></div>
          <div class="stat-item"><div class="stat-value"><i data-lucide="star" class="h-5 w-5"></i><span data-target="4.9" id="rating-value">0.0</span></div><div class="stat-label">Rating</div></div>
          <div class="stat-item"><div class="stat-value"><i data-lucide="message-square" class="h-5 w-5"></i><span data-target="70+" id="reviews-value">0</span><span class="text-lg">+</span></div><div class="stat-label">feedback</div></div>
        </div>

        <div id="actionContainer" class="action-container">
            <button onclick="openPlanSelectionModal()" id="buyBtn" class="cta-btn inline-flex items-center gap-2 rounded-xl bg-gradient-to-br from-indigo-500 to-fuchsia-500 px-4 py-3 text-sm font-semibold shadow-ctaglow transition hover:scale-105 active:scale-95 text-white border-0 cursor-pointer">
              <span>Get Access</span>
              <i data-lucide="shopping-cart" class="h-4 w-4"></i>
              <span class="cta-shine animate-btnshine"></span>
              <span class="corner-bling"></span>
            </button>

            <div id="mysteryBoxWrap" class="relative cursor-pointer flex items-center justify-center transition hover:scale-110 active:scale-90" onclick="toggleMysteryTooltip(event)">
              <iframe src="https://lottie.host/embed/742bf040-1fc4-44a6-afed-9db4c62c341b/dAmZdAYt2U.lottie" style="border: 0; width: 45px; height: 45px; pointer-events: none; background: transparent;"></iframe>
              <div id="mysteryTooltip" class="absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-56 p-3 bg-brandDark/95 backdrop-blur-md border border-white/10 rounded-xl shadow-2xl opacity-0 scale-95 transition-all duration-300 pointer-events-none z-[60] text-center">
                <p class="text-[11px] font-medium leading-relaxed text-zinc-200">
                  A quiet surprise inside 
                </p>
                <div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-brandDark/95"></div>
              </div>
            </div>

            <div id="unlockContainer" class="snake-container items-center" style="display: none;">
                <div class="snake-border"></div>
                <div class="snake-mask"></div>
                <div class="snake-glow"></div>
                <button id="unlockBtn" class="unlock-btn" data-unlocked="false" onclick="handleUnlockClick()">
                    <i data-lucide="lock-open" class="h-4 w-4"></i> <span>View Library</span>
                </button>
            </div>
        </div>

      </div>
    </div>

    <div data-aos="fade-up" class="mb-2"> <h2 class="text-2xl font-bold mb-2">About this Ebook</h2>
      <p class="text-zinc-300 leading-relaxed">Mera Kanha: Ek Antaryatra is written to express, not impress. By Aarohi Pandey, this ebook feels like a quiet, emotional conversation with Kanha. Simple words carry deep devotion and inner reflections. Along with the ebook, readers get an explainer video and a podcast-style audio, making the experience more personal. This book is for those seeking calm, connection, and inner silence.</p>
    </div>

    <div data-aos="fade-up" class="py-2 premium-list-container">
    <h3 class="text-lg font-bold text-white mb-6">Everything Included:</h3>
    
    <div class="premium-list-item">
        <div class="bundle-icon-wrap">
            <i data-lucide="book" class="h-5 w-5 text-fuchsia-400"></i>
        </div>
        <span class="feature-text"><strong>E-BOOK (pdf)</strong></span>
    </div>

    <div class="premium-list-item">
        <div class="bundle-icon-wrap">
            <i data-lucide="book-open" class="h-5 w-5 text-blue-400"></i>
        </div>
        <span class="feature-text"><strong>INTERACTIVE 3D FLIPBOOK</strong></span>
    </div>

    <div class="premium-list-item">
        <div class="bundle-icon-wrap">
            <i data-lucide="video" class="h-5 w-5 text-emerald-400"></i>
        </div>
        <span class="feature-text"><strong>HD EXPLAINER VIDEO</strong></span>
    </div>

    <div class="premium-list-item">
        <div class="bundle-icon-wrap">
            <i data-lucide="headphones" class="h-5 w-5 text-indigo-400"></i>
        </div>
        <span class="feature-text"><strong>HIGH-QUALITY PODCAST AUDIO</strong></span>
    </div>

    <div class="premium-list-item">
        <div class="bundle-icon-wrap">
            <i data-lucide="languages" class="h-5 w-5 text-amber-400"></i>
        </div>
        <span class="feature-text"><strong>ENGLISH HINDI MIX LANGUAGE</strong></span>
    </div>             
</div>
  </div>

    <div data-aos="fade-up" class="py-4"> <h2 class="text-2xl font-bold mb-4">Q&A</h2>
      <div class="divide-y divide-white/10 rounded-xl border border-white/10 bg-white/5">
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">Who should read this ebook?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">This ebook is for anyone who feels connected to Krishna, spirituality, or inner self-reflection, regardless of age.</p></div></details>
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">Is this a religious book or a personal journey?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">It is a personal spiritual journey, written in simple words, not a religious textbook.</p></div></details>
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">Will there be a Part 2?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">Many readers are already asking for it. The journey is open, and more may come.</p></div></details>
      </div>
    </div>


    <div id="feedbacks" data-aos="fade-up" class="py-8"> <h2 class="text-2xl font-bold mb-1">What our readers say</h2>
      <p class="mb-4 text-sm text-zinc-400">These are the most repeated points readers mentioned.</p>
      <div class="space-y-3" id="feedback-list">
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #f59e0b, #f97316);">A</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Amit singh</div><div class="user-location">India</div></div></div><div class="feedback-date">Jan 2026</div></div><div class="feedback-text">Aarohi Pandey, the way you've written this feels pure and honest. You should definitely write more books</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">R</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Rohit Dubey</div><div class="user-location">India</div></div></div><div class="feedback-date">Jan 2026</div></div><div class="feedback-text">This didn't feel like reading it felt like listening to someone's heart. Waiting for Part 2 already</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 empty"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #ef4444, #dc2626);">S</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Saurabh Tiwari</div><div class="user-location">India</div></div></div><div class="feedback-date">Jan 2026</div></div><div class="feedback-text">Very calm and emotional arohi you have a beautiful way of expressing devotion</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">A</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Ankit Mishra</div><div class="user-location">India</div></div></div><div class="feedback-date">Jan 2026</div></div><div class="feedback-text">Simple words deep feelings you'll go very far with writing like this</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #10b981, #059669);">V</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Vivek S.</div><div class="user-location">India</div></div></div><div class="feedback-date">Jan 2026</div></div><div class="feedback-text">It takes courage to write from within aarohi pandey please keep writing</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i></div></div></div></div>
      </div>
      <button id="showMore" class="mt-4 inline-block rounded-xl border border-white/10 bg-white/10 px-4 py-2 text-sm text-white hover:bg-white/20 transition" onclick="toggleFeedbacks()">Show More</button>
    </div>
  </section>

  <div id="planSelectionModal" class="modal">
    <div class="modal-content animate-modalFadeIn">
        <button onclick="closePlanSelectionModal()" class="absolute top-4 right-4 text-zinc-400 hover:text-white z-50 p-2 bg-black/40 rounded-full"><i data-lucide="x" class="h-5 w-5"></i></button>
        
        <div class="plan-header">
            <h2 class="text-2xl font-bold text-white">Choose Your Journey</h2>
            <p class="text-zinc-400 text-sm mt-1">Select the best plan for your spiritual needs.</p>
        </div>
        
        <div class="plan-grid">
            <div class="plan-card">
                <span class="plan-name">Basic</span>
                <div class="plan-price"><span class="plan-currency"></span>119</div>
                
                <ul class="plan-features">
                    <li class="plan-feature-item"><i data-lucide="check" class="feature-icon icon-check"></i> eBook PDF</li>
                    <li class="plan-feature-item excluded"><i data-lucide="x" class="feature-icon icon-cross"></i> Audio Podcast</li>
                    <li class="plan-feature-item excluded"><i data-lucide="x" class="feature-icon icon-cross"></i> Explainer Video</li>
                    <li class="plan-feature-item excluded"><i data-lucide="x" class="feature-icon icon-cross"></i> 3D Flipbook</li>
                    <li class="plan-feature-item excluded"><i data-lucide="x" class="feature-icon icon-cross"></i> Zip File</li>
                </ul>
                
                <button onclick="initiatePlanPayment('BASIC')" class="plan-btn btn-basic">Select Basic</button>
            </div>
            
            <div class="plan-card standard">
                <span class="plan-badge badge-standard"></span>
                <span class="plan-name text-fuchsia-400">Standard</span>
                <div class="plan-price"><span class="plan-currency"></span>209</div>
                
                <ul class="plan-features">
                    <li class="plan-feature-item"><i data-lucide="check" class="feature-icon icon-check"></i> eBook PDF</li>
                    <li class="plan-feature-item"><i data-lucide="check" class="feature-icon icon-check"></i> Audio Podcast</li>
                    <li class="plan-feature-item excluded"><i data-lucide="x" class="feature-icon icon-cross"></i> Explainer Video</li>
                    <li class="plan-feature-item excluded"><i data-lucide="x" class="feature-icon icon-cross"></i> 3D Flipbook</li>
                    <li class="plan-feature-item excluded"><i data-lucide="x" class="feature-icon icon-cross"></i> Zip File</li>
                </ul>
                
                <button onclick="initiatePlanPayment('STANDARD')" class="plan-btn btn-standard">Select Standard</button>
            </div>
            
            <div class="plan-card premium">
                <div class="premium-shine-effect"></div>
                <span class="plan-badge badge-premium"></span>
                <span class="plan-name text-amber-400">Premium</span>
                <div class="plan-price"><span class="plan-currency"></span>499</div>
                
                <ul class="plan-features">
                    <li class="plan-feature-item"><i data-lucide="check" class="feature-icon icon-check"></i> eBook PDF</li>
                    <li class="plan-feature-item"><i data-lucide="check" class="feature-icon icon-check"></i> Audio Podcast</li>
                    <li class="plan-feature-item"><i data-lucide="check" class="feature-icon icon-check"></i> Explainer Video</li>
                    <li class="plan-feature-item"><i data-lucide="check" class="feature-icon icon-check"></i> 3D Flipbook</li>
                    <li class="plan-feature-item"><i data-lucide="check" class="feature-icon icon-check"></i> Zip File</li>
                </ul>
                
                <button onclick="initiatePlanPayment('PREMIUM')" class="plan-btn btn-premium">Get Full Access</button>
            </div>
        </div>
    </div>
  </div>

  <div id="zipConfirmationModal" class="modal" style="display: none;">
      <div id="zipModalContent" class="modal-content animate-modalFadeIn" style="max-width: 380px; width: 90%; background-color: #0f172a; color: #e2e8f0; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.15); box-shadow: 0 0 40px rgba(168,85,247,0.3); opacity: 1; transform: none; display: flex; flex-direction: column; align-items: center;">
          <div id="zipCheckStep" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
              <h3 class="text-xl font-bold mb-4 text-indigo-300 text-center flex items-center justify-center gap-2"><i data-lucide="shield-check" class="h-6 w-6 text-emerald-400"></i> ZIP Compatibility Check</h3>
              <p class="text-base font-semibold text-zinc-300 text-center mb-5 leading-relaxed">Can your device open <span class="text-yellow-400">.ZIP files</span>?</p>
              
              <div class="bg-white/5 border border-white/10 rounded-xl p-4 mb-5 text-left w-full">
                  <p class="text-xs font-bold text-zinc-500 uppercase tracking-widest mb-3">IF NO, FOLLOW THESE 3 STEPS:</p>
                  <div class="space-y-3">
                      <div class="flex items-start gap-3">
                          <div class="mt-0.5 min-w-[18px]"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-500"></i></div>
                          <p class="text-sm text-zinc-300 leading-snug">Open your <strong class="text-white">Play Store / App Store</strong>.</p>
                      </div>
                      <div class="flex items-start gap-3">
                          <div class="mt-0.5 min-w-[18px]"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-500"></i></div>
                          <p class="text-sm text-zinc-300 leading-snug">Search and install ZArchiver or <strong class="text-white">Files by Google</strong>.</p>
                      </div>
                      <div class="flex items-start gap-3">
                          <div class="mt-0.5 min-w-[18px]"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-500"></i></div>
                          <p class="text-sm text-zinc-300 leading-snug">Return here and click the button below.</p>
                      </div>
                  </div>
              </div>

              <button id="understandZipBtn" onclick="handleZipUnderstand()" class="no-shine-button w-full text-sm py-3 px-4" style="background-image: linear-gradient(135deg, #10b981, #059669); box-shadow: 0 4px 15px rgba(16,185,129,0.4); margin: 0; width: 100%;">I Understand</button>
          </div>

          <div id="zipChoiceStep" style="display: none; width: 100%; flex-direction: column; align-items: center; animation: modalFadeIn 0.3s ease-out forwards;">
              <h3 class="text-lg font-bold mb-6 text-white text-center">Select an Action</h3>
              
              <div class="action-card" onclick="handleZipDownloadNow()">
                  <div class="action-icon text-fuchsia-400"><i data-lucide="download" class="h-6 w-6"></i></div>
                  <div class="action-text">
                      <h4>Download Full ZIP Now</h4>
                      <p>Save all content offline instantly.</p>
                  </div>
                  <i data-lucide="chevron-right" class="h-5 w-5 text-zinc-500 ml-auto"></i>
              </div>

              <div class="action-card" onclick="handleZipDownloadLater()">
                  <div class="action-icon text-indigo-400"><i data-lucide="layout-dashboard" class="h-6 w-6"></i></div>
                  <div class="action-text">
                      <h4>Open Dashboard</h4>
                      <p>Watch online & download later.</p>
                  </div>
                  <i data-lucide="chevron-right" class="h-5 w-5 text-zinc-500 ml-auto"></i>
              </div>
          </div>
      </div>
  </div>

  <div id="demoFlipbookModal" class="modal">
      <div class="modal-content animate-modalFadeIn" style="max-width: 95%; max-height: 90vh; padding: 0; background: #0f172a; width: 95%;">
          <div class="viewer-header">
              <h3 class="text-lg font-bold text-white flex items-center gap-2">
                  <i data-lucide="book-open" class="h-5 w-5 text-emerald-400"></i>
                  Demo Flipbook Preview
              </h3>
              <button onclick="closeDemoFlipbookModal()" class="text-zinc-400 hover:text-white hover:bg-white/10 p-2 rounded-full transition">
                  <i data-lucide="x" class="h-5 w-5"></i>
              </button>
          </div>
          <div class="flipbook-container" style="height: calc(90vh - 60px);">
              <iframe id="demoFlipbookFrame" class="flipbook-iframe" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
          </div>
      </div>
  </div>

  <div id="feedbackModal" class="modal">
    <div class="modal-content" id="feedbackModalContent" style="max-width: 400px; padding: 30px; background-color: #1e293b; color: #e2e8f0; border: 1px solid rgba(255, 255, 255, 0.1);">
        <h2 class="text-xl font-bold mb-2 text-indigo-400 text-center">Tell us what you think!</h2>
        <div id="feedbackForm">
            <textarea id="feedbackTextarea" rows="4" placeholder="Type your honest feedback here (Required)..." class="feedback-textarea w-full p-3 border border-white/20 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm text-white bg-transparent transition duration-300"></textarea>
            <div class="flex flex-col gap-3 mt-4">
                <button id="submitFeedbackBtn" class="no-shine-button w-full" style="background-image: linear-gradient(135deg, #6366f1, #a855f7); margin-top: 0px;" onclick="submitFeedback()"><i data-lucide="send" class="h-5 w-5"></i><span id="submitFeedbackText">Submit Feedback</span></button>
                <button id="noThanksBtn" class="w-full text-sm font-semibold text-zinc-400 hover:text-white transition" onclick="closeFeedbackModal(true)">No Thanks, take me back</button>
            </div>
        </div>
        <div id="feedbackSuccess" class="text-center py-8 hidden">
            <i data-lucide="check-circle" class="h-10 w-10 text-emerald-400 mx-auto mb-4 text-emerald-500 filter drop-shadow-md"></i><h3 class="text-xl font-bold text-emerald-400">Thanks for your feedback!</h3>
        </div>
    </div>
  </div>

  <div id="paymentModal" class="modal">
    <div class="modal-content" id="paymentModalContent" style="max-width: 500px; padding: 0; background-color: #111817;">
        <button id="paymentModalCloseButton" onclick="openConfirmationModal()" style="position: absolute; top: 12px; right: 12px; z-index: 2020;"><i data-lucide="x" class="h-6 w-6 text-zinc-400 hover:text-white"></i></button>
        <div id="paymentContainer" style="width: 100%; height: 550px; position: relative;">
            <div id="topShield" class="invisible-shield" style="top: 0; height: 70px;"></div>
            <div id="bottomShield" class="invisible-shield inactive" style="bottom: 0; height: 120px;"></div>
            <div id="paymentLoader" style="position: absolute; inset: 0; background-color: #111817; display: none; align-items: center; justify-content: center; flex-direction: column; z-index: 20;">
                <div class="jumping-loader"><span class="ball"></span><span class="ball"></span><span class="ball"></span></div>
                <p class="mt-8 text-lg font-semibold text-indigo-400">Processing Secure Payment...</p>
            </div>
            <iframe id="cashfreeIframe" src="" frameborder="0" width="100%" height="100%" style="border-radius: 12px; display: none;" sandbox="allow-forms allow-scripts allow-modals allow-popups allow-same-origin allow-top-navigation"></iframe>
        </div>
        <p class="text-xs text-zinc-500 text-center py-2">Powered by Cashfree Payments</p>
    </div>
  </div>

  <div id="confirmationModal">
    <div id="confirmationContent">
        <div class="mb-4"><i data-lucide="alert-triangle" class="h-8 w-8 text-red-400 mx-auto mb-2"></i><p class="conf-text-glow text-lg">Are you sure to exit payment?</p></div>
        <p class="text-sm text-zinc-300 mb-6">Exiting now may cancel your transaction. Your payment information is secure.</p>
        <div class="flex flex-col gap-3">
            <button id="cancelExitBtn" class="download-button w-full" style="background-image: linear-gradient(135deg, #ef4444, #dc2626); margin-top: 0px;" onclick="confirmExitPayment(false)"><i data-lucide="check" class="h-5 w-5"></i>No, Continue Payment</button>
            <button id="confirmExitBtn" class="w-full text-sm font-semibold text-zinc-400 hover:text-white transition" onclick="confirmExitPayment(true)">Yes, Exit Payment</button>
        </div>
    </div>
  </div>

  <div id="productViewerModal" class="modal">
      <div id="productViewerContent" class="modal-content animate-modalFadeIn">
          <div class="viewer-header">
              <h3 class="text-lg font-bold text-white flex items-center gap-2">
                <i data-lucide="package-open" class="h-5 w-5 text-emerald-400"></i> 
                <span id="dashboardTitle">Library</span>
                <span id="planBadge" class="hidden text-xs px-2 py-1 rounded bg-indigo-500/20 text-indigo-300 font-bold border border-indigo-500/30 uppercase tracking-wider ml-2"></span>
              </h3>
              <div class="flex items-center gap-2">
                  <button id="zipDownloadBtn" onclick="handleDownloadBundleClick()" class="hidden flex items-center gap-2 text-zinc-400 hover:text-white transition p-2 rounded-lg border border-white/10 hover:border-white/30 bg-white/5">
                      <i data-lucide="download" class="h-4 w-4"></i>
                      <span class="text-xs font-medium uppercase tracking-wider hidden sm:inline">Download ZIP</span>
                  </button>
                  <button onclick="closeViewerModal()" class="text-zinc-400 hover:text-white hover:bg-white/10 p-2 rounded-full transition">
                      <i data-lucide="x" class="h-5 w-5"></i>
                  </button>
              </div>
          </div>
          <div class="viewer-body">
              <div class="viewer-sidebar">
                  <div id="tab-video" class="viewer-tab" onclick="switchViewerTab('video')"><i data-lucide="play-circle" class="h-4 w-4"></i> Video </div>
                  <div id="tab-audio" class="viewer-tab" onclick="switchViewerTab('audio')"><i data-lucide="headphones" class="h-4 w-4"></i> Audio Podcast</div>
                  <div id="tab-pdf" class="viewer-tab active" onclick="switchViewerTab('pdf')"><i data-lucide="file-text" class="h-4 w-4"></i> eBook PDF</div>
                  <div id="tab-flipbook" class="viewer-tab" onclick="switchViewerTab('flipbook')"><i data-lucide="book-open" class="h-4 w-4"></i> Flipbook</div>
                  <div id="tab-image" class="viewer-tab" onclick="switchViewerTab('image')"><i data-lucide="image" class="h-4 w-4"></i> Mind Map</div>
              </div>
              <div class="viewer-main">
                  <div id="view-video" class="viewer-section">
                      <button id="btn-dl-video" class="viewer-download-btn"><i data-lucide="download" class="h-4 w-4"></i></button>
                      <div class="w-full h-full flex flex-col items-center justify-content: center; p-4">
                          <video id="videoSource" controls class="w-full h-auto max-h-[60vh] rounded-lg shadow-2xl border border-zinc-800"><source src="" type="video/mp4"></video>
                      </div>
                  </div>
                  <div id="view-audio" class="viewer-section">
                      <button id="btn-dl-audio" class="viewer-download-btn"><i data-lucide="download" class="h-4 w-4"></i></button>
                      <div class="audio-player-card">
                          <div class="w-24 h-24 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-glow"><i data-lucide="mic" class="h-10 w-10 text-white"></i></div>
                          <audio id="audioSource" controls class="w-full mb-4"><source src="" type="audio/mpeg"></audio>
                      </div>
                  </div>
                  <div id="view-pdf" class="viewer-section active">
                      <button id="btn-dl-pdf" class="viewer-download-btn"><i data-lucide="download" class="h-4 w-4"></i></button>
                      <div class="pdf-container">
                          <iframe id="pdfFrame" src="" width="100%" height="100%" style="border:none;"></iframe>
                      </div>
                  </div>
                  <div id="view-flipbook" class="viewer-section">
                      <button id="btn-dl-flipbook" class=""><i data-lucide="" class="h-4 w-4"></i></button>
                      <div class="flipbook-container">
                          <iframe id="flipbookFrame" class="flipbook-iframe" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
                      </div>
                  </div>
                  <div id="view-image" class="viewer-section" style="overflow: hidden;">
                      <button id="btn-dl-image" class="viewer-download-btn"><i data-lucide="download" class="h-4 w-4"></i></button>
                      <div id="mindmapContainer" class="mindmap-container"><img id="imageSource" src="" class="mindmap-img" alt="Mind Map"></div>
                      <div class="absolute bottom-4 right-4 flex gap-2 bg-black/50 p-2 rounded-lg backdrop-blur-sm">
                          <button onclick="zoomMindmap(0.1)" class="p-2 bg-white/10 hover:bg-white/20 rounded text-white"><i data-lucide="plus" class="h-4 w-4"></i></button>
                          <button onclick="zoomMindmap(-0.1)" class="p-2 bg-white/10 hover:bg-white/20 rounded text-white"><i data-lucide="minus" class="h-4 w-4"></i></button>
                          <button onclick="resetMindmap()" class="p-2 bg-white/10 hover:bg-white/20 rounded text-white"><i data-lucide="refresh-ccw" class="h-4 w-4"></i></button>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <footer class="mt-12 border-t border-white/10 py-8 text-center text-sm text-zinc-400"> <span id="year"></span> BookMintor. All rights reserved.</footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDMu6fFPEJRKhxWBDhh27HcMSqMkxmCXEE",
      authDomain: "kanhajibook.firebaseapp.com",
      databaseURL: "https://kanhajibook-default-rtdb.firebaseio.com", 
      projectId: "kanhajibook",
      storageBucket: "kanhajibook.firebasestorage.app",
      messagingSenderId: "883158985851",
      appId: "1:883158985851:web:321ad4bd21a695628dc6de",
      measurementId: "G-G2FQ7Y704R"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const heartRef = ref(db, 'reactions/hearts');

    const BASE_HEART_COUNT = 400; 

    onValue(heartRef, (snapshot) => {
        const dbValue = snapshot.val() || 0;
        const totalCount = BASE_HEART_COUNT + dbValue;
        const countElement = document.getElementById('live-heart-count');
        if (countElement) countElement.innerText = totalCount;
    });

    window.toggleReactionMenu = function() {
        const menu = document.getElementById('reactionMenu');
        if (menu) menu.classList.toggle('hidden');
    };

    window.sendReaction = async function(emoji) {
        const storageKey = 'reacted_In_search_of_my_kanha_ji-893dsd3cjdf';
        
        if (localStorage.getItem(storageKey)) {
            showToast("You've already shared your love ", true);
            window.toggleReactionMenu();
            return;
        }

        try {
            const result = await runTransaction(heartRef, (currentValue) => {
                return (currentValue || 0) + 1;
            });
            
            if (result.committed) {
                localStorage.setItem(storageKey, 'true');
                const loveIcon = document.getElementById('loveIcon');
                if (loveIcon) {
                    loveIcon.classList.add('fill-current');
                }
                
                confetti({ 
                    particleCount: 50, 
                    spread: 40, 
                    origin: { y: 0.8 }, 
                    colors: ['#ef4444', '#ffffff'],
                    zIndex: 1000
                });
                showToast(`Shared ${emoji}! Thanks for the love.`, true);
                window.toggleReactionMenu();
            }
        } catch (err) {
            console.error("Firebase Transaction Error: ", err);
            showToast("Something went wrong, try again.", false);
        }
    };
  </script>

  <script>
    const productConfig = { showVideo: true, showAudio: true, showPdf: true, showMindmap: false, showFlipbook: true };
    const SOURCE_IMAGE = 'https://bookmintor.shop/aarohibook/arrohi_book_cover.png';
    const PRODUCT_UNIQUE_ID = 'In_search_of_my_kanha_ji-54070568fs3cjdf';
    
    /* 3 TIER PRICING LINKS */
    const link119 = "https://payments.cashfree.com/forms/basic_plan_119";
    const link209 = "https://payments.cashfree.com/forms/standard_plan_209";
    const link499 = "https://payments.cashfree.com/forms/premium_plan_499";
    
    let currentPaymentUrl = link209; 
    let selectedPlanForPayment = 'STANDARD';

    const SECRET_KEY = 'EBOOK_SECRET_K3Y_AAROHSD368NDSVF';
    const ZIP_URLS = { HINDI: "#", ENGLISH: "https://github.com/cortex-cradle/ebook1/releases/download/aarohi's_book1/In.Search.of.My.Kanha.Ji.zip" };
    const CONTENT_URLS = {
        HINDI: { 
            VIDEO: "3", 
            AUDIO: "3", 
            PDF: "3", 
            MINDMAP: "#", 
            ZIP: ZIP_URLS.HINDI,
            FLIPBOOK: "https://flipbookpdf.net/web/site/full-premium-content-hindi.pdf.html"
        },
        ENGLISH: { 
            VIDEO: "https://bookmintor.shop/aarohibook/%E0%A4%AE%E0%A5%87%E0%A4%B0%E0%A5%87_%E0%A4%95%E0%A4%BE%E0%A4%A8%E0%A5%8D%E0%A4%B9%E0%A4%BE_%E0%A4%9C%E0%A5%80_%E0%A4%95%E0%A5%80_%E0%A4%96%E0%A5%8B%E0%A4%9C_%E0%A4%AE%E0%A5%87%E0%A4%82%20exp%20(1).mp4", 
            AUDIO: "https://bookmintor.shop/aarohibook/%E0%A4%95%E0%A4%BE%E0%A4%A8%E0%A5%8D%E0%A4%B9%E0%A4%BE_%E0%A4%9C%E0%A5%80_%E0%A4%95%E0%A5%80_%E0%A4%96%E0%A5%8B%E0%A4%9C_%E0%A4%AE%E0%A5%87%E0%A4%82_%E0%A4%AE%E0%A5%8C%E0%A4%A8_%E0%A4%B8%E0%A4%AE%E0%A4%B0%E0%A5%8D%E0%A4%AA%E0%A4%A3.m4a", 
            PDF: "https://bookmintor.shop/aarohibook/Mera_Kanha_Ek_Antaryatra-compressed.pdf", 
            MINDMAP: "#", 
            ZIP: ZIP_URLS.ENGLISH,
            FLIPBOOK: "https://bookmintor.shop/read"
        }
    };
    const SCREENSHOT_URLS = ['https://bookmintor.shop/aarohibook/ss1.png', 'https://bookmintor.shop/aarohibook/ss2.png', 'https://bookmintor.shop/aarohibook/ss3.png'];
    const DEMO_FLIPBOOK_URL = "https://bookmintor.shop/read_demo";
    
    const dom = {
        cover: document.getElementById('coverFace'),
        coverImg: document.getElementById('coverImg'),
        coverShine: document.getElementById('coverShine'),
        loadingSpin: document.getElementById('loadingSpin'),
        previewOverlay: document.getElementById('previewOverlay'),
        previewScreenshot: document.getElementById('previewScreenshot'),
        previewShine: document.getElementById('previewShine'),
        imageCounter: document.getElementById('imageCounter'),
        zipConfirmationModal: document.getElementById('zipConfirmationModal'),
        toastNotification: document.getElementById('toastNotification'),
        toastMessage: document.getElementById('toastMessage'),
        buyBtn: document.getElementById('buyBtn'),
        unlockBtn: document.getElementById('unlockBtn'),
        unlockContainer: document.getElementById('unlockContainer'),
        actionContainer: document.getElementById('actionContainer'),
        productViewerModal: document.getElementById('productViewerModal'),
        productViewerContent: document.getElementById('productViewerContent'),
        dashboardTitle: document.getElementById('dashboardTitle'),
        videoSource: document.getElementById('videoSource'),
        audioSource: document.getElementById('audioSource'),
        imageSource: document.getElementById('imageSource'),
        pdfFrame: document.getElementById('pdfFrame'),
        flipbookFrame: document.getElementById('flipbookFrame'),
        bottomShield: document.getElementById('bottomShield'),
        tapPrompt: document.getElementById('tapPrompt'),
        mysteryBoxWrap: document.getElementById('mysteryBoxWrap'),
        mysteryTooltip: document.getElementById('mysteryTooltip'),
        feedbackModal: document.getElementById('feedbackModal'),
        coverBlackOverlay: document.getElementById('coverBlackOverlay'),
        profileShineOverlay: document.getElementById('profileShineOverlay'),
        quickActionsBtn: document.getElementById('quickActionsBtn'),
        cuteQuickMenu: document.getElementById('cuteQuickMenu'),
        loveIcon: document.getElementById('loveIcon'),
        loveIconWrapper: document.getElementById('loveIconWrapper'),
        premiumLoadingOverlay: document.getElementById('premiumLoadingOverlay'),
        demoFlipbookModal: document.getElementById('demoFlipbookModal'),
        demoFlipbookFrame: document.getElementById('demoFlipbookFrame'),
        coverBlurOverlay: document.getElementById('coverBlurOverlay'),
        mobileStickyBar: document.getElementById('mobileStickyBar'),
        planSelectionModal: document.getElementById('planSelectionModal'),
        planBadge: document.getElementById('planBadge'),
        zipDownloadBtn: document.getElementById('zipDownloadBtn')
    };

    let currentContentLanguage = 'ENGLISH'; // Default
    let scale = 1, panning = false, pointX = 0, pointY = 0, startX = 0, startY = 0;
    const mmContainer = document.getElementById('mindmapContainer');
    const mmImg = document.getElementById('imageSource');

    // Mindmap interaction handlers
    if (mmContainer && mmImg) {
        mmContainer.onmousedown = function (e) { e.preventDefault(); startX = e.clientX - pointX; startY = e.clientY - pointY; panning = true; }
        mmContainer.onmouseup = function (e) { panning = false; }
        mmContainer.onmousemove = function (e) { e.preventDefault(); if (!panning) return; pointX = e.clientX - startX; pointY = e.clientY - startY; mmImg.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`; }
        
        // Touch support for mobile
        mmContainer.ontouchstart = function (e) { 
            e.preventDefault(); 
            const touch = e.touches[0];
            startX = touch.clientX - pointX; 
            startY = touch.clientY - pointY; 
            panning = true; 
        }
        mmContainer.ontouchend = function (e) { panning = false; }
        mmContainer.ontouchmove = function (e) { 
            e.preventDefault(); 
            if (!panning) return; 
            const touch = e.touches[0];
            pointX = touch.clientX - startX; 
            pointY = touch.clientY - startY; 
            mmImg.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`; 
        }
    }
    
    function zoomMindmap(factor) { 
        scale += factor; 
        if(scale < 0.1) scale = 0.1; 
        if (mmImg) mmImg.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`; 
    }
    
    function resetMindmap() { 
        scale = 1; 
        pointX = 0; 
        pointY = 0; 
        if (mmImg) mmImg.style.transform = `translate(0px, 0px) scale(1)`; 
    }

    let isMenuOpen = false;

    function handleQuickActionsClick(e) {
        if (e) {
            e.stopPropagation(); 
            e.preventDefault();
        }
        isMenuOpen = !isMenuOpen;
        const menu = document.getElementById('cuteQuickMenu');
        const btn = document.getElementById('quickActionsBtn');
        const blur = document.getElementById('coverBlurOverlay');
        
        if (isMenuOpen) {
            menu.classList.add('active');
            btn.classList.add('active');
            blur.classList.add('active');
        } else {
            closeCuteMenu();
        }
    }

    function closeCuteMenu() {
        const menu = document.getElementById('cuteQuickMenu');
        const btn = document.getElementById('quickActionsBtn');
        const blur = document.getElementById('coverBlurOverlay');
        
        if (menu) menu.classList.remove('active');
        if (btn) btn.classList.remove('active');
        if (blur) blur.classList.remove('active');
        isMenuOpen = false;
    }

    function handleCuteMenuItemClick(type, e) {
        if (e) {
            e.stopPropagation(); 
            e.preventDefault();
        }
        closeCuteMenu();
        
        switch(type) {
            case 'love':
                const storageKey = 'reacted_In_search_of_my_kanha_ji-893dsd3cjdf';
                if (localStorage.getItem(storageKey)) {
                    showToast("You've already shared your love! ", true);
                } else {
                    toggleReactionMenu();
                }
                break;
            case 'why':
                openWhyBookModal();
                break;
            case 'support':
                window.location.href = "mailto:support@bookmintor.shop";
                break;
            case 'demo':
                triggerPremiumLoadingSequence('demo');
                break;
        }
    }

    function openWhyBookModal() {
        const modal = document.getElementById('whyBookModal');
        if (modal) {
            modal.style.display = 'flex';
            const modalContent = modal.querySelector('.modal-content');
            if (modalContent) {
                modalContent.classList.add('animate-modalFadeIn');
            }
            lucide.createIcons();
        }
    }

    function closeWhyBookModal() {
        const modal = document.getElementById('whyBookModal');
        if (modal) {
            modal.style.display = 'none';
        }
    }

    function triggerPremiumLoadingSequence(type) {
        if (dom.premiumLoadingOverlay) {
            dom.premiumLoadingOverlay.classList.add('active');
        }
        
        const texts = ['loadingText1', 'loadingText2', 'loadingText3', 'loadingText4', 'loadingText5', 'loadingText6'];
        texts.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                el.classList.remove('active');
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
            }
        });
        
        let currentIndex = 0;
        const textInterval = setInterval(() => {
            if (currentIndex > 0) {
                const prevEl = document.getElementById(texts[currentIndex - 1]);
                if (prevEl) {
                    prevEl.classList.remove('active');
                    prevEl.style.opacity = '0';
                    prevEl.style.transform = 'translateY(-20px)';
                }
            }
            
            const currentEl = document.getElementById(texts[currentIndex]);
            if (currentEl) {
                currentEl.classList.add('active');
                currentEl.style.opacity = '1';
                currentEl.style.transform = 'translateY(0)';
            }
            
            currentIndex++;
            
            if (currentIndex >= texts.length) {
                clearInterval(textInterval);
                setTimeout(() => {
                    if (dom.premiumLoadingOverlay) {
                        dom.premiumLoadingOverlay.classList.remove('active');
                    }
                    if (type === 'demo') {
                        openDemoFlipbookModal();
                    }
                }, 800);
            }
        }, 600);
    }

    function openDemoFlipbookModal() {
        if (dom.demoFlipbookFrame) {
            dom.demoFlipbookFrame.src = DEMO_FLIPBOOK_URL;
        }
        if (dom.demoFlipbookModal) {
            dom.demoFlipbookModal.style.display = 'flex';
            const modalContent = dom.demoFlipbookModal.querySelector('.modal-content');
            if (modalContent) {
                modalContent.classList.add('animate-modalFadeIn');
            }
            lucide.createIcons();
        }
    }

    function closeDemoFlipbookModal() {
        if (dom.demoFlipbookModal) {
            dom.demoFlipbookModal.style.display = 'none';
            if (dom.demoFlipbookFrame) {
                dom.demoFlipbookFrame.src = '';
            }
        }
    }

    /* MOBILE STICKY BAR */
    let stickyBarVisible = false;
    let lastScrollPosition = 0;

    function handleScrollForStickyBar() {
        if (window.innerWidth > 640) return; 
        
        const currentScroll = window.pageYOffset;
        const scrollThreshold = 300;
        
        if (currentScroll > scrollThreshold && currentScroll > lastScrollPosition) {
            if (!stickyBarVisible) {
                dom.mobileStickyBar.classList.add('show');
                stickyBarVisible = true;
            }
        } else if (currentScroll < scrollThreshold || currentScroll < lastScrollPosition) {
            if (stickyBarVisible) {
                dom.mobileStickyBar.classList.remove('show');
                stickyBarVisible = false;
            }
        }
        lastScrollPosition = currentScroll;
    }

    function setUnlockedState(status) {
        if (dom.unlockContainer) {
            dom.unlockContainer.style.display = 'inline-flex'; 
        }
        if (dom.unlockBtn) {
            dom.unlockBtn.setAttribute('data-unlocked', status); 
        }
        if (dom.unlockContainer) {
            dom.unlockContainer.classList.add('snake-active');
        }
        if (dom.actionContainer) {
            dom.actionContainer.classList.add('stacked'); 
        }
        const ctaShine = dom.buyBtn ? dom.buyBtn.querySelector('.cta-shine') : null;
        if (ctaShine) { 
            ctaShine.style.display = 'none'; 
            ctaShine.style.animation = 'none'; 
        }
        const unlockShine = dom.unlockBtn ? dom.unlockBtn.querySelector('.btn-shine') : null;
        if(unlockShine) { 
            unlockShine.style.display = 'block'; 
            unlockShine.style.animation = 'blackShine 4s ease-in-out infinite'; 
        }
        if(dom.mysteryBoxWrap) dom.mysteryBoxWrap.style.display = 'none';
    }

    function toggleFeedbacks() {
        const hiddenItems = document.querySelectorAll('.extra-feedback');
        const btn = document.getElementById('showMore');
        if(!hiddenItems.length || !btn) return;
        const isHidden = window.getComputedStyle(hiddenItems[0]).display === 'none';
        if (isHidden) { 
            hiddenItems.forEach(item => { 
                item.style.display = 'flex'; 
                item.classList.add('animate-slideUp'); 
            }); 
            btn.textContent = 'Show Less'; 
        } else { 
            hiddenItems.forEach(item => { 
                item.style.display = 'none'; 
                item.classList.remove('animate-slideUp'); 
            }); 
            btn.textContent = 'Show More'; 
            document.getElementById('feedbacks').scrollIntoView({behavior: 'smooth', block: 'start'}); 
        }
    }

    function toggleMysteryTooltip(e) {
      if(e) e.stopPropagation();
      const tip = dom.mysteryTooltip;
      const isVisible = tip.style.opacity === '1';
      tip.style.opacity = isVisible ? '0' : '1';
      tip.style.scale = isVisible ? '0.95' : '1';
      tip.style.pointerEvents = isVisible ? 'none' : 'auto';
      if(!isVisible) { setTimeout(() => { tip.style.opacity = '0'; tip.style.scale = '0.95'; tip.style.pointerEvents = 'none'; }, 5000); }
    }

    function openCreatorProfile() { 
        const modal = document.getElementById('creatorProfileModal');
        if (modal) {
            modal.style.display = 'flex'; 
            modal.querySelector('.modal-content').classList.add('animate-modalFadeIn'); 
            lucide.createIcons(); 
        }
    }
    
    function closeCreatorProfile() { 
        const modal = document.getElementById('creatorProfileModal');
        if (modal) modal.style.display = 'none'; 
    }
    
    function openCommunityModal() { 
        const modal = document.getElementById('communityModal');
        if (modal) {
            modal.style.display = 'flex'; 
            modal.querySelector('.modal-content').classList.add('animate-modalFadeIn'); 
            lucide.createIcons(); 
        }
    }
    
    function closeCommunityModal() { 
        const modal = document.getElementById('communityModal');
        if (modal) modal.style.display = 'none'; 
    }

    function triggerProfileShine() {
        if (localStorage.getItem('profileShineTriggered') === 'true') return;
        const shineOverlay = dom.profileShineOverlay;
        if (!shineOverlay) return;
        shineOverlay.style.opacity = '1';
        shineOverlay.classList.add('active');
        setTimeout(() => {
            shineOverlay.style.opacity = '0';
            shineOverlay.classList.remove('active');
            localStorage.setItem('profileShineTriggered', 'true');
        }, 1200);
    }

    function showToast(msg, isSuccess = true) {
        if (!dom.toastMessage || !dom.toastNotification) return;
        
        dom.toastMessage.textContent = msg;
        const iconDiv = document.getElementById('toastIcon');
        
        if (isSuccess) { 
            dom.toastNotification.classList.remove('error'); 
            if (iconDiv) iconDiv.innerHTML = '<i data-lucide="check-circle" class="h-5 w-5 text-emerald-400"></i>'; 
        } else { 
            dom.toastNotification.classList.add('error'); 
            if (iconDiv) iconDiv.innerHTML = '<i data-lucide="alert-circle" class="h-5 w-5 text-red-400"></i>'; 
        }
        
        dom.toastNotification.classList.add('show'); 
        lucide.createIcons();
        
        setTimeout(() => {
            dom.toastNotification.classList.remove('show');
        }, 3000);
    }

    function switchViewerTab(tabId) {
        document.querySelectorAll('video, audio').forEach(v => v.pause());
        document.querySelectorAll('.viewer-sidebar .viewer-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.viewer-main .viewer-section').forEach(s => s.classList.remove('active'));
        
        const clickedTab = document.getElementById(`tab-${tabId}`);
        // FIXED: Only switch if tab exists and is not disabled
        if(clickedTab && !clickedTab.classList.contains('tab-disabled')) {
             clickedTab.classList.add('active');
             
             let targetSectionId = `view-${tabId}`;
             const section = document.getElementById(targetSectionId);
             if(section) section.classList.add('active');
             
             if (tabId === 'flipbook') {
                 const content = CONTENT_URLS[currentContentLanguage] || CONTENT_URLS.ENGLISH;
                 if (content.FLIPBOOK && dom.flipbookFrame) {
                     dom.flipbookFrame.src = content.FLIPBOOK;
                 }
             }
        }
    }

    async function handleDirectDownload(url, filename) {
        if (!url) return;
        showToast("Starting Download...", true);
        try {
            const response = await fetch(url); 
            const blob = await response.blob();
            const blobUrl = window.URL.createObjectURL(blob);
            const a = document.createElement('a'); 
            a.href = blobUrl; 
            a.download = filename || url.split('/').pop();
            document.body.appendChild(a); 
            a.click(); 
            window.URL.revokeObjectURL(blobUrl); 
            document.body.removeChild(a);
            showToast("Download Complete!", true);
        } catch (error) {
            console.error('Download error:', error);
            const a = document.createElement('a'); 
            a.href = url; 
            a.target = "_self"; 
            document.body.appendChild(a); 
            a.click(); 
            document.body.removeChild(a);
        }
    }

    // FIXED: Updated openViewerModal logic
    function openViewerModal() {
        const purchasedPlan = localStorage.getItem('purchased_plan_' + PRODUCT_UNIQUE_ID) || 'BASIC';
        const sidebar = document.querySelector('.viewer-sidebar');
        
        // Define allowed features per plan
        const features = {
            'BASIC': ['pdf'],
            'STANDARD': ['pdf', 'audio'],
            'PREMIUM': ['pdf', 'audio', 'video', 'flipbook', 'image']
        };
        const allowed = features[purchasedPlan] || features['BASIC'];
        
        // Helper to check permission
        const isAllowed = (type) => allowed.includes(type);

        // Map tabs for sorting and logic
        const tabMap = {
            'tab-pdf': 'pdf',
            'tab-audio': 'audio',
            'tab-video': 'video',
            'tab-flipbook': 'flipbook',
            'tab-image': 'image'
        };
        const tabOrderPriority = ['pdf', 'audio', 'video', 'flipbook', 'image'];

        // 1. Process visual state (Enabled vs Disabled)
        const tabs = Array.from(sidebar.children);
        tabs.forEach(tab => {
            const type = tabMap[tab.id];
            if(type) {
                tab.classList.remove('active');
                tab.style.display = 'flex'; // Ensure visible
                
                if(isAllowed(type)) {
                    tab.classList.remove('tab-disabled');
                } else {
                    tab.classList.add('tab-disabled');
                }
            }
        });

        // 2. Sort tabs: Enabled first, then by priority
        tabs.sort((a, b) => {
            const aDis = a.classList.contains('tab-disabled');
            const bDis = b.classList.contains('tab-disabled');
            
            // If one is disabled and other enabled, enabled comes first
            if(aDis !== bDis) return aDis ? 1 : -1;
            
            // If both same state, sort by priority
            const typeA = tabMap[a.id];
            const typeB = tabMap[b.id];
            return tabOrderPriority.indexOf(typeA) - tabOrderPriority.indexOf(typeB);
        });

        // Re-append to sidebar
        tabs.forEach(tab => sidebar.appendChild(tab));

        // 3. Switch to first enabled tab
        const firstEnabled = tabs.find(t => !t.classList.contains('tab-disabled'));
        if(firstEnabled) {
            const type = tabMap[firstEnabled.id];
            switchViewerTab(type);
        }

        // 4. Update Badge
        if (dom.planBadge) {
            dom.planBadge.textContent = 'PLAN: ' + purchasedPlan;
            dom.planBadge.classList.remove('hidden');
        }

        // 5. ZIP Button Visibility (Premium Only)
        if(dom.zipDownloadBtn) {
             dom.zipDownloadBtn.classList.toggle('hidden', purchasedPlan !== 'PREMIUM');
        }

        // 6. Load Sources (Load all, but access restricted by UI)
        const content = CONTENT_URLS[currentContentLanguage] || CONTENT_URLS.ENGLISH; 
        
        // Video
        const videoEl = document.getElementById('videoSource'); 
        if(content.VIDEO && videoEl) { 
            const source = videoEl.querySelector('source'); 
            if(source) { source.src = content.VIDEO; videoEl.load(); } 
            const videoBtn = document.getElementById('btn-dl-video');
            if (videoBtn) videoBtn.onclick = () => handleDirectDownload(content.VIDEO, 'video_class.mp4'); 
        }
        
        // Audio
        const audioEl = document.getElementById('audioSource');
        if(content.AUDIO && audioEl) { 
            const source = audioEl.querySelector('source'); 
            if(source) { source.src = content.AUDIO; audioEl.load(); } 
            const audioBtn = document.getElementById('btn-dl-audio');
            if (audioBtn) audioBtn.onclick = () => handleDirectDownload(content.AUDIO, 'audio_podcast.mp3'); 
        }
        
        // Mindmap
        const imgEl = document.getElementById('imageSource'); 
        if(content.MINDMAP && imgEl) { 
            imgEl.src = content.MINDMAP; 
            const imageBtn = document.getElementById('btn-dl-image');
            if (imageBtn) imageBtn.onclick = () => handleDirectDownload(content.MINDMAP, 'mindmap.png'); 
        }
        
        // PDF
        const pdfFr = document.getElementById('pdfFrame');
        if(content.PDF && pdfFr) { 
            let pdfLink = content.PDF; 
            const pdfBtn = document.getElementById('btn-dl-pdf');
            if (pdfBtn) pdfBtn.onclick = () => handleDirectDownload(pdfLink, 'ebook.pdf');
            if(pdfLink.includes('drive.google.com')) { pdfLink = pdfLink.replace('/view', '/preview'); pdfFr.src = pdfLink; } 
            else { const encodedUrl = encodeURIComponent(pdfLink); pdfFr.src = `https://docs.google.com/gview?embedded=true&url=${encodedUrl}`; }
        }
        
        // Show Modal
        if(dom.productViewerModal) {
            dom.productViewerModal.style.display = 'flex'; 
            dom.productViewerContent.classList.add('animate-modalFadeIn'); 
        }
        lucide.createIcons(); 
    }

    function closeViewerModal() { 
        if (dom.productViewerModal) {
            dom.productViewerModal.style.display = 'none'; 
        }
        document.querySelectorAll('video, audio').forEach(v => v.pause());
        if (dom.flipbookFrame) dom.flipbookFrame.src = '';
    }

    function handleUnlockClick() {
        if (!dom.unlockBtn) return;
        const status = dom.unlockBtn.getAttribute('data-unlocked');
        if (status === 'true') { 
            openViewerModal(); 
        } else { 
            showToast("Please purchase the product first.", false); 
        }
    }
    
    function handleDownloadBundleClick() { 
        const lang = currentContentLanguage; 
        const url = CONTENT_URLS[lang] ? CONTENT_URLS[lang].ZIP : null; 
        if(url) window.location.href = url; 
    }

    function startUnlockProcess(planName) { 
        // Save plan
        localStorage.setItem('purchased_plan_' + PRODUCT_UNIQUE_ID, planName);
        localStorage.setItem('unlocked_' + PRODUCT_UNIQUE_ID, 'true');
        
        triggerCelebration(); 
        
        if (planName === 'PREMIUM') {
             // Only show ZIP modal for premium
            if (dom.zipConfirmationModal) {
                dom.zipConfirmationModal.style.display = 'flex'; 
                const checkStep = document.getElementById('zipCheckStep');
                const choiceStep = document.getElementById('zipChoiceStep');
                if (checkStep) checkStep.style.display = 'flex';
                if (choiceStep) choiceStep.style.display = 'none';
                lucide.createIcons(); 
            }
        } else {
            // Direct unlock for Basic/Standard
            handleZipCompletion();
        }
    }

    function handleZipUnderstand() { 
        const checkStep = document.getElementById('zipCheckStep');
        const choiceStep = document.getElementById('zipChoiceStep');
        if (checkStep) checkStep.style.display = 'none';
        if (choiceStep) choiceStep.style.display = 'flex'; 
    }
    
    function handleZipDownloadNow() { 
        handleZipCompletion(); 
        const url = CONTENT_URLS[currentContentLanguage] ? CONTENT_URLS[currentContentLanguage].ZIP : null; 
        if(url) window.location.href = url; 
    }
    
    function handleZipDownloadLater() { 
        handleZipCompletion(); 
        openViewerModal(); 
    }

    function handleZipCompletion() {
        if (dom.zipConfirmationModal) dom.zipConfirmationModal.style.display = 'none'; 
        setUnlockedState('true'); 
        showToast("Product Unlocked!", true);
        
        setTimeout(() => { 
            if (dom.unlockContainer) dom.unlockContainer.scrollIntoView({ behavior: 'smooth', block: 'center' }); 
        }, 500);
        
        setTimeout(() => { 
            openCommunityModal(); 
        }, 1500);
    }

    function preloadAllImages() {
        if (!dom.cover) return;
        
        dom.cover.setAttribute('aria-busy', 'true'); 
        const imageUrls = [SOURCE_IMAGE, ...SCREENSHOT_URLS];
        const promises = imageUrls.map(url => new Promise((resolve) => { 
            const img = new Image(); 
            img.src = url; 
            img.onload = resolve; 
            img.onerror = resolve; 
        }));
        
        Promise.all(promises).then(() => {
            if (!dom.coverImg) return;
            
            dom.coverImg.src = SOURCE_IMAGE; 
            requestAnimationFrame(()=> { 
                dom.coverImg.style.opacity = '0.6'; 
                dom.coverImg.style.transform = 'scale(1)'; 
            });
            
            setTimeout(() => {
                dom.coverImg.style.opacity = '1'; 
                if (dom.coverShine) {
                    dom.coverShine.style.transition = 'opacity 0.32s ease'; 
                    dom.coverShine.style.opacity = '0';
                }
                
                if (dom.loadingSpin) {
                    dom.loadingSpin.style.opacity = '0'; 
                    dom.loadingSpin.style.display = 'none';
                }
                
                setTimeout(()=> {
                    if (dom.coverShine) dom.coverShine.style.display = 'none'; 
                    dom.cover.classList.add('loaded'); 
                    dom.cover.setAttribute('aria-busy','false');
                    
                    setTimeout(() => {
                        const tapPrompt = document.getElementById('tapPrompt');
                        if(tapPrompt) {
                            tapPrompt.style.opacity = '1'; 
                            if (dom.coverBlackOverlay) dom.coverBlackOverlay.classList.add('active');
                            
                            setTimeout(() => { 
                                tapPrompt.style.opacity = '0'; 
                                if (dom.coverBlackOverlay) dom.coverBlackOverlay.classList.remove('active'); 
                                setTimeout(() => { 
                                    tapPrompt.style.display = 'none'; 
                                }, 700); 
                            }, 5000); 
                        }
                    }, 1000);
                }, 450); 
            }, 700);
        });
    }

    let currentImageIndex = 0;
    function showPreviewImage(index) {
        if (index >= SCREENSHOT_URLS.length) index = 0; 
        else if (index < 0) index = SCREENSHOT_URLS.length - 1;
        
        currentImageIndex = index; 
        if (dom.previewShine) dom.previewShine.style.display = 'block'; 
        if (dom.previewScreenshot) dom.previewScreenshot.style.opacity = '0.5';
        
        const tempImg = new Image(); 
        tempImg.src = SCREENSHOT_URLS[currentImageIndex];
        tempImg.onload = () => {
            if (!dom.previewScreenshot || !dom.previewShine || !dom.imageCounter) return;
            
            dom.previewShine.style.display = 'none'; 
            dom.previewScreenshot.src = tempImg.src;
            dom.imageCounter.textContent = `${currentImageIndex + 1}/${SCREENSHOT_URLS.length}`;
            dom.previewScreenshot.style.opacity = '1'; 
            dom.previewScreenshot.classList.remove('animate-subtleZoomIn');
            void dom.previewScreenshot.offsetWidth; 
            dom.previewScreenshot.classList.add('animate-subtleZoomIn');
        };
    }

    if (dom.cover) {
        dom.cover.addEventListener('click', e => { 
            if (!dom.cover.classList.contains('loaded')) return;
            
            const tapPrompt = document.getElementById('tapPrompt'); 
            if(tapPrompt) { 
                tapPrompt.style.display = 'none'; 
                if (dom.coverBlackOverlay) dom.coverBlackOverlay.classList.remove('active'); 
            }
            
            if(dom.previewOverlay && dom.previewOverlay.style.opacity === '1') { 
                e.stopPropagation(); 
                showPreviewImage(currentImageIndex + 1); 
            } else { 
                e.preventDefault(); 
                if (dom.coverImg) dom.coverImg.style.opacity = '0'; 
                if (dom.previewOverlay) {
                    dom.previewOverlay.style.opacity = '1'; 
                    dom.previewOverlay.style.pointerEvents = 'auto'; 
                }
                currentImageIndex = -1; 
                showPreviewImage(0); 
                lucide.createIcons(); 
            }
        });
    }

    function exitPreview(e) { 
        if(e) e.stopPropagation(); 
        if (dom.previewScreenshot) dom.previewScreenshot.classList.remove('animate-subtleZoomIn'); 
        setTimeout(() => { 
            if (dom.previewOverlay) {
                dom.previewOverlay.style.opacity = '0'; 
                dom.previewOverlay.style.pointerEvents = 'none'; 
            }
            if (dom.previewScreenshot) dom.previewScreenshot.style.opacity = '0'; 
            if (dom.coverImg) dom.coverImg.style.opacity = '1'; 
        }, 300); 
    }

    document.addEventListener('DOMContentLoaded', function() {
      const storageKey = 'reacted_In_search_of_my_kanha_ji-893dsd3cjdf';
      if (localStorage.getItem(storageKey)) {
          const loveIcon = document.getElementById('loveIcon');
          if (loveIcon) {
              loveIcon.classList.add('fill-current');
          }
      }

      const unlocked = localStorage.getItem('unlocked_' + PRODUCT_UNIQUE_ID);
      if (unlocked === 'true') { 
          setUnlockedState('true'); 
      }
      
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('payment_status') === 'success' && urlParams.get('secret_key') === SECRET_KEY && sessionStorage.getItem('payment_initiated') === 'true') {
        history.replaceState(null, '', window.location.pathname); 
        sessionStorage.removeItem('payment_initiated');
        const plan = sessionStorage.getItem('selected_plan_type') || 'BASIC';
        if (dom.unlockBtn) dom.unlockBtn.setAttribute('data-unlocked', 'true'); 
        startUnlockProcess(plan);
      }
      
      AOS.init({ duration: 800, once: true, offset: 120 }); 
      lucide.createIcons(); 
      preloadAllImages();
      
      const yearElement = document.getElementById('year');
      if (yearElement) yearElement.textContent = new Date().getFullYear();
      
      document.addEventListener('click', function(e) {
          const quickActions = document.querySelector('.floating-quick-actions');
          if (isMenuOpen && quickActions && !quickActions.contains(e.target)) {
              closeCuteMenu();
          }
      });
      
      const book3d = document.getElementById('book3d');
      if (book3d) {
          if ('ontouchstart' in window) {
              book3d.style.transform = 'rotateY(-12deg) rotateX(4deg)';
              book3d.addEventListener('touchstart', function() {
                  this.style.transform = 'rotateY(-8deg) rotateX(6deg) translateY(-8px)';
              });
              book3d.addEventListener('touchend', function() {
                  this.style.transform = 'rotateY(-12deg) rotateX(4deg)';
              });
          }
      }
      
      window.addEventListener('scroll', handleScrollForStickyBar);
    });

    let scrollTriggered = false;
    window.addEventListener('scroll', function() {
        if (!scrollTriggered && window.scrollY > 100) {
            triggerProfileShine();
            scrollTriggered = true;
        }
    });

    function animateCount(el, start, end, duration) {
        let startTime = null; 
        let isFloat = end % 1 !== 0;
        
        function step(timestamp) {
            if (!startTime) startTime = timestamp; 
            const progress = timestamp - startTime; 
            const pct = Math.min(progress / duration, 1);
            let val = start + (end - start) * pct; 
            el.textContent = isFloat ? val.toFixed(1) : Math.floor(val).toLocaleString('en-IN');
            if (pct < 1) window.requestAnimationFrame(step); 
            else el.textContent = isFloat ? end.toFixed(1) : end.toLocaleString('en-IN');
        } 
        window.requestAnimationFrame(step);
    }
    
    const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
            document.querySelectorAll('.stat-value span[data-target]').forEach(span => {
                if (span.id !== 'live-heart-count') { 
                    animateCount(span, 0, parseFloat(span.getAttribute('data-target')), 2000); 
                }
            });
            observer.disconnect();
        }
    }, { threshold: 0.5 }); 
    
    const statsSection = document.getElementById('stats-section');
    if (statsSection) observer.observe(statsSection);

    function triggerCelebration() { 
        confetti({ 
            particleCount: 180, 
            spread: 100, 
            origin: { y: 0.6 }, 
            colors: ['#6366f1', '#a855f7', '#10b981'], 
            zIndex: 2000 
        }); 
    }
    
    /* NEW PLAN SELECTION MODAL LOGIC */
    window.openPlanSelectionModal = function() {
        if(dom.planSelectionModal) {
            dom.planSelectionModal.style.display = 'flex';
            dom.mobileStickyBar.classList.remove('show'); 
            // Hide sticky bar to prevent overlap
            dom.mobileStickyBar.style.display = 'none';
        }
        lucide.createIcons();
    }
    
    window.closePlanSelectionModal = function() {
        if(dom.planSelectionModal) {
            dom.planSelectionModal.style.display = 'none';
            // Restore sticky bar
            dom.mobileStickyBar.style.display = 'flex';
            handleScrollForStickyBar();
        }
    }
    
    window.initiatePlanPayment = function(planType) {
        closePlanSelectionModal();
        selectedPlanForPayment = planType;
        
        if (planType === 'BASIC') currentPaymentUrl = link119;
        else if (planType === 'STANDARD') currentPaymentUrl = link209;
        else if (planType === 'PREMIUM') currentPaymentUrl = link499;
        
        openPaymentModal();
    }
    
    /* UPDATED PAYMENT MODAL LOGIC */
    let countdownInterval;

    function openPaymentModal() { 
        document.body.style.overflow = 'hidden'; 
        const paymentModal = document.getElementById('paymentModal');
        if (paymentModal) {
            paymentModal.style.display = 'flex'; 
            paymentModal.querySelector('.modal-content').classList.add('animate-modalFadeIn'); 
        }
        
        // Hide Sticky bar
        dom.mobileStickyBar.style.display = 'none';
        
        // Start payment directly with selected link
        const paymentLoader = document.getElementById('paymentLoader');
        const cashfreeIframe = document.getElementById('cashfreeIframe');
        
        if (paymentLoader) paymentLoader.style.display = 'flex';
        
        sessionStorage.setItem('payment_initiated', 'true'); 
        sessionStorage.setItem('selected_plan_type', selectedPlanForPayment); // Store PLAN
        
        if (cashfreeIframe) cashfreeIframe.src = currentPaymentUrl;
        
        setTimeout(() => { 
            if (paymentLoader) paymentLoader.style.display = 'none'; 
            if (cashfreeIframe) {
                cashfreeIframe.style.display = 'block'; 
            }
            setTimeout(() => { 
                if (dom.bottomShield) {
                    dom.bottomShield.classList.remove('inactive'); 
                    dom.bottomShield.style.zIndex = '25'; 
                }
            }, 36000); 
        }, 2000); 
        
        let tl = 240; 
        const paymentTimer = document.getElementById('paymentTimer');
        const timerCount = document.getElementById('timerCount');
        if (paymentTimer) paymentTimer.style.display='block';
        
        countdownInterval = setInterval(() => { 
            tl--; 
            if (timerCount) timerCount.textContent = `${Math.floor(tl/60)}:${(tl%60)<10?'0':''}${tl%60}`; 
            if(tl<0) closePaymentModal(); 
        }, 1000);
        
        if (dom.bottomShield) {
            dom.bottomShield.classList.add('inactive'); 
        }
        lucide.createIcons(); 
    }
    
    function closePaymentModal() { 
        document.body.style.overflow = ''; 
        const paymentModal = document.getElementById('paymentModal');
        if (paymentModal) paymentModal.style.display = 'none'; 
        
        // Restore Sticky Bar
        dom.mobileStickyBar.style.display = 'flex';
        handleScrollForStickyBar();
        
        const paymentTimer = document.getElementById('paymentTimer');
        if (paymentTimer) paymentTimer.style.display = 'none'; 
        
        if(countdownInterval) clearInterval(countdownInterval); 
    }
    
    function openConfirmationModal() { 
        const confirmationModal = document.getElementById('confirmationModal');
        if (confirmationModal) {
            confirmationModal.classList.add('active'); 
            confirmationModal.style.display='flex'; 
        }
    }
    
    function confirmExitPayment(y) { 
        const confirmationModal = document.getElementById('confirmationModal');
        if (confirmationModal) {
            confirmationModal.classList.remove('active'); 
            setTimeout(()=> {
                confirmationModal.style.display='none';
            }, 300); 
        }
        if(y) closePaymentModal(); 
    }
    
    function submitFeedback() {
        const txt = document.getElementById('feedbackTextarea'); 
        if(!txt || !txt.value.trim()) { 
            txt.classList.add('border-red-500'); 
            return; 
        }
        
        const feedbackForm = document.getElementById('feedbackForm');
        const feedbackSuccess = document.getElementById('feedbackSuccess');
        if (feedbackForm) feedbackForm.style.display='none'; 
        if (feedbackSuccess) feedbackSuccess.style.display='block';
        
        setTimeout(() => { 
            const feedbackModal = document.getElementById('feedbackModal');
            if (feedbackModal) feedbackModal.style.display='none'; 
        }, 2000);
    }
    
    function closeFeedbackModal(backToLibrary) { 
        const feedbackModal = document.getElementById('feedbackModal');
        if (feedbackModal) feedbackModal.style.display = 'none'; 
    }
    
    // Details/summary toggle functionality
    document.querySelectorAll('summary').forEach(s => s.addEventListener('click', function(e) {
        e.preventDefault(); 
        const c = this.parentElement.querySelector('.details-content');
        if(!c) return;
        
        if(this.parentElement.hasAttribute('open')) { 
            c.style.height='0'; 
            setTimeout(()=>this.parentElement.removeAttribute('open'),300); 
        } else { 
            this.parentElement.setAttribute('open',''); 
            c.style.height='auto'; 
            const h=c.offsetHeight; 
            c.style.height='0'; 
            void c.offsetWidth; 
            c.style.height=h+'px'; 
            c.style.opacity='1'; 
        }
    }));
  </script>
</body>
</html>
