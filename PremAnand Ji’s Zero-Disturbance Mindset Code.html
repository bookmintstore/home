<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PremAnand Ji‚Äôs Zero-Disturbance Mindset code</title>

  <!-- FAVICON -->
  <link rel="icon" type="image/png" href="https://bookmintor.shop/images/logo.png">

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

  <!-- SECURITY SCRIPT -->
  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    document.onkeydown = function(e) {
      if (e.keyCode == 123) return false;
      if (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0) || e.keyCode == 'C'.charCodeAt(0))) return false;
      if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
      if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) return false;
    };
  </script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { brandGreen: '#22c55e', brandDark: '#0b0e13' },
          boxShadow: {
            glow: '0 12px 36px -12px rgba(99,102,241,0.7)',
            ctaglow: '0 12px 40px -12px rgba(168,85,247,.7)',
            book: '0 28px 60px -18px rgba(0, 0, 0, 0.65)',
            modalGlow: '0 0 40px rgba(168,85,247,0.75), 0 0 20px rgba(99,102,241,0.65)',
            saleGlow: '0 0 15px rgba(34, 197, 94, 0.4)'
          },
          keyframes: {
            shine: { '0%': { transform: 'translateX(-140%)' }, '100%': { transform: 'translateX(140%)' } },
            btnshine: { '0%': { transform: 'translateX(-140%) skewX(-30deg)' }, '100%': { transform: 'translateX(220%) skewX(-30deg)' } },
            slideUp: { '0%': {opacity:'0', transform:'translateY(20px)'}, '100%':{opacity:'1', transform:'translateY(0)'} },
            cornerPop: { '0%': { opacity: 0, transform:'scale(.95)' }, '40%': { opacity: .95 }, '100%': { opacity: 0, transform:'scale(1)' } },
            aura: { '0%': { boxShadow: '0 0 12px rgba(168,85,247,0.6)' }, '50%': { boxShadow: '0 0 26px rgba(168,85,247,0.95)' }, '100%': { boxShadow: '0 0 12px rgba(168,85,247,0.6)' } },
            coverFast: { '0%': { transform: 'translateX(-160%) skewX(-10deg)' }, '100%': { transform: 'translateX(160%) skewX(-10deg)' } },
            glowspin: { '0%': { transform: 'rotate(0deg)' }, '100%': { transform: 'rotate(360deg)' } },
            modalFadeIn: { '0%': { opacity: 0, transform: 'translateY(20px) scale(0.95)' }, '100%': { opacity: 1, transform: 'translateY(0) scale(1)' } },
            modalFadeOut: { '0%': { opacity: 1, transform: 'translateY(0) scale(1)' }, '100%': { opacity: 0, transform: 'translateY(-10px) scale(1.05)' } },
            tagShine: { '0%': { transform: 'translateX(-140%) skewX(-30deg)' }, '100%': { transform: 'translateX(220%) skewX(-30deg)' } },
            shakeModal: { '0%, 100%': { transform: 'translateX(0)' }, '10%, 90%': { transform: 'translateX(-4px)' }, '50%': { transform: 'translateX(4px)' } },
            redGlow: { '0%, 100%': { boxShadow: '0 0 8px rgba(239, 68, 68, 0.6)' }, '50%': { boxShadow: '0 0 16px rgba(239, 68, 68, 1)' } },
            subtleZoomIn: { '0%': { opacity: 0, transform: 'scale(0.96) translateY(5px)' }, '100%': { opacity: 1, transform: 'scale(1) translateY(0)' } },
            popFloat: { '0%, 100%': { transform: 'scale(1) translateY(0px)', opacity: 0.9 }, '50%': { transform: 'scale(1.05) translateY(-2px)', opacity: 1 } },
            pulseArrow: { '0%': { transform: 'translateX(0px)', opacity: 0.5 }, '50%': { transform: 'translateX(6px)', opacity: 1 }, '100%': { transform: 'translateX(0px)', opacity: 0.5 } },
            'gradient-shift': { '0%': { 'background-position': '0% 50%' }, '50%': { 'background-position': '100% 50%' }, '100%': { 'background-position': '0% 50%' } },
            rollUpSmooth: {
                '0%': { transform: 'translateY(12px)', opacity: 0 },
                '15%': { transform: 'translateY(0)', opacity: 1 },
                '85%': { transform: 'translateY(0)', opacity: 1 },
                '100%': { transform: 'translateY(-12px)', opacity: 0 }
            },
            // Custom Snake Border Animation Keyframes
            snakeRotate: { '0%': { transform: 'translate(-50%, -50%) rotate(0deg)' }, '100%': { transform: 'translate(-50%, -50%) rotate(360deg)' } }
          },
          animation: {
            shine: 'shine 1.6s ease-in-out infinite',
            btnshine: 'btnshine 3.0s ease-in-out infinite',
            slideUp: 'slideUp .45s ease-out forwards',
            cornerPop: 'cornerPop .95s ease-out 0.15s 1 forwards',
            aura: 'aura 2.4s ease-in-out infinite',
            coverFast: 'coverFast 0.45s linear infinite',
            glowspin: 'glowspin 1.2s linear infinite',
            modalFadeIn: 'modalFadeIn 0.35s ease-out forwards',
            modalFadeOut: 'modalFadeOut 0.4s ease-in forwards',
            tagShine: 'tagShine 1.0s ease-in-out infinite',
            shakeModal: 'shakeModal 0.5s ease-in-out 1',
            redGlow: 'redGlow 2.5s infinite ease-in-out',
            subtleZoomIn: 'subtleZoomIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
            popFloat: 'popFloat 3s ease-in-out infinite',
            pulseArrow: 'pulseArrow 1.2s ease-in-out infinite 0.5s',
            'gradient-shift': 'gradient-shift 8s ease infinite',
            rollUpSmooth: 'rollUpSmooth 2.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards',
            snakeRotate: 'snakeRotate 5s linear infinite' // Increased duration to 5s
          }
        }
      }
    }
  </script>

  <style>
    /* BASIC SETUP */
    @keyframes waveJump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    @keyframes gradient-shift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

    body {
        font-family:'Poppins',sans-serif;
        /* Removed user-select none to allow copy/paste in dashboard for links */
        overflow-x: hidden;
        scroll-behavior: smooth; /* For auto-scroll */
    }

    /* --- PREMIUM SNAKE ANIMATION (REVISED) --- */
    .snake-container {
        position: relative;
        display: none; /* Initially hidden */
        padding: 2px; 
        border-radius: 14px;
        overflow: hidden;
        transition: all 0.3s ease;
        z-index: 10;
        margin-left: 10px;
        background: transparent;
    }

    .snake-container.visible {
        display: inline-flex;
    }
    
    /* FIX: Increased width/height and added strong glow for visibility */
    .snake-border {
        position: absolute;
        top: 50%; 
        left: 50%; 
        width: 300%; /* Increased size */
        height: 300%; /* Increased size */
        /* Glowing Green color with a focused half-round tail */
        background: conic-gradient(transparent 0deg, transparent 270deg, #22c55e 300deg, #22c55e 330deg, transparent 360deg);
        animation: snakeRotate 5s linear infinite; /* 5s duration */
        opacity: 0;
        transition: opacity 0.5s ease;
        z-index: 1;
        pointer-events: none;
        filter: drop-shadow(0 0 10px #22c55e) drop-shadow(0 0 20px #22c55e); /* Stronger glow */
        border-radius: 14px; 
    }

    .snake-active .snake-border {
        opacity: 1;
        transition: opacity 1.5s ease 3s; 
    }

    /* FIX: Adjusted padding/font to match Buy Now button size (smaller/compact) */
    .unlock-btn {
        display: flex;
        position: relative;
        overflow: hidden;
        align-items: center;
        gap: 6px;
        /* White background, Green Text/Icon */
        background-color: white;
        color: #10b981; /* Green Text */
        padding: 8px 16px; /* Reduced padding */
        border-radius: 10px; /* Adjusted border radius */
        font-weight: 700;
        font-size: 0.9rem; /* Reduced font size */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        border: 2px solid white; 
        transition: transform 0.2s, background-color 0.2s, box-shadow 0.2s;
        margin: 0;
        z-index: 2; 
    }
    .unlock-btn:hover { transform: scale(1.03); box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3); }
    .unlock-btn i { color: #10b981; }
    
    /* Ensure Buy Now button is styled for comparison */
    .cta-btn {
      padding: 8px 16px; 
      font-size: 0.9rem;
    }

    /* CTA BUTTONS */
    .cta-btn{ position:relative; overflow:hidden; animation: aura 2.4s ease-in-out infinite; box-shadow: 0 8px 30px rgba(124,58,237,0.25); }
    .cta-btn .cta-shine{ position:absolute; inset:-6px; transform:translateX(-140%) skewX(-30deg); background:linear-gradient(90deg,rgba(255,255,255,0) 0%, rgba(255,255,255,0.43) 45%, rgba(255,255,255,0.15) 60%, rgba(255,255,255,0) 100%); transition: opacity 0.2s; opacity: 0.90; mix-blend-mode: screen; pointer-events:none; }
    .cta-btn:hover .cta-shine { opacity: 1; }
    .cta-btn .corner-bling{ pointer-events:none; position:absolute; inset:-6px; border-radius:12px; background:radial-gradient(160px 160px at 0 0, rgba(255,255,255,.65), transparent 60%), radial-gradient(160px 160px at 100% 0, rgba(255,255,255,.5), transparent 60%), radial-gradient(160px 160px at 0 100%, rgba(255,255,255,.5), transparent 60%), radial-gradient(160px 160px at 100% 100%, rgba(255,255,255,.5), transparent 60%); opacity:0; filter: blur(6px); }
    .cta-btn:hover .corner-bling { opacity: .95; }

    /* BOOK 3D */
    .book-wrap { perspective:1600px; display:flex; align-items:center; justify-content:center; }
    .book-3d { width: 240px; height: 340px; position: relative; transform-style: preserve-3d; transform: rotateY(-12deg) rotateX(4deg); transition: transform .35s ease; margin: 12px; }
    .book-3d:hover { transform: rotateY(-8deg) rotateX(6deg) translateY(-8px); }
    .cover { position:absolute; width: 100%; height: 100%; left: 0; top: 0; transform: translateZ(12px) rotateY(0deg); border-radius: 8px; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.45); background: linear-gradient(180deg,#111217,#0f1216); }
    .cover img { width:100%; height:100%; object-fit:cover; display:block; transition: opacity 0.28s ease, transform 0.28s ease; opacity:0; transform: scale(1.02); will-change: opacity, transform; }
    #coverFace { cursor: pointer; }

    /* LOADING & SHINE */
    /* Fixed shine animation duration issue by using custom keyframe and resetting in JS */
    .cover-shine { position:absolute; inset:0; z-index:20; pointer-events:none; background: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.7) 28%, rgba(0,0,0,0.95) 50%, rgba(0,0,0,0.7) 72%, rgba(0,0,0,0) 100%); transform: translateX(-160%) skewX(-10deg); mix-blend-mode: multiply; opacity:0.95; animation: coverFast 0.45s linear infinite; transition: none; filter: blur(8px); }
    .cover-loading-spin { position: absolute; inset: 0; z-index: 7; pointer-events: none; display: flex; align-items: center; justify-content: center; opacity: 1; transition: opacity 0.4s ease-out; }
    .loading-half-wheel { width: 40px; height: 40px; border: 4px solid transparent; border-radius: 50%; border-top-color: #6366f1; border-left-color: #a855f7; box-shadow: 0 0 10px rgba(168, 85, 247, 0.7), inset 0 0 6px rgba(99, 102, 241, 0.5); }
    .cover.loaded .cover-loading-spin { opacity: 0; }

    /* BOOK DETAILS */
    .spine { position:absolute; left: -12px; top: 6px; width: 24px; height: calc(100% - 12px); transform-origin: left center; transform: rotateY(90deg) translateX(-12px); border-radius: 8px 0 0 8px; background: linear-gradient(180deg,#e6e6e8,#cfcfd3); box-shadow: inset 0 2px 6px rgba(0,0,0,0.06); }
    .pages { position:absolute; left: -8px; top: 10px; width: 16px; height: calc(100% - 20px); transform: rotateY(-90deg) translateX(-8px); background: linear-gradient(90deg,#fcfbf9,#f0efe9); border-radius: 4px 0 0 4px; box-shadow: inset 0 0 8px rgba(0,0,0,0.08); overflow:hidden; }
    .top-edge { position:absolute; top: -10px; left: 10px; width: calc(100% - 20px); height: 16px; transform: rotateX(90deg) translateY(-10px); background: linear-gradient(180deg,#fbfbfb,#f0efef); border-radius: 8px 8px 0 0; }
    .bottom-edge { position:absolute; bottom: -10px; left: 10px; width: calc(100% - 20px); height: 16px; transform: rotateX(-90deg) translateY(10px); background: linear-gradient(180deg,#fbfbfb,#f0efef); border-radius: 0 0 8px 8px; }
    .book-ghost { position:absolute; bottom: -28px; left: 20px; width: 70%; height: 28px; background: rgba(0,0,0,0.45); border-radius: 50%; filter: blur(16px); transform: rotateX(90deg); }
    @media (max-width:700px){ .book-3d { width: 170px; height: 245px; } }

    /* ROLL UP TAG */
    .subtle-tag { position: relative; overflow: hidden; display: inline-flex; align-items: center; gap: 4px; background-color: rgba(255, 255, 255, 0.08); backdrop-filter: blur(2px); border: 1px solid rgba(255, 255, 255, 0.15); font-size: 0.75rem; font-weight: 700; padding: 4px 10px; border-radius: 6px; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2); text-transform: uppercase; letter-spacing: 0.5px; cursor: default; margin-bottom: 8px; height: 26px; min-width: 120px; }
    .tag-text-wrapper { position: relative; height: 100%; display: flex; align-items: center; overflow: hidden; flex-grow: 1; }
    .tag-text { position: absolute; white-space: nowrap; background-image: linear-gradient(90deg, #a855f7, #6366f1, #e0f2f1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-fill-color: transparent; line-height: 1; background-size: 200% auto; animation: gradient-shift 8s ease infinite; }
    .subtle-tag .tag-shine { position: absolute; inset: -6px; transform: translateX(-140%) skewX(-30deg); background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 45%, rgba(255,255,255,0.1) 60%, rgba(255,255,255,0) 100%); mix-blend-mode: overlay; pointer-events: none; opacity: 0.8; animation: tagShine 3.0s ease-in-out infinite; }

    /* STATS & STARS */
    .stats-section { display: flex; justify-content: space-around; align-items: center; padding: 0; border-top: none; border-bottom: none; margin-top: 16px; }
    .stat-item { text-align: center; flex-grow: 1; padding: 0 8px; }
    .stat-value { font-size: 1.35rem; font-weight: 700; line-height: 1.1; color: #e0f2f1; margin-bottom: 4px; text-shadow: none; display: flex; align-items: center; justify-content: center; gap: 6px; }
    .stat-value svg { color: #a855f7; filter: drop-shadow(0 0 4px rgba(168,85,247,0.7)); }
    .stat-label { font-size: 0.75rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; color: #94a3b8; }

    .star-glow svg { filter: drop-shadow(0 0 4px rgba(251, 191, 36, 0.6)); }
    .star-glow .filled { fill: #fbbf24; color: #fbbf24; }
    .star-glow .half { fill: transparent; color: #fbbf24; }
    .star-glow .empty { color: #475569; opacity: 0.45; }

    /* PREMIUM LIST */
    .premium-list-container { margin-top: 10px; padding: 10px; padding-bottom: 0; }
    .premium-list-item { display: flex; align-items: flex-start; margin-bottom: 10px; font-size: 1.0rem; color: #cbd5e1; line-height: 1.4; }
    .premium-list-item strong { color: #e0f2f1; }
    .simple-tick { color: #34d399; filter: drop-shadow(0 0 3px rgba(52, 211, 153, 0.5)); font-size: 1.4rem; line-height: 1; margin-right: 10px; min-width: 20px; font-weight: 900; transform: translateY(-2px); }

    /* MODALS */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); z-index: 1000; overflow: auto; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
    .modal-content { position: relative; background-color: #ffffff; color: #1f2937; padding: 30px; border-radius: 12px; width: 80%; max-width: 400px; border: 1px solid rgba(0,0,0,0.1); box-shadow: 0 5px 20px rgba(0,0,0,0.5), 0 0 20px rgba(99,102,241,0.25); opacity: 0; transform: translateY(20px) scale(0.95); }
    #previewOverlay { position: absolute; inset: 0; z-index: 8; background: #111; opacity: 0; transition: opacity 0.3s ease; display: flex; align-items: center; justify-content: center; pointer-events: none; }
    #previewScreenshot { width: 100%; height: 100%; object-fit: cover; opacity: 0; border-radius: 8px; }

    /* DOWNLOAD BUTTON */
    .download-button { position: relative; overflow: hidden; display: inline-flex; align-items: center; justify-content: center; gap: 8px; background-color: #4CAF50; background-image: linear-gradient(135deg, #4CAF50, #10B981); color: white; padding: 12px 25px; margin-top: 0px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 1.1em; cursor: pointer; border: none; transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.3s; box-shadow: 0 4px 15px rgba(16,185,129,0.4); }
    .download-button:hover:not(:disabled) { box-shadow: 0 6px 20px rgba(16,185,129,0.6); }
    .download-button:active:not(:disabled) { transform: scale(0.97); box-shadow: 0 2px 5px rgba(16,185,129,0.3); }
    .download-button .btn-shine { position: absolute; inset: -6px; transform: translateX(-140%) skewX(-30deg); background: linear-gradient(90deg,rgba(255,255,255,0) 0%, rgba(255,255,255,0.6) 45%, rgba(255,255,255,0.2) 60%, rgba(255,255,255,0) 100%); mix-blend-mode: screen; pointer-events: none; opacity: 1; animation: btnshine 3.0s ease-in-out infinite; }
    .download-button:disabled { opacity: 0.6; cursor: not-allowed; background-image: linear-gradient(135deg, #4CAF50, #10B981); box-shadow: none; transform: none; }

    .no-shine-button { position: relative; overflow: hidden; display: inline-flex; align-items: center; justify-content: center; gap: 8px; color: white; padding: 12px 25px; margin-top: 0px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 1.1em; cursor: pointer; border: none; transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.3s; background-image: linear-gradient(135deg, #6366f1, #a855f7); box-shadow: 0 4px 15px rgba(168,85,247,0.4); }

    #modalCloseButton { position: absolute; top: 10px; right: 10px; background: none; border: none; cursor: pointer; padding: 8px; border-radius: 50%; color: #64748b; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; z-index: 1010; }
    #modalCloseButton.show-close { opacity: 1; pointer-events: auto; }
    .modal-cover-wrap { width: 96px; height: 128px; overflow: hidden; border-radius: 6px; }
    .modal-cover-wrap img { width: 100%; height: 100%; object-fit: cover; }
    .feedback-textarea { resize: vertical; min-height: 100px; }

    /* FEEDBACKS */
    .user-avatar { width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.9rem; color: white; margin-right: 12px; flex-shrink: 0; }
    .feedback-item { display: flex; align-items: flex-start; padding: 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); margin-bottom: 12px; transition: all 0.3s ease; }
    .feedback-item:hover { background: rgba(255, 255, 255, 0.08); transform: translateY(-2px); }
    .feedback-content { flex: 1; }
    .feedback-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
    .user-info { display: flex; align-items: center; }
    .user-details { display: flex; flex-direction: column; }
    .user-name { font-weight: 600; font-size: 0.9rem; color: #e2e8f0; }
    .user-location { font-size: 0.75rem; color: #94a3b8; margin-top: 2px; }
    .feedback-date { font-size: 0.75rem; color: #64748b; text-align: right; }
    .feedback-text { font-size: 0.9rem; line-height: 1.5; color: #cbd5e1; margin-bottom: 8px; }
    .extra-feedback { display: none; }

    .jumping-loader { display: flex; justify-content: center; align-items: center; height: 60px; }
    .jumping-loader .ball { width: 14px; height: 14px; margin: 0 4px; background-color: #a855f7; border-radius: 50%; display: inline-block; }
    .jumping-loader .ball:nth-child(1) { animation: waveJump 0.8s ease-in-out infinite 0s; }
    .jumping-loader .ball:nth-child(2) { animation: waveJump 0.8s ease-in-out infinite 0.1s; }
    .jumping-loader .ball:nth-child(3) { animation: waveJump 0.8s ease-in-out infinite 0.2s; }

    /* PAYMENT & CONFIRMATION */
    #confirmationModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; align-items: center; justify-content: center; opacity: 0; backdrop-filter: blur(0px); transition: opacity 0.3s ease, backdrop-filter 0.3s ease; }
    #confirmationModal.active { display: flex; opacity: 1; backdrop-filter: blur(4px); }
    #confirmationContent { background: #1e293b; backdrop-filter: none; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 24px; width: 80%; max-width: 380px; text-align: center; color: white; box-shadow: 0 10px 40px 0 rgba(0, 0, 0, 0.5); transition: box-shadow 0.3s ease; }
    .conf-text-glow { color: #f87171; font-weight: 700; font-size: 1.25rem; text-shadow: 0 0 12px rgba(239, 68, 68, 0.8); animation: redGlow 2.5s infinite ease-in-out; }
    .payment-modal-blur .modal-content#paymentModalContent { filter: blur(4px) brightness(0.7); pointer-events: none; transition: filter 0.3s ease; }
    #paymentTimer { display: none; position: fixed; top: 10px; left: 50%; transform: translateX(-50%); background: #ef4444; color: white; padding: 6px 16px; border-radius: 20px; font-weight: bold; z-index: 2010; box-shadow: 0 0 15px rgba(239,68,68,0.5); font-family: monospace; font-size: 1.0rem; }
    .invisible-shield { position: absolute; left: 0; width: 100%; height: 70px; background: transparent; z-index: 25; pointer-events: auto; }
    .payment-lang-btn { position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 16px; margin-bottom: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; font-weight: 600; font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease; }
    .payment-lang-btn:hover { background: rgba(255,255,255,0.1); border-color: rgba(168, 85, 247, 0.5); transform: translateY(-2px); box-shadow: 0 8px 20px -6px rgba(168, 85, 247, 0.4); }
    .payment-lang-btn .btn-shine { position: absolute; inset: -6px; transform: translateX(-140%) skewX(-30deg); background: linear-gradient(90deg,rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 45%, rgba(255,255,255,0.1) 60%, rgba(255,255,255,0) 100%); mix-blend-mode: overlay; pointer-events: none; animation: btnshine 3.0s ease-in-out infinite; }

    /* BANNER */
    #saleBanner { display: none; background: linear-gradient(90deg, #ef4444, #b91c1c); padding: 8px; text-align: center; font-weight: 700; font-size: 0.9rem; box-shadow: 0 4px 20px rgba(239, 68, 68, 0.4); border-bottom: 1px solid rgba(255,255,255,0.1); }

    /* PRODUCT VIEWER */
    #productViewerModal { z-index: 4000; }
    #productViewerContent { width: 95%; max-width: 900px; height: 85vh; padding: 0; background: #0f172a; display: flex; flex-direction: column; overflow: hidden; }
    .viewer-header { padding: 15px 20px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; background: #1e293b; }
    .viewer-body { flex: 1; display: flex; height: 100%; overflow: hidden; }
    .viewer-sidebar { width: 200px; background: #111827; border-right: 1px solid rgba(255,255,255,0.05); padding: 20px 10px; display: flex; flex-direction: column; gap: 10px; }
    .viewer-tab { padding: 12px; border-radius: 8px; cursor: pointer; color: #94a3b8; transition: all 0.2s; font-size: 0.9rem; display: flex; align-items: center; gap: 8px; }
    .viewer-tab:hover { background: rgba(255,255,255,0.05); color: white; }
    .viewer-tab.active { background: #334155; color: #a855f7; font-weight: 600; }
    .viewer-main { flex: 1; padding: 20px; overflow-y: auto; background: #020617; display: flex; align-items: center; justify-content: center; position: relative; }
    .viewer-section { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center; }
    .viewer-section.active { display: flex; }

    /* ZOOM CLASS FOR IMAGES */
    .viewer-zoom-img { cursor: zoom-in; transition: transform 0.3s ease; max-height: 100%; max-width: 100%; object-fit: contain; }
    .viewer-zoom-img.zoomed { transform: scale(1.5); cursor: zoom-out; }

    /* SMOOTH ACCORDION STYLE */
    .details-content {
        overflow: hidden;
        height: 0;
        opacity: 0;
        transition: height 0.3s ease-out, opacity 0.3s ease-out;
    }
    details[open] summary svg {
        transform: rotate(180deg);
    }
    summary {
        list-style: none;
        outline: none;
    }
    summary::-webkit-details-marker {
        display: none;
    }

    /* TOAST NOTIFICATION */
    #toastNotification {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%) translateY(-100px);
        background: rgba(16, 185, 129, 0.95);
        color: white;
        padding: 12px 24px;
        border-radius: 50px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        z-index: 5000;
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 1px solid rgba(255,255,255,0.2);
    }
    #toastNotification.show {
        transform: translateX(-50%) translateY(0);
    }

    @media (max-width: 768px) { .viewer-body { flex-direction: column; } .viewer-sidebar { width: 100%; flex-direction: row; height: auto; padding: 10px; overflow-x: auto; } .viewer-tab { flex: 1; justify-content: center; white-space: nowrap; } }
  </style>
</head>
<body class="bg-[#0b0e13] text-white selection:bg-indigo-500/30">

  <!-- TOAST NOTIFICATION ELEMENT -->
  <div id="toastNotification">
      <i data-lucide="unlock" class="h-5 w-5"></i>
      <span>Product Unlocked! Access Granted.</span>
  </div>

  <div class="pointer-events-none fixed inset-0 -z-10">
    <div class="absolute -top-56 -left-40 h-[680px] w-[680px] rounded-full bg-indigo-600/20 blur-[140px]"></div>
    <div class="absolute -bottom-56 -right-40 h-[600px] w-[600px] rounded-full bg-fuchsia-600/20 blur-[140px]"></div>
  </div>

  <div id="saleBanner">üî• FLASH SALE ENDING SOON: 88% OFF LIMITED TIME OFFER!</div>
  <div id="paymentTimer">Time Left: <span id="timerCount">04:00</span></div>

  <header class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
    <a href="index.html" class="flex items-center gap-2">
      <!-- NEW LOGO IMPLEMENTATION -->
      <div class="relative overflow-hidden h-10 w-10 rounded-xl bg-gradient-to-br from-indigo-500 to-fuchsia-500 shadow-glow flex items-center justify-center">
        <!-- Shine Element -->
        <div id="logoShine" class="absolute inset-0 bg-white/30 skew-x-[-30deg] animate-shine z-10 pointer-events-none"></div>
        <!-- Logo Image -->
        <img id="logoImg" src="https://bookmintor.shop/images/loffgo.png" alt="Logo" class="object-cover w-full h-full opacity-0 transition-opacity duration-500" style="padding: 2px; border-radius: 12px;">
      </div>
      <span class="text-lg font-bold"><span class="bg-gradient-to-r from-indigo-300 to-fuchsia-300 bg-clip-text text-transparent">Book</span>Mintor</span>
    </a>
    <a href="./spirituality.html" class="text-sm text-zinc-300 hover:text-white">Back to Library</a>
  </header>

  <section class="max-w-5xl mx-auto px-6 py-12 space-y-8">
      <div class="flex flex-col md:flex-row items-center gap-8">
      <div class="book-wrap relative" data-aos="fade-right">
        <div id="previewIndicator" class="absolute z-10 sm:block md:translate-x-0 md:-left-4 md:top-20 md:translate-y-0" style="width: 150px; display: none;">
            <div class="flex items-center gap-1 text-xs font-semibold text-white/90 bg-fuchsia-600/60 backdrop-blur-sm px-2 py-1 rounded-lg border border-fuchsia-400/50 shadow-lg animate-popFloat">
                <i data-lucide="info" class="h-4 w-4 text-fuchsia-200"></i>
                <span>Tap here to see preview</span>
                <i data-lucide="arrow-right" class="h-4 w-4 text-fuchsia-200 animate-pulseArrow"></i>
            </div>
        </div>

        <div class="book-3d" id="book3d">
          <div class="cover" id="coverFace" aria-busy="true">
            <div class="cover-loading-spin" id="loadingSpin" aria-hidden="true"><div class="loading-half-wheel animate-glowspin"></div></div>
            <div class="cover-shine animate-coverFast" id="coverShine" aria-hidden="true"></div>
            <img id="coverImg" alt="ebook cover" src="" loading="eager" />
            <div id="previewOverlay" aria-hidden="true">
                <div class="cover-shine" id="previewShine" style="display: none; z-index: 20; opacity: 1;"></div>
                <img id="previewScreenshot" src="" alt="Preview" class="absolute inset-0 w-full h-full object-contain" />
                <button onclick="exitPreview(event)" id="exitPreviewBtn" class="absolute top-2 right-2 p-1 bg-black/30 text-white rounded-full hover:bg-black/50 transition z-10"><i data-lucide="x" class="h-4 w-4"></i></button>
                <p id="imageCounter" class="absolute bottom-2 left-1/2 -translate-x-1/2 text-xs font-medium px-2 py-0.5 bg-black/50 rounded-full text-white/80 z-10"></p>
            </div>
          </div>
          <div class="spine" aria-hidden="true"></div><div class="pages" aria-hidden="true"></div><div class="top-edge" aria-hidden="true"></div><div class="bottom-edge" aria-hidden="true"></div><div class="book-ghost" aria-hidden="true"></div>
        </div>
      </div>

      <div class="flex-1 space-y-4" data-aos="fade-left">
        <div id="custom-tag-container"></div>
        <h1 class="text-3xl font-bold">PremAnand Ji‚Äôs Zero-Disturbance Mindset code</h1>
        <p class="text-zinc-300">A powerful guide inspired by PremAnand Ji to help you master calmness and inner stability.</p>

        <div class="stats-section" id="stats-section">
          <div class="stat-item"><div class="stat-value"><i data-lucide="download-cloud" class="h-5 w-5"></i><span data-target="12500" id="downloads-value">0</span><span class="text-lg">+</span></div><div class="stat-label">Downloads</div></div>
          <div class="stat-item"><div class="stat-value"><i data-lucide="star" class="h-5 w-5"></i><span data-target="4.9" id="rating-value">0.0</span></div><div class="stat-label">Rating</div></div>
          <div class="stat-item"><div class="stat-value"><i data-lucide="message-square" class="h-5 w-5"></i><span data-target="1200" id="reviews-value">0</span><span class="text-lg">+</span></div><div class="stat-label">Success Graduates</div></div>
        </div>

        <!-- PRICING CONTAINER (Will be populated by JS) -->
        <div id="pricingContainer" class="flex items-center gap-3"></div>

        <!-- BUTTONS CONTAINER -->
        <div class="flex items-center flex-wrap gap-4 mt-4">
            <!-- BUY BUTTON (RESIZED SMALLER) -->
            <a id="buyBtn" href="#buy" class="cta-btn inline-flex items-center gap-2 rounded-xl bg-gradient-to-br from-indigo-500 to-fuchsia-500 px-4 py-2 text-sm font-semibold shadow-ctaglow transition hover:scale-105 active:scale-95">
              <span>Buy Now</span>
              <i data-lucide="shopping-cart" class="h-4 w-4"></i>
              <span class="cta-shine animate-btnshine"></span>
              <span class="corner-bling"></span>
            </a>

            <!-- UNLOCK BUTTON WRAPPER FOR SNAKE ANIMATION -->
            <div id="unlockContainer" class="snake-container">
                <!-- SNAKE BORDER ELEMENT -->
                <div class="snake-border"></div>
                <!-- UNLOCK BUTTON - Now with White BG/Green Text -->
                <button id="unlockBtn" class="unlock-btn" data-unlocked="false">
                    <i data-lucide="lock-open" class="h-4 w-4"></i> <!-- Smaller Icon -->
                    <span>Access Content</span>
                </button>
            </div>
        </div>

      </div>
    </div>

    <div data-aos="fade-up" class="mb-2"> <h2 class="text-2xl font-bold mb-2">About this Ebook</h2>
      <p class="text-zinc-300 leading-relaxed">A powerful guide inspired by PremAnand Ji to help you master calmness and inner stability. The concepts are simplified with practical steps you can use in everyday situations. Whether it‚Äôs emotional noise, stress, or expectations, each chapter shows a calm way through. This premium pack also includes HD video, podcast audio, and a mind map to make learning easier in both Hindi and English.</p>
    </div>

    <div data-aos="fade-up" class="py-2 premium-list-container">
        <div class="premium-list-item"><span class="simple-tick">‚úì</span><span class="feature-text"><strong>PREMIUM E-BOOK</strong></span></div>
        <div class="premium-list-item"><span class="simple-tick">‚úì</span><span class="feature-text"><strong>HIGH-QUALITY PODCAST AUDIO</strong></span></div>
        <div class="premium-list-item"><span class="simple-tick">‚úì</span><span class="feature-text"><strong>HD EXPLAINER VIDEO</strong></span></div>
        <div class="premium-list-item"><span class="simple-tick">‚úì</span><span class="feature-text"><strong>MIND MAP</strong></span></div>
        <div class="premium-list-item"><span class="simple-tick">‚úì</span><span class="feature-text"><strong>HINDI AND ENGLISH BOTH LANGUAGE</strong></span></div>
    </div>

    <div data-aos="fade-up" class="py-4"> <h2 class="text-2xl font-bold mb-4">Q&A</h2>
      <div class="divide-y divide-white/10 rounded-xl border border-white/10 bg-white/5">
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">What is the main purpose of the Zero-Disturbance mindset?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">Its purpose is to help you maintain inner stability even during external chaos.</p></div></details>
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">Is this mindset only for spiritual people?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">No. It blends spirituality with psychology, making it suitable for everyone.</p></div></details>
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">How long does it take to see results?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">With daily practice, noticeable calmness appears within 7 to 30 days.</p></div></details>
      </div>
    </div>

    <!-- FEEDBACKS -->
    <div id="feedbacks" data-aos="fade-up" class="py-8"> <h2 class="text-2xl font-bold mb-1">What our readers say</h2>
      <p class="mb-4 text-sm text-zinc-400">These are the most repeated points readers mentioned.</p>
      <div class="space-y-3" id="feedback-list">
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #f59e0b, #f97316);">R</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Rishabh Mehta</div><div class="user-location">India</div></div></div><div class="feedback-date">Aug 2025</div></div><div class="feedback-text">This book made the ideas surprisingly easy to apply the calmness shows in daily life now</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">T</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Tanvi Sharma</div><div class="user-location">India</div></div></div><div class="feedback-date">Sep 2025</div></div><div class="feedback-text">I didn‚Äôt expect such clear explanations... The video and mind map made everything click instantly‚ù§Ô∏è</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 empty"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #ef4444, #dc2626);">A</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Aditya Rao Verma</div><div class="user-location">India</div></div></div><div class="feedback-date">Aug 2025</div></div><div class="feedback-text">The way expectations are explained here changed how I respond to people. Feels refreshing</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">J</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Jatin Kumar Singh</div><div class="user-location">India</div></div></div><div class="feedback-date">Oct 2025</div></div><div class="feedback-text">Honestly .. 5 minute Shanti Sutra ne mera reaction control karne me real help ki Simple aur kaam ka</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #10b981, #059669);">N</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Naina Arora</div><div class="user-location">India</div></div></div><div class="feedback-date">Oct 2025</div></div><div class="feedback-text">Forgiveness ritual felt small but powerful, Amazed how quickly it lifted emotional heaviness‚ù§Ô∏è‚ù§Ô∏è</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i></div></div></div></div>

        <!-- HIDDEN FEEDBACKS -->
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #f97316, #ea580c);">S</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Saurabh Tanwar</div><div class="user-location">India</div></div></div><div class="feedback-date">Sep 2025</div></div><div class="feedback-text">Maun Protocol try kiya aur mind ka noise half ho gaya Didn‚Äôt expect it to work this well</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #6366f1, #4f46e5);">P</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Payal jha</div><div class="user-location">India</div></div></div><div class="feedback-date">Jun 2025</div></div><div class="feedback-text">The structure is clean and modern. Great blend of psychology, reflection, and simple actions...</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 empty"></i></div></div></div></div>
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #ec4899, #db2777);">A</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Aanya sexsena</div><div class="user-location">India</div></div></div><div class="feedback-date">Nov 2025</div></div><div class="feedback-text">Forgiveness ritual improved my sleep. Emotional burden feels much lighter now</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #14b8a6, #0d9488);">D</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Danish yadav</div><div class="user-location">India</div></div></div><div class="feedback-date">Sep 2025</div></div><div class="feedback-text">Short chapters, strong impact. This feels like a guide I‚Äôll come back to again and again</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 empty"></i></div></div></div></div>
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #f59e0b, #d97706);">O</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">omkar pandey</div><div class="user-location">India</div></div></div><div class="feedback-date">Oct 2025</div></div><div class="feedback-text">Yeh price me itna premium content mil raha hai honestly shock ho gaya Worth every rupee‚ù§Ô∏èüòç.</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
      </div>
      <button id="showMore" class="mt-4 inline-block rounded-xl border border-white/10 bg-white/10 px-4 py-2 text-sm text-white hover:bg-white/20 transition">Show More</button>
    </div>
  </section>

  <!-- MODALS -->
  <!-- Download Modal (Used for Language Selection when both are purchased) -->
  <div id="downloadModal" class="modal">
    <!-- ZIP Confirmation Modal (Step 3 in New Flow) -->
    <div id="zipConfirmationModal" class="modal" style="display: none; position: absolute; inset: 0; background-color: rgba(2, 6, 23, 0.9); z-index: 10; border-radius: 12px; align-items: center; justify-content: center; backdrop-filter: blur(2px);">
        <div id="zipConfirmationContent" class="modal-content animate-modalFadeIn" style="max-width: 320px; background-color: #0f172a; color: #e2e8f0; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.15); box-shadow: 0 0 40px rgba(168,85,247,0.3); opacity: 1; transform: none;">
            <h3 class="text-xl font-bold mb-4 text-indigo-300 text-center flex items-center justify-center gap-2"><i data-lucide="shield-check" class="h-6 w-6 text-emerald-400"></i> ZIP Compatibility Check</h3>
            <p class="text-base font-semibold text-zinc-300 text-center mb-5">Can your device open <span class="text-yellow-400">.ZIP files</span>?</p>
            <div class="space-y-3 p-4 bg-zinc-800/50 rounded-lg mb-6 border border-zinc-700">
                <p class="text-xs font-medium text-zinc-400 mb-2 uppercase tracking-wider">If No, follow these 3 steps:</p>
                <div class="flex items-start text-sm text-zinc-300 gap-2"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-400 mt-0.5 flex-shrink-0"></i><span>Open your <strong class="text-white">Play Store / App Store</strong>.</span></div>
                <div class="flex items-start text-sm text-zinc-300 gap-2"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-400 mt-0.5 flex-shrink-0"></i><span>Search and install ZArchiver or <strong class="text-white">Files by Google</strong>.</span></div>
                <div class="flex items-start text-sm text-zinc-300 gap-2"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-400 mt-0.5 flex-shrink-0"></i><span>Return here and click the button below.</span></div>
            </div>
            <!-- NOTE: Button now calls the new flow function -->
            <button id="understandZipBtn" onclick="handleZipConfirmation()" class="no-shine-button w-full text-sm py-3 px-4" style="background-image: linear-gradient(135deg, #10b981, #059669); box-shadow: 0 4px 15px rgba(16,185,129,0.4); margin: 0;">I Understand</button>
        </div>
    </div>

    <!-- Language Selection Modal (Opens only if both languages were purchased) -->
    <div id="languageSelectionModal" class="modal-content" style="max-width: 450px; display: none; background-color: #1e293b; color: white;">
      <h2 class="text-2xl font-bold mb-6 text-indigo-400 text-center">Select Content Language</h2>
      <p class="text-sm text-zinc-300 text-center mb-6">Which version would you like to view?</p>
      <div id="languageSelectionContainer" class="space-y-4 transition-opacity duration-300">
          <button onclick="saveAndOpenDashboard('HINDI')" class="payment-lang-btn text-sm py-3 px-4" style="background-image: linear-gradient(135deg, #dc2626, #ef4444); box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);">
              <i data-lucide="book" class="h-4 w-4"></i> HINDI Edition
          </button>
          <button onclick="saveAndOpenDashboard('ENGLISH')" class="payment-lang-btn text-sm py-3 px-4" style="background-image: linear-gradient(135deg, #3b82f6, #60a5fa); box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);">
              <i data-lucide="globe" class="h-4 w-4"></i> ENGLISH Edition
          </button>
      </div>
    </div>
  </div>


  <!-- Feedback Modal -->
  <div id="feedbackModal" class="modal">
    <div class="modal-content" id="feedbackModalContent" style="max-width: 400px; padding: 30px; background-color: #1e293b; color: #e2e8f0; border: 1px solid rgba(255, 255, 255, 0.1);">
        <h2 class="text-xl font-bold mb-2 text-indigo-400 text-center">Tell us what you think!</h2>
        <p class="text-sm text-zinc-400 text-center mb-6">Your honest feedback helps us improve.</p>
        <div id="feedbackForm">
            <textarea id="feedbackTextarea" rows="4" placeholder="Type your honest feedback here (Required)..." class="feedback-textarea w-full p-3 border border-white/20 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm text-white bg-transparent transition duration-300"></textarea>
            <div class="flex flex-col gap-3 mt-4">
                <button id="submitFeedbackBtn" class="no-shine-button w-full" style="background-image: linear-gradient(135deg, #6366f1, #a855f7); margin-top: 0px;" onclick="submitFeedback()"><i data-lucide="send" class="h-5 w-5"></i><span id="submitFeedbackText">Submit Feedback</span></button>
                <button id="noThanksBtn" class="w-full text-sm font-semibold text-zinc-400 hover:text-white transition" onclick="closeFeedbackModal(true)">No Thanks, take me back</button>
            </div>
        </div>
        <div id="feedbackSuccess" class="text-center py-8 hidden">
            <i data-lucide="check-circle" class="h-10 w-10 text-emerald-400 mx-auto mb-4 text-emerald-500 filter drop-shadow-md"></i><h3 class="text-xl font-bold text-emerald-400">Thanks for your feedback!</h3><p class="text-sm text-zinc-300 mt-2">Redirecting you to the library...</p>
        </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div id="paymentModal" class="modal">
    <div class="modal-content" id="paymentModalContent" style="max-width: 500px; padding: 0; background-color: #111827;">
        <button id="paymentModalCloseButton" onclick="openConfirmationModal()" style="position: absolute; top: 12px; right: 12px; z-index: 2020;"><i data-lucide="x" class="h-6 w-6 text-zinc-400 hover:text-white"></i></button>
        <div id="paymentContainer" style="width: 100%; height: 550px; position: relative;">
            <div id="topShield" class="invisible-shield" style="top: 0;"></div>
            <div id="bottomShield" class="invisible-shield" style="bottom: 0;"></div>
            <div id="paymentLoader" style="position: absolute; inset: 0; background-color: #111827; display: none; align-items: center; justify-content: center; flex-direction: column; z-index: 20;">
                <div class="jumping-loader"><div class="ball"></div><div class="ball"></div><div class="ball"></div></div>
                <p class="mt-8 text-lg font-semibold text-indigo-400">Processing...</p>
            </div>
            <div id="paymentLangSelection" style="display: none; position: absolute; inset: 0; background-color: #111827; z-index: 15; flex-direction: column; align-items: center; justify-content: center; padding: 30px;">
                <h3 class="text-xl font-bold text-white mb-6 text-center">Choose your language</h3>
                <button onclick="handlePaymentLanguageSelection('HINDI')" class="payment-lang-btn"><span class="btn-shine"></span><i data-lucide="book" class="h-5 w-5 text-fuchsia-400"></i>Hindi<i data-lucide="arrow-right" class="h-4 w-4 ml-auto text-zinc-400"></i></button>
                <button onclick="handlePaymentLanguageSelection('ENGLISH')" class="payment-lang-btn"><span class="btn-shine"></span><i data-lucide="globe" class="h-5 w-5 text-indigo-400"></i>English<i data-lucide="arrow-right" class="h-4 w-4 ml-auto text-zinc-400"></i></button>
            </div>
            <iframe id="cashfreeIframe" src="" frameborder="0" width="100%" height="100%" style="border-radius: 12px; display: none;" sandbox="allow-forms allow-scripts allow-modals allow-popups allow-same-origin allow-top-navigation"></iframe>
        </div>
        <p class="text-xs text-zinc-500 text-center py-2">Powered by Cashfree Payments</p>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div id="confirmationModal">
    <div id="confirmationContent">
        <div class="mb-4"><i data-lucide="alert-triangle" class="h-8 w-8 text-red-400 mx-auto mb-2"></i><p class="conf-text-glow text-lg">Are you sure to exit payment?</p></div>
        <p class="text-sm text-zinc-300 mb-6">Exiting now may cancel your transaction. Your payment information is secure.</p>
        <div class="flex flex-col gap-3">
            <button id="cancelExitBtn" class="download-button w-full" style="background-image: linear-gradient(135deg, #ef4444, #dc2626); margin-top: 0px;" onclick="confirmExitPayment(false)"><i data-lucide="check" class="h-5 w-5"></i>No, Continue Payment</button>
            <button id="confirmExitBtn" class="w-full text-sm font-semibold text-zinc-400 hover:text-white transition" onclick="confirmExitPayment(true)">Yes, Exit Payment</button>
        </div>
    </div>
  </div>

  <!-- PRODUCT VIEWER MODAL (DASHBOARD) -->
  <div id="productViewerModal" class="modal">
      <div id="productViewerContent" class="modal-content animate-modalFadeIn">
          <div class="viewer-header">
              <h3 class="text-lg font-bold text-white flex items-center gap-2"><i data-lucide="package-open" class="h-5 w-5 text-emerald-400"></i> <span id="dashboardTitle">Premium Content</span></h3>
              <!-- Top Right: Download All Files -->
              <button onclick="handleDownloadBundleClick()" class="flex items-center gap-2 text-zinc-400 hover:text-white transition p-1 rounded-lg">
                  <i data-lucide="download" class="h-5 w-5"></i>
                  <span class="text-xs font-medium uppercase tracking-wider hidden sm:inline">Download All Files</span>
              </button>
          </div>

          <!-- Language Switcher in Header (Optional, for easy access) -->
          <div id="dashboardLangSwitcher" class="bg-gray-800/50 p-2 border-b border-white/10 flex justify-center gap-4 text-sm font-medium hidden">
               <span class="text-zinc-400">Viewing:</span>
               <button onclick="saveAndOpenDashboard('HINDI')" class="text-red-400 hover:text-red-300 transition underline">HINDI</button>
               <span class="text-zinc-600">|</span>
               <button onclick="saveAndOpenDashboard('ENGLISH')" class="text-blue-400 hover:text-blue-300 transition underline">ENGLISH</button>
          </div>

          <div class="viewer-body">
              <div class="viewer-sidebar">
                  <!-- Tabs will be updated by JS based on productConfig -->
                  <div id="tab-video" class="viewer-tab active" onclick="switchViewerTab('video')"><i data-lucide="play-circle" class="h-4 w-4"></i> Video Class</div>
                  <div id="tab-audio" class="viewer-tab" onclick="switchViewerTab('audio')"><i data-lucide="headphones" class="h-4 w-4"></i> Audio Podcast</div>
                  <div id="tab-pdf" class="viewer-tab" onclick="switchViewerTab('pdf')"><i data-lucide="file-text" class="h-4 w-4"></i> eBook PDF</div>
                  <div id="tab-image" class="viewer-tab" onclick="switchViewerTab('image')"><i data-lucide="image" class="h-4 w-4"></i> Mind Map</div>
              </div>
              <div class="viewer-main">

                  <!-- VIDEO SECTION -->
                  <div id="view-video" class="viewer-section active">
                      <div class="w-full max-w-2xl bg-black rounded-lg overflow-hidden border border-zinc-700 shadow-2xl mb-4">
                          <video id="videoSource" controls class="w-full h-auto" poster="https://bookmintor.shop/images/Full%20Package%20Ebook,%20Audio,%20Video%20&%20Mind%20Map%20(5).png">
                              <source src="" type="video/mp4">
                              Your browser does support the video tag.
                          </video>
                      </div>
                      <!-- Sleek Download Icon next to content -->
                      <button onclick="handleSingleDownload('video')" class="text-zinc-400 hover:text-white flex items-center gap-2 text-sm">
                          <i data-lucide="download" class="h-4 w-4"></i> Download Video File
                      </button>
                  </div>

                  <!-- AUDIO SECTION -->
                  <div id="view-audio" class="viewer-section">
                      <div class="flex flex-col items-center justify-center text-center p-8 bg-[#1e293b] rounded-xl border border-zinc-700 w-full max-w-md">
                          <div class="w-24 h-24 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center mb-6 shadow-glow"><i data-lucide="mic" class="h-10 w-10 text-white"></i></div>
                          <h4 class="text-xl font-bold mb-2">Zero-Disturbance Audio Guide</h4>
                          <audio id="audioSource" controls class="w-full min-w-[300px] mb-4">
                              <source src="" type="audio/mpeg">
                          </audio>
                          <!-- Sleek Download Icon next to content -->
                          <button onclick="handleSingleDownload('audio')" class="text-zinc-400 hover:text-white flex items-center gap-2 text-sm">
                              <i data-lucide="download" class="h-4 w-4"></i> Download Audio File
                          </button>
                      </div>
                  </div>

                  <!-- PDF SECTION -->
                  <div id="view-pdf" class="viewer-section"><div class="text-center">
                    <i data-lucide="file-text" class="h-16 w-16 text-zinc-600 mx-auto mb-4"></i>
                    <p class="text-zinc-300 mb-4">Click to view in your browser or download the full PDF guide.</p>
                    <button id="pdfSourceBtn" onclick="handleSingleDownload('pdf')" class="px-6 py-3 bg-indigo-600 rounded-lg text-white font-bold hover:bg-indigo-500 transition flex items-center gap-2 mx-auto">
                        <i data-lucide="download" class="h-5 w-5"></i> Download/Open PDF
                    </button>
                  </div></div>

                  <!-- IMAGE SECTION -->
                  <div id="view-image" class="viewer-section flex-col">
                      <div class="flex justify-between w-full max-w-2xl mb-2 items-center">
                          <p class="text-zinc-400 text-xs">Click to Zoom</p>
                          <!-- Sleek Download Icon next to content -->
                          <button onclick="handleSingleDownload('image')" class="text-zinc-400 hover:text-white flex items-center gap-2 text-sm">
                              <i data-lucide="download" class="h-4 w-4"></i> Save Image
                          </button>
                      </div>
                      <img id="imageSource" onclick="this.classList.toggle('zoomed')" src="" class="viewer-zoom-img" alt="Mind Map">
                  </div>
              </div>
          </div>
      </div>
  </div>

  <footer class="mt-12 border-t border-white/10 py-8 text-center text-sm text-zinc-400">¬© <span id="year"></span> BookMintor. All rights reserved.</footer>

  <script>
    // =========================================
    // 1. PRODUCT CONFIGURATION (Toggle Features)
    // =========================================
    // Change these to true/false to show/hide specific sections in dashboard
    const productConfig = {
        showVideo: true,
        showAudio: true,
        showPdf: true,
        showMindmap: true // Enable mindmap to show updated features
    };

    // --- CONFIGURATION ---
    const IS_SALE_ACTIVE = true; // SALE ON/OFF Control
    const SOURCE_IMAGE = 'https://bookmintor.shop/images/Full%20Package%20Ebook,%20Audio,%20Video%20&%20Mind%20Map%20(5).png';
    const PRODUCT_UNIQUE_ID = 'premanand_mindset_code_002';
    const PAYMENT_URL = "https://payments.cashfree.com/forms/dsdfg2";
    const SECRET_KEY = 'EBOOK_SECRET_K3Y_V2P8Q6R4S7T9W1X5Z0';
    const REDIRECT_URL = 'https://bookmintor.shop/spirituality';

    // Dummy URLs for demonstration. Replace with actual file paths.
    const ZIP_URLS = {
        HINDI: "https://bookmintor-cpu45432f34fwefwfds46fqwfq.github.io/resource-library/spiritual/%20%20%20ebook1/extras/PremAnand%20Ji%E2%80%99s%20Zero-Disturbance%20Mindset%20Code%20(HINDI%20EDITION).zip",
        ENGLISH: "https://bookmintor-cpu45432f34fwefwfds46fqwfq.github.io/resource-library/spiritual/%20%20%20ebook1/extras/PremAnand%20Ji%E2%80%99s%20Zero-Disturbance%20Mindset%20Code%20(ENGLISH%20EDITION).zip"
    };

    // --- PRODUCT CONTENT LINKS (PASTE YOUR LINKS HERE) ---
    const CONTENT_URLS = {
        HINDI: {
            VIDEO: "https://bookmintor-cpu45432f34fwefwfds46fqwfq.github.io/resource-library/spiritual/%20%20%20ebook1/mockups/%E0%A4%AA%E0%A5%8D%E0%A4%B0%E0%A5%87%E0%A4%AE%E0%A4%BE%E0%A4%A8%E0%A4%82%E0%A4%A1_%E0%A4%9C%E0%A5%80__%E0%A4%9C%E0%A4%BC%E0%A5%80%E0%A4%B0%E0%A5%8B-%E0%A4%A1%E0%A4%BF%E0%A4%B8%E0%A5%8D%E0%A4%9F%E0%A4%B0%E0%A5%8D%E0%A4%AC%E0%A5%87%E0%A4%82%E0%A4%B8_%E0%A4%95%E0%A5%8B%E0%A4%A1%20(EXPLAINER%20VIDEO).mp4",
            AUDIO: "https://placehold.co/600x400/0f172a/94a3b8?text=Hindi%20Audio%20Link.mp3",
            PDF: "https://placehold.co/600x400/0f172a/94a3b8?text=Hindi%20PDF%20Link.pdf",
            MINDMAP: "https://placehold.co/600x400/0f172a/94a3b8?text=Hindi%20Mindmap%20Image.png"
        },
        ENGLISH: {
            VIDEO: "https://placehold.co/600x400/0f172a/94a3b8?text=English%20Video%20Link.mp4",
            AUDIO: "https://placehold.co/600x400/0f172a/94a3b8?text=English%20Audio%20Link.mp3",
            PDF: "https://placehold.co/600x400/0f172a/94a3b8?text=English%20PDF%20Link.pdf",
            MINDMAP: "https://placehold.co/600x400/0f172a/94a3b8?text=English%20Mindmap%20Image.png"
        }
    };
    const SCREENSHOT_URLS = [
        'https://bookmintor.shop/bundels/ChatGPT%20Image%20Nov%2011,%202025,%2009_54_38%20AM.png',
        'https://bookmintor.shop/bundels/screnshorts/ChatGPT%20Image%20Nov%2011,%202025,%2008_44_01%20AM.png',
        'https://bookmintor.shop/bundels/screnshorts/ChatGPT%20Image%20Nov%2011,%202025,%2008_44_35%20AM.png',
        'https://bookmintor.shop/bundels/screnshorts/Untitled%20design.png',
    ];

    // --- DOM ELEMENTS ---
    const cover = document.getElementById('coverFace');
    const coverImg = document.getElementById('coverImg');
    const coverShine = document.getElementById('coverShine');
    const loadingSpin = document.getElementById('loadingSpin');
    const downloadModal = document.getElementById('downloadModal'); // The main modal container for language selection
    const languageSelectionModal = document.getElementById('languageSelectionModal'); // The language selection content
    const zipConfirmationModal = document.getElementById('zipConfirmationModal'); // The ZIP check modal container
    const zipConfirmationContent = document.getElementById('zipConfirmationContent');
    const toastNotification = document.getElementById('toastNotification');
    const buyBtn = document.getElementById('buyBtn');

    // Elements for Unlock & Snake Animation
    const unlockBtn = document.getElementById('unlockBtn');
    const unlockContainer = document.getElementById('unlockContainer');

    const productViewerModal = document.getElementById('productViewerModal');
    const dashboardLangSwitcher = document.getElementById('dashboardLangSwitcher');

    // Other elements
    const paymentModal = document.getElementById('paymentModal');
    const paymentModalContent = document.getElementById('paymentModalContent');
    const paymentLoader = document.getElementById('paymentLoader');
    const cashfreeIframe = document.getElementById('cashfreeIframe');
    const confirmationModal = document.getElementById('confirmationModal');
    const customTagContainer = document.getElementById('custom-tag-container');
    const paymentLangSelection = document.getElementById('paymentLangSelection');
    const previewOverlay = document.getElementById('previewOverlay');
    const previewIndicator = document.getElementById('previewIndicator');
    const logoImg = document.getElementById('logoImg');
    const logoShine = document.getElementById('logoShine');
    const pdfSourceBtn = document.getElementById('pdfSourceBtn');


    // --- LOGO LOADING LOGIC ---
    if (logoImg.complete) {
        logoShine.style.display = 'none';
        logoImg.classList.remove('opacity-0');
    } else {
        logoImg.onload = () => {
            logoShine.style.display = 'none';
            logoImg.classList.remove('opacity-0');
        };
    }

    // --- SALE LOGIC ---
    if (IS_SALE_ACTIVE) {
        document.getElementById('saleBanner').style.display = 'block';
        document.getElementById('pricingContainer').innerHTML = `
            <span class="text-4xl font-bold text-brandGreen" style="text-shadow: 0 0 10px rgba(34, 197, 94, 0.3);">‚Çπ209</span>
            <span class="text-lg text-zinc-500 line-through decoration-zinc-500/50">‚Çπ1699</span>
            <span class="px-2 py-1 bg-[#064e3b] text-brandGreen rounded-md text-xs font-bold border border-brandGreen/20 shadow-saleGlow">88% OFF</span>
        `;
    } else {
        document.getElementById('saleBanner').style.display = 'none';
        document.getElementById('pricingContainer').innerHTML = `<span class="text-2xl font-bold text-white">‚Çπ1699</span> <span class="text-sm text-zinc-400 font-normal">Standard Price</span>`;
    }

    // --- ROLLING TEXT (No Change) ---
    const TRUST_PHRASES = ["Trending", "Bestseller", "4.9/5 Rated", "Instant Access", "High Demand"];
    let phraseIndex = 0;
    function updateTag() {
        if (!customTagContainer) return;
        customTagContainer.innerHTML = `<div class="subtle-tag"><i data-lucide="zap" class="h-3 w-3 text-indigo-300"></i><div class="tag-text-wrapper"><span class="tag-text" id="rollingText">${TRUST_PHRASES[0]}</span></div><span class="tag-shine"></span></div>`;
        lucide.createIcons();
        setInterval(() => {
            phraseIndex = (phraseIndex + 1) % TRUST_PHRASES.length;
            const textEl = document.getElementById('rollingText');
            if(textEl) {
                textEl.classList.remove('animate-rollUpSmooth');
                void textEl.offsetWidth;
                textEl.textContent = TRUST_PHRASES[phraseIndex];
                textEl.classList.add('animate-rollUpSmooth');
            }
        }, 2500);
    }
    updateTag();

    // --- PRELOAD LOGIC (No Change) ---
    function preloadAllImages() {
        cover.setAttribute('aria-busy', 'true');
        const imageUrls = [SOURCE_IMAGE, ...SCREENSHOT_URLS];
        const promises = imageUrls.map(url => new Promise((resolve) => {
            const img = new Image(); img.src = url; img.onload = resolve; img.onerror = resolve;
        }));

        Promise.all(promises).then(() => {
            coverImg.src = SOURCE_IMAGE;
            requestAnimationFrame(()=> { coverImg.style.opacity = '0.6'; coverImg.style.transform = 'scale(1)'; });
            setTimeout(() => {
                coverImg.style.opacity = '1';
                coverShine.style.transition = 'opacity 0.32s ease'; coverShine.style.opacity = '0';
                loadingSpin.style.opacity = '0';
                setTimeout(()=> {
                    coverShine.style.display = 'none'; loadingSpin.style.display = 'none';
                    cover.classList.add('loaded'); cover.setAttribute('aria-busy','false');
                    previewIndicator.style.display = 'block';
                    setTimeout(() => { previewIndicator.style.opacity = '0'; setTimeout(() => { previewIndicator.style.display = 'none'; }, 500); }, 4000);
                }, 450);
            }, 700);
        });
    }
    preloadAllImages();

    // --- PREVIEW LOGIC (Slight change to handle event propagation) ---
    let currentImageIndex = 0;
    function showPreviewImage(index) {
        if (index >= SCREENSHOT_URLS.length) index = 0; else if (index < 0) index = SCREENSHOT_URLS.length - 1;
        currentImageIndex = index;
        const previewShine = document.getElementById('previewShine'); // Re-get element
        const imageCounter = document.getElementById('imageCounter'); // Re-get element
        previewShine.style.display = 'block'; previewScreenshot.style.opacity = '0.5';
        const tempImg = new Image(); tempImg.src = SCREENSHOT_URLS[currentImageIndex];
        tempImg.onload = () => {
            previewShine.style.display = 'none'; previewScreenshot.src = tempImg.src;
            imageCounter.textContent = `${currentImageIndex + 1}/${SCREENSHOT_URLS.length}`;
            previewScreenshot.style.opacity = '1';
            previewScreenshot.classList.remove('animate-subtleZoomIn');
            void previewScreenshot.offsetWidth;
            previewScreenshot.classList.add('animate-subtleZoomIn');
        };
    }
    cover.addEventListener('click', (event) => {
        if (previewOverlay.style.opacity === '1') { event.stopPropagation(); showPreviewImage(currentImageIndex + 1); }
        else { event.preventDefault(); coverImg.style.opacity = '0'; previewOverlay.style.opacity = '1'; previewOverlay.style.pointerEvents = 'auto'; currentImageIndex = -1; showPreviewImage(0); lucide.createIcons(); previewIndicator.style.display = 'none'; }
    });
    function exitPreview(event) {
        if (event) event.stopPropagation();
        previewScreenshot.classList.remove('animate-subtleZoomIn');
        setTimeout(() => { previewOverlay.style.opacity = '0'; previewOverlay.style.pointerEvents = 'none'; previewScreenshot.style.opacity = '0'; coverImg.style.opacity = '1'; }, 300);
    }

    // =========================================
    // 2. DASHBOARD / VIEWER LOGIC
    // =========================================
    let currentContentLanguage = 'HINDI'; // Default language

    function switchViewerTab(tabId) {
        if (!productConfig) return;

        // Pause any media before switching tabs
        document.querySelectorAll('video, audio').forEach(v => v.pause());
        
        // Hide all tabs & sections
        document.querySelectorAll('.viewer-sidebar .viewer-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.viewer-main .viewer-section').forEach(s => s.classList.remove('active'));

        const clickedTab = document.getElementById(`tab-${tabId}`);
        const clickedSection = document.getElementById(`view-${tabId}`);

        if(clickedTab && clickedSection) {
            clickedTab.classList.add('active');
            clickedSection.classList.add('active');
        }
    }

    function openViewerModal(lang) {
        if (lang) {
            currentContentLanguage = lang;
            // Also update local storage if we manually select language
            localStorage.setItem('lang_' + PRODUCT_UNIQUE_ID, lang); 
        } else {
             // If no lang provided, try to load from local storage
             currentContentLanguage = localStorage.getItem('lang_' + PRODUCT_UNIQUE_ID) || 'HINDI';
        }

        try {
            // A. APPLY CONFIG VISIBILITY
            const tabVideo = document.getElementById('tab-video');
            const tabAudio = document.getElementById('tab-audio');
            const tabPdf = document.getElementById('tab-pdf');
            const tabImage = document.getElementById('tab-image');

            if(tabVideo) tabVideo.style.display = productConfig.showVideo ? 'flex' : 'none';
            if(tabAudio) tabAudio.style.display = productConfig.showAudio ? 'flex' : 'none';
            if(tabPdf) tabPdf.style.display = productConfig.showPdf ? 'flex' : 'none';
            if(tabImage) tabImage.style.display = productConfig.showMindmap ? 'flex' : 'none';

            // B. SETUP CONTENT based on currentContentLanguage
            const content = CONTENT_URLS[currentContentLanguage] || CONTENT_URLS.HINDI; // Fallback
            const isDualLang = unlockContainer.getAttribute('data-unlocked') === 'BOTH';

            // Set Modal Title
            document.getElementById('dashboardTitle').textContent = `Premium Content (${currentContentLanguage})`;

            // Show/Hide Language Switcher
            dashboardLangSwitcher.style.display = isDualLang ? 'flex' : 'none';

            // --- SINGLE FILE DOWNLOAD & SOURCE SETUP ---
            const videoEl = document.getElementById('videoSource');
            const audioEl = document.getElementById('audioSource');
            const imgEl = document.getElementById('imageSource');

            // Setup Video
            if(content.VIDEO && videoEl) {
                const source = videoEl.querySelector('source');
                if(source) { source.src = content.VIDEO; videoEl.load(); }
            }

            // Setup Audio
            if(content.AUDIO && audioEl) {
                const source = audioEl.querySelector('source');
                if(source) { source.src = content.AUDIO; audioEl.load(); }
            }

            // Setup Image
            if(content.MINDMAP && imgEl) {
                imgEl.src = content.MINDMAP;
            }

            productViewerModal.style.display = 'flex';
            productViewerContent.classList.add('animate-modalFadeIn'); // Ensure modal animation runs

            // C. AUTO-SELECT FIRST AVAILABLE TAB
            if (productConfig.showVideo) switchViewerTab('video');
            else if (productConfig.showAudio) switchViewerTab('audio');
            else if (productConfig.showPdf) switchViewerTab('pdf');
            else if (productConfig.showMindmap) switchViewerTab('image');

            lucide.createIcons(); // Re-create icons for the modal
        } catch(e) {
            console.error("Dashboard Error:", e);
            productViewerModal.style.display = 'flex'; // Force show as fallback
        }
    }

    function closeViewerModal() {
        productViewerContent.classList.remove('animate-modalFadeIn');
        productViewerContent.classList.add('animate-modalFadeOut');

        setTimeout(() => {
            productViewerModal.style.display = 'none';
            productViewerContent.classList.remove('animate-modalFadeOut');
            document.querySelectorAll('video, audio').forEach(v => v.pause());
        }, 400); 
    }

    // New: Handle Smart Multi-Language Logic when clicking the main unlock button
    function handleUnlockClick() {
        // 1. Get the unlocked status from the button data attribute (set during DOM load or post-payment)
        const unlockedStatus = unlockBtn.getAttribute('data-unlocked');

        if (unlockedStatus === 'HINDI') {
            openViewerModal('HINDI');
        } else if (unlockedStatus === 'ENGLISH') {
            openViewerModal('ENGLISH');
        } else if (unlockedStatus === 'BOTH') {
            // Open Language Selection Modal
            downloadModal.style.display = 'flex';
            languageSelectionModal.style.display = 'flex';
            zipConfirmationModal.style.display = 'none';
            languageSelectionModal.classList.add('animate-modalFadeIn');
            lucide.createIcons();
        } else {
             // Fallback for 'false' or missing status - this shouldn't happen if button is visible.
             console.error("Product not fully unlocked or status missing. Status:", unlockedStatus);
             // As a strong fallback, open default language dashboard if local storage has a preferred language
             openViewerModal(localStorage.getItem('lang_' + PRODUCT_UNIQUE_ID));
        }
    }

    // New: Save Language and Open Dashboard (From Language Selection Modal)
    function saveAndOpenDashboard(lang) {
        languageSelectionModal.classList.add('animate-modalFadeOut');
        setTimeout(() => {
            downloadModal.style.display = 'none';
            languageSelectionModal.style.display = 'none';
            languageSelectionModal.classList.remove('animate-modalFadeOut');
            openViewerModal(lang);
        }, 400);
    }

    // New: Centralized Download Handlers (To avoid link previews)
    function handleDownloadBundleClick() {
        const lang = currentContentLanguage;
        const zipUrl = ZIP_URLS[lang];
        window.location.href = zipUrl; // Triggers download/open
    }

    function handleSingleDownload(type) {
        const lang = currentContentLanguage;
        let fileUrl = '';

        if (type === 'video') fileUrl = CONTENT_URLS[lang].VIDEO;
        else if (type === 'audio') fileUrl = CONTENT_URLS[lang].AUDIO;
        else if (type === 'pdf') {
            fileUrl = CONTENT_URLS[lang].PDF;
            // For PDF, we open in a new tab to view, not force download
            window.open(fileUrl, '_blank');
            return;
        }
        else if (type === 'image') fileUrl = CONTENT_URLS[lang].MINDMAP;

        if (fileUrl) {
            // Create a temporary anchor element to trigger download
            const tempLink = document.createElement('a');
            tempLink.href = fileUrl;
            // FIX: Ensure filename is set correctly to avoid generic names
            const filename = fileUrl.substring(fileUrl.lastIndexOf('/') + 1) || `${type}_${lang}.${fileUrl.split('.').pop() || 'file'}`;
            tempLink.download = filename;
            document.body.appendChild(tempLink);
            tempLink.click();
            document.body.removeChild(tempLink);
        } else {
            console.error(`File not found for type: ${type} and language: ${lang}`);
        }
    }

    // FIX: The event listener is attached once here to ensure reliability.
    if(unlockBtn) {
        // Remove previous listener if it existed
        unlockBtn.removeEventListener('click', handleUnlockClick); 
        // Add correct listener
        unlockBtn.addEventListener('click', handleUnlockClick);
    }

    // --- UTILS (Minor additions for click event) ---
    document.querySelectorAll('summary').forEach(summary => {
        summary.addEventListener('click', function(e) {
            e.preventDefault();
            const details = this.parentElement;
            const content = details.querySelector('.details-content');
            if (details.open) {
                content.style.height = content.scrollHeight + 'px'; content.style.opacity = '1';
                void content.offsetWidth;
                content.style.height = '0'; content.style.opacity = '0';
                setTimeout(() => { details.removeAttribute('open'); }, 300);
            } else {
                details.setAttribute('open', ''); content.style.height = '0'; content.style.opacity = '0';
                void content.offsetWidth;
                content.style.height = content.scrollHeight + 'px'; content.style.opacity = '1';
                setTimeout(() => { content.style.height = 'auto'; }, 300);
            }
        });
    });

    document.getElementById('showMore').addEventListener('click', e => {
      const hidden = document.querySelectorAll('.extra-feedback'); const btn = e.target;
      if (hidden.length > 0 && hidden[0].style.display === 'none') { hidden.forEach(el => el.style.display = 'flex'); btn.textContent = 'Show Less'; }
      else { hidden.forEach(el => el.style.display = 'none'); btn.textContent = 'Show More'; }
    });
    document.getElementById('year').textContent = new Date().getFullYear();
    AOS.init({ duration: 800, once: true, offset: 120 });
    lucide.createIcons();

    // Stats Animate (No Change)
    function animateCount(el, start, end, duration) {
        let startTime = null; let isFloat = end % 1 !== 0;
        function step(timestamp) {
            if (!startTime) startTime = timestamp;
            const progress = timestamp - startTime; const pct = Math.min(progress / duration, 1);
            let val = start + (end - start) * pct;
            el.textContent = isFloat ? val.toFixed(1) : Math.floor(val).toLocaleString('en-IN');
            if (pct < 1) window.requestAnimationFrame(step); else el.textContent = isFloat ? end.toFixed(1) : end.toLocaleString('en-IN');
        } window.requestAnimationFrame(step);
    }
    const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
            document.querySelectorAll('.stat-value span[data-target]').forEach(span => {
                const target = parseFloat(span.getAttribute('data-target')); animateCount(span, target % 1 !== 0 ? 0.0 : 0, target, 1800);
            });
            observer.disconnect();
        }
    }, { threshold: 0.5 }); observer.observe(document.getElementById('stats-section'));

    // --- 3. POST PAYMENT & PERMANENT UNLOCK LOGIC (REVISED FLOW) ---
    let postPaymentLanguage = '';

    // Step 2: This function is called immediately after payment success
    function startUnlockProcess(lang) {
        postPaymentLanguage = lang; // Store the language used for payment
        // 1. Show Celebration immediately
        triggerCelebration();

        // 2. Open Zip Confirmation Modal
        downloadModal.style.display = 'flex';
        zipConfirmationModal.style.display = 'flex';
        languageSelectionModal.style.display = 'none'; // Ensure other modal parts are hidden
        lucide.createIcons(); // Re-create icons for the modal
    }

    // Step 4: User clicks "I Understand" on Zip Confirmation modal
    function handleZipConfirmation() {
        // 1. Close ZIP Modal with animation
        zipConfirmationContent.classList.add('animate-modalFadeOut');

        setTimeout(() => {
            zipConfirmationModal.style.display = 'none';
            downloadModal.style.display = 'none'; // Close the main modal container
            zipConfirmationContent.classList.remove('animate-modalFadeOut');

            // 2. Enable Unlock Button and Update Status
            unlockContainer.style.display = 'inline-flex';
            // FIX: Adding snake-active class here is correct.
            unlockContainer.classList.add('snake-active'); 
            unlockBtn.setAttribute('data-unlocked', getUpdatedUnlockStatus(postPaymentLanguage));

            // 3. Page Auto-Scrolls smoothly to center the Green Unlock Button.
            unlockContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });

            // 4. "Product Unlocked" Toast Notification appears
            toastNotification.classList.add('show');
            setTimeout(() => toastNotification.classList.remove('show'), 4000);

            // 5. Snake Animation fades away after its duration (5 seconds)
            setTimeout(() => {
                 // FIX: Ensure the class is removed to complete the transition and glow fade
                 unlockContainer.classList.remove('snake-active');
            }, 5000); // 5 seconds (5000ms) matches CSS animation duration
        }, 400); // Wait for fade-out animation
    }

    // Function to handle the dual language status storage
    function getUpdatedUnlockStatus(newLang) {
        const currentStatus = localStorage.getItem('unlocked_lang_' + PRODUCT_UNIQUE_ID) || '';
        let newStatus = '';

        if (currentStatus.includes(newLang)) {
            newStatus = currentStatus; // Already purchased this one
        } else if (currentStatus.includes('HINDI') && newLang === 'ENGLISH') {
            newStatus = 'HINDI,ENGLISH';
        } else if (currentStatus.includes('ENGLISH') && newLang === 'HINDI') {
            newStatus = 'ENGLISH,HINDI';
        } else {
            newStatus = newLang; // First purchase
        }

        localStorage.setItem('unlocked_lang_' + PRODUCT_UNIQUE_ID, newStatus);

        if (newStatus.includes('HINDI') && newStatus.includes('ENGLISH')) {
            return 'BOTH';
        }
        return newLang;
    }

    // --- Initial Load and Payment Success Handler ---
    document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const paymentStatus = urlParams.get('payment_status');
      const secretKey = urlParams.get('secret_key');
      const isPaymentInitiated = sessionStorage.getItem('payment_initiated');
      const preSelectedLang = sessionStorage.getItem('selected_language');

      // 1. CHECK LOCAL STORAGE
      const unlockedLangs = localStorage.getItem('unlocked_lang_' + PRODUCT_UNIQUE_ID);

      if (unlockedLangs) {
          // If any language is unlocked, show the button
          unlockContainer.style.display = 'inline-flex';
          let status;
          if (unlockedLangs.includes('HINDI') && unlockedLangs.includes('ENGLISH')) {
              status = 'BOTH';
          } else if (unlockedLangs.includes('HINDI')) {
              status = 'HINDI';
          } else if (unlockedLangs.includes('ENGLISH')) {
              status = 'ENGLISH';
          } else {
             // If stored status is corrupted or empty but present, fallback to false
             status = 'false'; 
          }
          unlockBtn.setAttribute('data-unlocked', status);
      }

      // 2. CHECK NEW SUCCESSFUL PAYMENT
      if (paymentStatus === 'success' && secretKey === SECRET_KEY && isPaymentInitiated === 'true') {

        history.replaceState(null, '', window.location.pathname);
        sessionStorage.removeItem('payment_initiated');

        // Update the unlock status in localStorage
        const finalStatus = getUpdatedUnlockStatus(preSelectedLang);
        unlockBtn.setAttribute('data-unlocked', finalStatus);

        history.pushState(null, document.title, location.href);
        window.addEventListener('popstate', function () { history.pushState(null, document.title, location.href); });
        window.onbeforeunload = function() { /* Do nothing to prevent modal conflict */ };

        // --- NEW FLOW START ---
        if (preSelectedLang) {
            startUnlockProcess(preSelectedLang);
        } else {
            // Fallback default
            startUnlockProcess('HINDI');
        }
      }
      lucide.createIcons();
    });

    // --- PAYMENT MODAL LOGIC (Minor cleanup/rename) ---
    let countdownInterval;
    function startTimer() {
        let timeLeft = 240; document.getElementById('paymentTimer').style.display = 'block';
        if(countdownInterval) clearInterval(countdownInterval);
        countdownInterval = setInterval(() => {
            const minutes = Math.floor(timeLeft / 60); const seconds = timeLeft % 60;
            document.getElementById('timerCount').textContent = `${minutes<10?'0':''}${minutes}:${seconds<10?'0':''}${seconds}`;
            timeLeft--; if (timeLeft < 0) closePaymentModal(false);
        }, 1000);
    }
    function openPaymentModal() {
        paymentModal.style.display = 'flex'; paymentModalContent.classList.add('animate-modalFadeIn');
        paymentLoader.style.display = 'none'; cashfreeIframe.style.display = 'none'; paymentLangSelection.style.display = 'flex'; lucide.createIcons();
    }
    function handlePaymentLanguageSelection(lang) {
        paymentLangSelection.style.display = 'none'; paymentLoader.style.display = 'flex';
        sessionStorage.setItem('payment_initiated', 'true');
        sessionStorage.setItem('selected_language', lang);
        cashfreeIframe.src = PAYMENT_URL;
        startTimer();
        setTimeout(() => { paymentLoader.style.display = 'none'; cashfreeIframe.style.display = 'block'; }, 2000);
    }
    function openConfirmationModal() { confirmationModal.style.display = 'flex'; confirmationModal.classList.add('active'); lucide.createIcons(); }
    function confirmExitPayment(shouldExit) {
        confirmationModal.classList.remove('active');
        setTimeout(() => { confirmationModal.style.display = 'none'; if (shouldExit) closePaymentModal(true); }, 400);
    }
    function closePaymentModal() {
        paymentModalContent.classList.add('animate-modalFadeOut'); paymentModal.classList.add('closing');
        if(countdownInterval) clearInterval(countdownInterval);
        document.getElementById('paymentTimer').style.display = 'none';
        setTimeout(() => {
            paymentModal.style.display = 'none'; paymentModalContent.classList.remove('animate-modalFadeOut'); paymentModal.classList.remove('closing'); document.body.style.overflow = '';
        }, 400);
    }
    buyBtn.addEventListener('click', (e) => { e.preventDefault(); openPaymentModal(); });

    // --- CELEBRATION (No Change) ---
    function triggerCelebration() {
        const colors = ['#6366f1', '#a855f7', '#10b981', '#FFD700'];
        confetti({ particleCount: 180, spread: 100, origin: { y: 0.6 }, colors: colors, zIndex: 2000, disableForReducedMotion: true });
    }

    // --- FEEDBACK MODAL (No Change) ---
    function openFeedbackModal() {
        document.body.style.overflow = 'hidden'; feedbackModal.style.display = 'flex';
        feedbackModalContent.classList.add('animate-modalFadeIn'); feedbackForm.style.display = 'block'; feedbackSuccess.style.display = 'none';
        lucide.createIcons();
    }
    function closeFeedbackModal(shouldRedirect = false) {
        feedbackModalContent.classList.add('animate-modalFadeOut'); feedbackModal.classList.add('closing');
        setTimeout(() => {
            feedbackModal.style.display = 'none'; feedbackModalContent.classList.remove('animate-modalFadeOut'); feedbackModal.classList.remove('closing'); document.body.style.overflow = '';
            if (shouldRedirect) window.location.href = REDIRECT_URL;
        }, 400);
    }
    function submitFeedback() {
        const txt = document.getElementById('feedbackTextarea');
        if (txt.value.trim().length === 0) {
            feedbackModalContent.classList.add('animate-shakeModal'); txt.classList.add('border-red-500'); txt.placeholder = '‚ö†Ô∏è Please write something first...';
            setTimeout(() => feedbackModalContent.classList.remove('animate-shakeModal'), 800);
            setTimeout(() => { txt.classList.remove('border-red-500'); txt.placeholder = 'Type your honest feedback here...'; }, 3000); return;
        }
        document.getElementById('submitFeedbackBtn').disabled = true;
        document.getElementById('submitFeedbackText').textContent = 'Sending...';
        setTimeout(() => {
            feedbackForm.style.display = 'none'; feedbackSuccess.style.display = 'block';
            setTimeout(() => closeFeedbackModal(true), 3000);
        }, 1000);
    }
  </script>
</body>
</html>
