<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Topper Error Book â€“ Last 45 Days Survival Guide</title>

  <link rel="icon" type="image/png" href="https://bookmintor.shop/images/logo.png">
  
  <link rel="preload" as="image" href="https://bookmintor.shop/images/Full%20Package%20Ebook,%20Audio,%20Video%20&%20Mind%20Map%20(5).png">

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    document.onkeydown = function(e) {
      if (e.keyCode == 123) return false;
      if (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0) || e.keyCode == 'C'.charCodeAt(0))) return false;
      if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
      if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) return false;
    };
  </script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { brandGreen: '#10b981', brandDark: '#0b0e13' },
          boxShadow: {
            glow: '0 12px 36px -12px rgba(99,102,241,0.7)',
            ctaglow: '0 12px 40px -12px rgba(168,85,247,.7)',
            book: '0 28px 60px -18px rgba(0, 0, 0, 0.65)',
            saleGlow: '0 0 15px rgba(34, 197, 94, 0.4)'
          },
          animation: {
            shine: 'shine 1.6s ease-in-out infinite',
            btnshine: 'btnshine 3.0s ease-in-out infinite',
            slideUp: 'slideUp .45s ease-out forwards',
            glowspin: 'glowspin 1.2s linear infinite',
            modalFadeIn: 'modalFadeIn 0.35s ease-out forwards',
            tagShine: 'tagShine 1.0s ease-in-out infinite',
            shakeInput: 'shakeInput 0.4s ease-in-out 1', 
            redGlow: 'redGlow 2.5s infinite ease-in-out',
            popFloat: 'popFloat 3s ease-in-out infinite',
            pulseArrow: 'pulseArrow 1.2s ease-in-out infinite 0.5s',
            'gradient-shift': 'gradient-shift 8s ease infinite',
            snakeRotate: 'snakeRotate 6s linear infinite',
            priceSlash: 'priceSlash 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards',
            coverFast: 'coverFast 0.45s linear infinite', 
            softPulse: 'softPulse 2s infinite ease-in-out', 
            subtleZoomIn: 'subtleZoomIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
            blackShine: 'blackShine 4s ease-in-out infinite',
            tapRipple: 'tapRipple 1.6s cubic-bezier(0, 0, 0.2, 1) infinite',
            blinkSupport: 'blinkSupport 2s ease-in-out infinite'
          },
          keyframes: {
            shine: { '0%': { transform: 'translateX(-140%)' }, '100%': { transform: 'translateX(140%)' } },
            btnshine: { '0%': { transform: 'translateX(-140%) skewX(-30deg)' }, '100%': { transform: 'translateX(220%) skewX(-30deg)' } },
            blackShine: { '0%': { transform: 'translateX(-140%) skewX(-30deg)' }, '100%': { transform: 'translateX(220%) skewX(-30deg)' } },
            slideUp: { '0%': {opacity:'0', transform:'translateY(20px)'}, '100%':{opacity:'1', transform:'translateY(0)'} },
            glowspin: { '0%': { transform: 'rotate(0deg)' }, '100%': { transform: 'rotate(360deg)' } },
            modalFadeIn: { '0%': { opacity: 0, transform: 'translateY(20px) scale(0.95)' }, '100%': { opacity: 1, transform: 'translateY(0) scale(1)' } },
            tagShine: { '0%': { transform: 'translateX(-140%) skewX(-30deg)' }, '100%': { transform: 'translateX(220%) skewX(-30deg)' } },
            shakeInput: { '0%, 100%': { transform: 'translateX(0)' }, '20%, 60%': { transform: 'translateX(-5px)' }, '40%, 80%': { transform: 'translateX(5px)' } },
            redGlow: { '0%, 100%': { boxShadow: '0 0 8px rgba(239, 68, 68, 0.6)' }, '50%': { boxShadow: '0 0 16px rgba(239, 68, 68, 1)' } },
            popFloat: { '0%, 100%': { transform: 'scale(1) translateY(0px)', opacity: 0.9 }, '50%': { transform: 'scale(1.05) translateY(-2px)', opacity: 1 } },
            pulseArrow: { '0%': { transform: 'translateX(0px)', opacity: 0.5 }, '50%': { transform: 'translateX(6px)', opacity: 1 }, '100%': { transform: 'translateX(0px)', opacity: 0.5 } },
            'gradient-shift': { '0%': { 'background-position': '0% 50%' }, '50%': { 'background-position': '100% 50%' }, '100%': { 'background-position': '0% 50%' } },
            snakeRotate: { '0%': { transform: 'translate(-50%, -50%) rotate(0deg)' }, '100%': { transform: 'translate(-50%, -50%) rotate(360deg)' } },
            priceSlash: { '0%': { transform: 'scale(1)', opacity: 1 }, '50%': { transform: 'scale(1.2) rotate(-10deg)', opacity: 0.8 }, '100%': { transform: 'scale(0) rotate(20deg)', opacity: 0 } },
            coverFast: { '0%': { transform: 'translateX(-160%) skewX(-10deg)' }, '100%': { transform: 'translateX(160%) skewX(-10deg)' } },
            softPulse: { '0%, 100%': { opacity: 1 }, '50%': { opacity: 0.8 } },
            subtleZoomIn: { '0%': { opacity: 0, transform: 'scale(0.96) translateY(5px)' }, '100%': { opacity: 1, transform: 'scale(1) translateY(0)' } },
            tapRipple: { '0%': { transform: 'scale(0.8)', opacity: '0.6' }, '100%': { transform: 'scale(2.2)', opacity: '0' } },
            blinkSupport: { '0%, 100%': { opacity: '1', transform: 'scale(1)' }, '50%': { opacity: '0.7', transform: 'scale(0.95)' } }
          }
        }
      }
    }
  </script>

  <style>
    /* BASIC SETUP */
    @keyframes waveJump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    @keyframes gradient-shift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    @keyframes snakeRotate { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }

    body { font-family:'Poppins',sans-serif; overflow-x: hidden; scroll-behavior: smooth; }
    
    /* --- FIXED SMOOTH ROLLING TEXT CSS START --- */
    .rolling-text-list {
        padding: 0;
        margin: 0;
        list-style: none;
        height: auto;
        display: block;
        animation: scrollText 16s infinite cubic-bezier(0.25, 1, 0.5, 1);
    }
    .rolling-text-list li {
        height: 26px; /* Matches container height */
        line-height: 26px;
        display: flex;
        align-items: center; /* Ensures text is perfectly centered vertically in 26px */
        white-space: nowrap;
    }
    
    @keyframes scrollText {
        0%, 9%       { transform: translateY(0px); }
        12.5%, 21.5% { transform: translateY(-26px); } 
        25%, 34%     { transform: translateY(-52px); } 
        37.5%, 46.5% { transform: translateY(-78px); } 
        50%, 59%     { transform: translateY(-104px); } 
        62.5%, 71.5% { transform: translateY(-130px); } 
        75%, 84%     { transform: translateY(-156px); } 
        87.5%, 96.5% { transform: translateY(-182px); } 
        100%         { transform: translateY(-208px); } 
    }
    /* --- FIXED SMOOTH ROLLING TEXT CSS END --- */

    /* BUNDLE SHOWCASE */
    .bundle-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 16px 0; }
    .bundle-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 10px 5px; text-align: center; transition: all 0.3s ease; display: flex; flex-direction: column; align-items: center; justify-content: center; }
    .bundle-card:hover { background: rgba(255, 255, 255, 0.1); transform: translateY(-2px); border-color: rgba(168, 85, 247, 0.4); }
    .bundle-icon-wrap { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 6px; background: rgba(255, 255, 255, 0.05); }
    .bundle-label { font-size: 0.7rem; font-weight: 600; color: #cbd5e1; line-height: 1.1; }

    /* COVER SHINE & SPINNER */
    .cover { position:absolute; width: 100%; height: 100%; left: 0; top: 0; transform: translateZ(12px) rotateY(0deg); border-radius: 8px; overflow: hidden; box-shadow: 0 20px 40px rgba(0,0,0,0.45); background: linear-gradient(180deg,#111217,#0f1216); }
    .cover img { width:100%; height:100%; object-fit:cover; display:block; transition: opacity 0.28s ease, transform 0.28s ease; opacity:0; transform: scale(1.02); will-change: opacity, transform; }
    #coverFace { cursor: pointer; }
    
    .cover-loading-spin { position: absolute; inset: 0; z-index: 7; pointer-events: none; display: flex; align-items: center; justify-content: center; opacity: 1; transition: opacity 0.4s ease-out; }
    .loading-half-wheel { width: 40px; height: 40px; border: 4px solid transparent; border-radius: 50%; border-top-color: #6366f1; border-left-color: #a855f7; box-shadow: 0 0 10px rgba(168, 85, 247, 0.7), inset 0 0 6px rgba(99, 102, 241, 0.5); }
    .cover.loaded .cover-loading-spin { opacity: 0; }
    
    .cover-shine { position:absolute; inset:0; z-index:20; pointer-events:none; background: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.7) 28%, rgba(0,0,0,0.95) 50%, rgba(0,0,0,0.7) 72%, rgba(0,0,0,0) 100%); transform: translateX(-160%) skewX(-10deg); mix-blend-mode: multiply; opacity:0.95; animation: coverFast 0.45s linear infinite; transition: none; filter: blur(8px); }

    /* SNAKE CONTAINER */
    .snake-container { position: relative; display: none; padding: 3px; border-radius: 12px; z-index: 100; margin-left: 0; background: transparent; overflow: hidden; box-shadow: 0 0 20px rgba(16, 185, 129, 0.2); }
    .snake-border { position: absolute; top: 50%; left: 50%; width: 250%; height: 250%; background: conic-gradient(transparent 0deg, transparent 260deg, #10b981 300deg, #34d399 330deg, #6ee7b7 350deg, transparent 360deg); animation: snakeRotate 6s linear infinite; z-index: 0; pointer-events: none; }
    .snake-glow { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 110%; height: 110%; background: #10b981; filter: blur(25px); opacity: 0.5; z-index: -1; animation: softPulse 2s ease-in-out infinite; }
    .unlock-btn { position: relative; z-index: 10; display: flex; align-items: center; gap: 6px; background-color: #10b981; color: white; padding: 8px 16px; border-radius: 10px; font-weight: 700; font-size: 0.9rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); cursor: pointer; border: none; transition: transform 0.2s, background-color 0.2s; margin: 0; overflow: hidden; }
    .unlock-btn:hover { transform: scale(1.02); background-color: #059669; }
    
    .unlock-btn .btn-shine { position: absolute; inset: -6px; transform: translateX(-140%) skewX(-30deg); background: linear-gradient(90deg,rgba(0,0,0,0) 0%, rgba(0,0,0,0.3) 45%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0) 100%); mix-blend-mode: overlay; pointer-events: none; animation: blackShine 4s ease-in-out infinite; }
    .snake-mask { position: absolute; inset: 2px; background: #0b0e13; border-radius: 11px; z-index: 1; }

    /* CTA BUTTONS */
    .cta-btn{ position:relative; overflow:hidden; box-shadow: 0 8px 30px rgba(124,58,237,0.25); }
    .cta-btn .cta-shine{ position:absolute; inset:-6px; transform:translateX(-140%) skewX(-30deg); background:linear-gradient(90deg,rgba(255,255,255,0) 0%, rgba(255,255,255,0.43) 45%, rgba(255,255,255,0.15) 60%, rgba(255,255,255,0) 100%); transition: opacity 0.2s; opacity: 0.90; mix-blend-mode: screen; pointer-events:none; }
    .cta-btn:hover .cta-shine { opacity: 1; }
    .cta-btn.no-shine .cta-shine { display: none; animation: none; }
    .cta-btn .corner-bling{ pointer-events:none; position:absolute; inset:-6px; border-radius:12px; background:radial-gradient(160px 160px at 0 0, rgba(255,255,255,.65), transparent 60%), radial-gradient(160px 160px at 100% 0, rgba(255,255,255,.5), transparent 60%), radial-gradient(160px 160px at 0 100%, rgba(255,255,255,.5), transparent 60%), radial-gradient(160px 160px at 100% 100%, rgba(255,255,255,.5), transparent 60%); opacity:0; filter: blur(6px); }
    .cta-btn:hover .corner-bling { opacity: .95; }

    /* BOOK 3D */
    .book-wrap { perspective:1600px; display:flex; align-items:center; justify-content:center; }
    .book-3d { width: 240px; height: 340px; position: relative; transform-style: preserve-3d; transform: rotateY(-12deg) rotateX(4deg); transition: transform .35s ease; margin: 12px; }
    .book-3d:hover { transform: rotateY(-8deg) rotateX(6deg) translateY(-8px); }
    .spine { position:absolute; left: -12px; top: 6px; width: 24px; height: calc(100% - 12px); transform-origin: left center; transform: rotateY(90deg) translateX(-12px); border-radius: 8px 0 0 8px; background: linear-gradient(180deg,#e6e6e8,#cfcfd3); box-shadow: inset 0 2px 6px rgba(0,0,0,0.06); }
    .pages { position:absolute; left: -8px; top: 10px; width: 16px; height: calc(100% - 20px); transform: rotateY(-90deg) translateX(-8px); background: linear-gradient(90deg,#fcfbf9,#f0efe9); border-radius: 4px 0 0 4px; box-shadow: inset 0 0 8px rgba(0,0,0,0.08); overflow:hidden; }
    .top-edge { position:absolute; top: -10px; left: 10px; width: calc(100% - 20px); height: 16px; transform: rotateX(90deg) translateY(-10px); background: linear-gradient(180deg,#fbfbfb,#f0efef); border-radius: 8px 8px 0 0; }
    .bottom-edge { position:absolute; bottom: -10px; left: 10px; width: calc(100% - 20px); height: 16px; transform: rotateX(-90deg) translateY(10px); background: linear-gradient(180deg,#fbfbfb,#f0efef); border-radius: 0 0 8px 8px; }
    .book-ghost { position:absolute; bottom: -28px; left: 20px; width: 70%; height: 28px; background: rgba(0,0,0,0.45); border-radius: 50%; filter: blur(16px); transform: rotateX(90deg); }
    @media (max-width:700px){ .book-3d { width: 170px; height: 245px; } }

    /* Support Button styling */
    .cover-support-btn {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 100;
        width: 32px;
        height: 32px;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .cover-support-btn:hover {
        background: rgba(99, 102, 241, 0.6);
        transform: scale(1.1);
        border-color: rgba(255, 255, 255, 0.4);
    }

    /* TAG & STATS */
    /* FIXED: Padding 0 10px ensures text area is full height, align-items:center centers wrapper within tag */
    .subtle-tag { position: relative; overflow: hidden; display: inline-flex; align-items: center; gap: 4px; background-color: rgba(255, 255, 255, 0.08); backdrop-filter: blur(2px); border: 1px solid rgba(255, 255, 255, 0.15); font-size: 0.75rem; font-weight: 700; padding: 0 10px; border-radius: 6px; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2); text-transform: uppercase; letter-spacing: 0.5px; cursor: default; margin-bottom: 8px; height: 26px; min-width: 120px; }
    
    /* FIXED: Changed align-items to flex-start! This keeps list starting from top, preventing the blank/jump issue */
    .tag-text-wrapper { position: relative; height: 100%; display: flex; align-items: flex-start; overflow: hidden; flex-grow: 1; }
    
    .tag-text { position: relative; white-space: nowrap; background-image: linear-gradient(90deg, #a855f7, #6366f1, #e0f2f1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-fill-color: transparent; line-height: 1; background-size: 200% auto; animation: gradient-shift 8s ease infinite; }
    .subtle-tag .tag-shine { position: absolute; inset: -6px; transform: translateX(-140%) skewX(-30deg); background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 45%, rgba(255,255,255,0.1) 60%, rgba(255,255,255,0) 100%); mix-blend-mode: overlay; pointer-events: none; opacity: 0.8; animation: tagShine 3.0s ease-in-out infinite; }
    .stats-section { display: flex; justify-content: space-around; align-items: center; padding: 0; border-top: none; border-bottom: none; margin-top: 16px; }
    .stat-item { text-align: center; flex-grow: 1; padding: 0 8px; }
    .stat-value { font-size: 1.35rem; font-weight: 700; line-height: 1.1; color: #e0f2f1; margin-bottom: 4px; text-shadow: none; display: flex; align-items: center; justify-content: center; gap: 6px; }
    .stat-value svg { color: #a855f7; filter: drop-shadow(0 0 4px rgba(168, 85, 247, 0.7)); }
    .stat-label { font-size: 0.75rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; color: #94a3b8; }
    .star-glow svg { filter: drop-shadow(0 0 4px rgba(251, 191, 36, 0.6)); }
    .star-glow .filled { fill: #fbbf24; color: #fbbf24; }
    .star-glow .half { fill: transparent; color: #fbbf24; }
    .star-glow .empty { color: #475569; opacity: 0.45; }

    /* COUPON */
    .coupon-wrapper { display: flex; align-items: center; gap: 8px; margin-top: 14px; margin-bottom: 8px; }
    .coupon-input { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); color: white; padding: 8px 12px; border-radius: 8px; font-size: 0.85rem; width: 140px; transition: all 0.3s; text-transform: uppercase; letter-spacing: 1px; }
    .coupon-input:focus { border-color: #a855f7; outline: none; box-shadow: 0 0 0 2px rgba(168,85,247,0.2); }
    .coupon-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); color: #cbd5e1; padding: 8px 12px; border-radius: 8px; font-size: 0.8rem; cursor: pointer; transition: all 0.3s; font-weight: 600; }
    .coupon-btn:hover { background: rgba(168,85,247,0.2); color: white; border-color: rgba(168,85,247,0.4); }
    .coupon-applied { border-color: #22c55e !important; color: #22c55e !important; background: rgba(34,197,94,0.1) !important; pointer-events: none; }
    .price-original { position: relative; display: inline-block; color: #9ca3af; text-decoration: line-through; }
    
    /* MODALS */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); z-index: 1000; overflow: auto; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
    .modal-content { position: relative; background-color: #ffffff; color: #1f2937; padding: 30px; border-radius: 12px; width: 85%; max-width: 400px; border: 1px solid rgba(0,0,0,0.1); box-shadow: 0 5px 20px rgba(0,0,0,0.5), 0 0 20px rgba(99,102,241,0.25); opacity: 0; transform: translateY(20px) scale(0.95); }
    #previewOverlay { position: absolute; inset: 0; z-index: 8; background: #111; opacity: 0; transition: opacity 0.3s ease; display: flex; align-items: center; justify-content: center; pointer-events: none; }
    #previewScreenshot { width: 100%; height: 100%; object-fit: cover; opacity: 0; border-radius: 8px; }

    /* PREMIUM TOAST (Top Right) */
    #toastNotification { 
        position: fixed; 
        top: 24px; 
        right: 24px; 
        transform: translateX(120%); 
        background: rgba(15, 23, 42, 0.85); 
        backdrop-filter: blur(12px);
        color: white; 
        padding: 14px 20px; 
        border-radius: 16px; 
        box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1); 
        z-index: 5000; 
        display: flex; 
        align-items: center; 
        gap: 12px; 
        font-weight: 600; 
        font-size: 0.9rem;
        transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1); 
        border-left: 4px solid #10b981;
    }
    #toastNotification.show { transform: translateX(0); }
    #toastNotification.error { border-left-color: #ef4444; }

    /* TIMER */
    #paymentTimer { display: none; position: fixed; top: 10px; left: 50%; transform: translateX(-50%); background: transparent; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.5); font-size: 1.1rem; font-weight: 800; font-family: monospace; z-index: 2010; padding: 4px 10px; border-radius: 8px; }

    /* DASHBOARD */
    #productViewerModal { z-index: 4000; }
    #productViewerContent { width: 95%; max-width: 900px; height: 80vh; padding: 0; background: #0f172a; display: flex; flex-direction: column; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 0 50px rgba(0, 0, 0, 0.8); }
    .viewer-header { padding: 16px 24px; border-bottom: 1px solid rgba(255,255,255,0.08); display: flex; justify-content: space-between; align-items: center; background: rgba(15, 23, 42, 0.95); }
    .viewer-body { flex: 1; display: flex; height: 100%; overflow: hidden; }
    .viewer-sidebar { width: 240px; background: rgba(17, 24, 39, 0.6); border-right: 1px solid rgba(255,255,255,0.08); padding: 20px 12px; display: flex; flex-direction: column; gap: 8px; }
    .viewer-tab { padding: 12px 16px; border-radius: 10px; cursor: pointer; color: #94a3b8; transition: all 0.3s ease; font-size: 0.95rem; display: flex; align-items: center; gap: 12px; font-weight: 500; }
    .viewer-tab.active { background: linear-gradient(90deg, rgba(99,102,241,0.15) 0%, rgba(99,102,241,0) 100%); color: #818cf8; border-left: 3px solid #6366f1; }
    
    /* MODIFICATION 1: Disabled Tab Styling */
    .viewer-tab.tab-disabled { opacity: 0.3; filter: grayscale(1); pointer-events: none; cursor: default; }
    
    .viewer-main { flex: 1; padding: 0; overflow: hidden; background: #020617; position: relative; }
    .viewer-section { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center; position: relative; }
    .viewer-section.active { display: flex; }
    .pdf-container { width: 100%; height: 100%; }
    .mindmap-container { width: 100%; height: 100%; overflow: hidden; display: flex; align-items: center; justify-content: center; cursor: grab; position: relative; }
    .mindmap-container:active { cursor: grabbing; }
    .mindmap-img { max-width: 90%; max-height: 90%; transition: transform 0.1s ease; transform-origin: 0 0; }
    .audio-player-card { width: 100%; max-width: 500px; padding: 30px; background: rgba(255,255,255,0.03); border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); text-align: center; }
    
    .viewer-download-btn { position: absolute; top: 10px; right: 10px; z-index: 50; display: flex; align-items: center; gap: 6px; padding: 8px 12px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.2s; text-decoration: none; }
    .viewer-download-btn:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }

    /* FEEDBACKS */
    .user-avatar { width: 40px; height: 40px; min-width: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1rem; color: white; margin-right: 12px; flex-shrink: 0; }
    .feedback-item { display: flex; align-items: flex-start; padding: 16px; border-radius: 12px; background: rgba(255, 255, 255, 0.05); margin-bottom: 12px; transition: all 0.3s ease; }
    .feedback-item:hover { background: rgba(255, 255, 255, 0.08); transform: translateY(-2px); }
    .feedback-content { flex: 1; }
    .feedback-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
    .user-info { display: flex; align-items: center; }
    .user-details { display: flex; flex-direction: column; }
    .user-name { font-weight: 600; font-size: 0.9rem; color: #e2e8f0; }
    .user-location { font-size: 0.75rem; color: #94a3b8; margin-top: 2px; }
    .feedback-date { font-size: 0.75rem; color: #64748b; text-align: right; }
    .feedback-text { font-size: 0.9rem; line-height: 1.5; color: #cbd5e1; margin-bottom: 8px; }
    .extra-feedback { display: none; }

    /* LOADER BALLS */
    .jumping-loader { display: flex; justify-content: center; align-items: center; height: 60px; }
    .jumping-loader .ball { width: 14px; height: 14px; margin: 0 4px; background-color: #a855f7; border-radius: 50%; display: inline-block; }
    .jumping-loader .ball:nth-child(1) { animation: waveJump 0.8s ease-in-out infinite 0s; }
    .jumping-loader .ball:nth-child(2) { animation: waveJump 0.8s ease-in-out infinite 0.1s; }
    .jumping-loader .ball:nth-child(3) { animation: waveJump 0.8s ease-in-out infinite 0.2s; }

    /* PAYMENT & CONFIRMATION */
    #confirmationModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; align-items: center; justify-content: center; opacity: 0; backdrop-filter: blur(0px); transition: opacity 0.3s ease, backdrop-filter 0.3s ease; }
    #confirmationModal.active { display: flex; opacity: 1; backdrop-filter: blur(4px); }
    #confirmationContent { background: #1e293b; backdrop-filter: none; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 24px; width: 80%; max-width: 380px; text-align: center; color: white; box-shadow: 0 10px 40px 0 rgba(0, 0, 0, 0.5); transition: box-shadow 0.3s ease; }
    .conf-text-glow { color: #f87171; font-weight: 700; font-size: 1.25rem; text-shadow: 0 0 12px rgba(239, 68, 68, 0.8); animation: redGlow 2.5s infinite ease-in-out; }
    .invisible-shield { 
        position: absolute; 
        left: 0; 
        width: 100%; 
        background: transparent; 
        z-index: 25; 
        pointer-events: auto; 
    }
    
    #bottomShield {
        height: 120px; 
    }

    .invisible-shield.inactive {
        pointer-events: none; 
        z-index: 1; 
    }

    .payment-lang-btn { position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 16px; margin-bottom: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; font-weight: 600; font-size: 1.1rem; cursor: pointer; transition: all 0.3s ease; }
    .payment-lang-btn:hover { background: rgba(255,255,255,0.1); border-color: rgba(168, 85, 247, 0.5); transform: translateY(-2px); box-shadow: 0 8px 20px -6px rgba(168, 85, 247, 0.4); }
    .payment-lang-btn .btn-shine { position: absolute; inset: -6px; transform: translateX(-140%) skewX(-30deg); background: linear-gradient(90deg,rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 45%, rgba(255,255,255,0.1) 60%, rgba(255,255,255,0) 100%); mix-blend-mode: overlay; pointer-events: none; animation: btnshine 3.0s ease-in-out infinite; }
    #saleBanner { display: none; background: linear-gradient(90deg, #ef4444, #b91c1c); padding: 8px; text-align: center; font-weight: 700; font-size: 0.9rem; box-shadow: 0 4px 20px rgba(239, 68, 68, 0.4); border-bottom: 1px solid rgba(255,255,255,0.1); }
    
    .download-button { position: relative; overflow: hidden; display: inline-flex; align-items: center; justify-content: center; gap: 8px; background-color: #4CAF50; background-image: linear-gradient(135deg, #4CAF50, #10B981); color: white; padding: 12px 25px; margin-top: 0px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 1.1em; cursor: pointer; border: none; transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.3s; box-shadow: 0 4px 15px rgba(16,185,129,0.4); }
    .no-shine-button { position: relative; overflow: hidden; display: inline-flex; align-items: center; justify-content: center; gap: 8px; color: white; padding: 12px 25px; margin-top: 0px; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 1.1em; cursor: pointer; border: none; transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.3s; background-image: linear-gradient(135deg, #6366f1, #a855f7); box-shadow: 0 4px 15px rgba(168,85,247,0.4); }
    .details-content { overflow: hidden; height: 0; opacity: 0; transition: height 0.3s ease-out, opacity 0.3s ease-out; }
    details[open] summary svg { transform: rotate(180deg); }
    summary { list-style: none; outline: none; }
    summary::-webkit-details-marker { display: none; }
    
    .language-modal-close { position: absolute; top: 10px; right: 10px; background: none; border: none; cursor: pointer; padding: 8px; border-radius: 50%; color: #94a3b8; z-index: 10; transition: color 0.2s; }
    .language-modal-close:hover { color: white; }
    .premium-list-container { margin-top: 10px; padding: 10px; padding-bottom: 0; }
    .premium-list-item { display: flex; align-items: flex-start; margin-bottom: 10px; font-size: 1.0rem; color: #cbd5e1; line-height: 1.4; }
    .premium-list-item strong { color: #e0f2f1; }
    .simple-tick { color: #34d399; filter: drop-shadow(0 0 3px rgba(52, 211, 153, 0.5)); font-size: 1.4rem; line-height: 1; margin-right: 10px; min-width: 20px; font-weight: 900; transform: translateY(-2px); }

    /* New Premium Action Buttons */
    .action-card {
        background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 16px;
        padding: 16px;
        margin-bottom: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 16px;
        width: 100%;
        text-align: left;
    }
    .action-card:hover {
        background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
        border-color: rgba(168,85,247,0.4);
        transform: translateY(-2px);
    }
    .action-icon {
        width: 48px;
        height: 48px;
        background: rgba(168,85,247,0.1);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }
    .action-text h4 { color: #f1f5f9; font-weight: 700; font-size: 1rem; margin-bottom: 2px; }
    .action-text p { color: #94a3b8; font-size: 0.8rem; }

    /* CUSTOM TAP PROMPT CSS */
    #tapPrompt {
        transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @media (max-width: 768px) { 
        .viewer-body { flex-direction: column; } 
        .viewer-sidebar { width: 100%; flex-direction: row; height: auto; padding: 12px; overflow-x: auto; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.08); background: #111827; } 
        .viewer-tab { flex: 0 0 auto; justify-content: center; white-space: nowrap; padding: 10px 14px; font-size: 0.85rem; border-left: none; border-bottom: 3px solid transparent; border-radius: 4px; }
        .viewer-tab.active { background: transparent; border-left: none; border-bottom-color: #6366f1; color: #818cf8; }
    }
  </style>
</head>
<body class="bg-[#0b0e13] text-white selection:bg-indigo-500/30">

  <div id="toastNotification">
      <div id="toastIcon"><i data-lucide="check-circle" class="h-5 w-5 text-emerald-400"></i></div>
      <span id="toastMessage">Product Unlocked! Access Granted.</span>
  </div>

  <div class="pointer-events-none fixed inset-0 -z-10">
    <div class="absolute -top-56 -left-40 h-[680px] w-[680px] rounded-full bg-indigo-600/20 blur-[140px]"></div>
    <div class="absolute -bottom-56 -right-40 h-[600px] w-[600px] rounded-full bg-fuchsia-600/20 blur-[140px]"></div>
  </div>

  <div id="saleBanner">ðŸ”¥ FLASH SALE ENDING SOON: 88% OFF LIMITED TIME OFFER!</div>
  <div id="paymentTimer"><span id="timerCount">04:00</span></div>

  <header class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
    <a href="index.html" class="flex items-center gap-3 group">
      <img src="https://bookmintor.shop/images/logo.png" 
           alt="Logo" 
           class="h-10 w-10 rounded-full drop-shadow-[0_0_20px_rgba(168,85,247,0.6)] group-hover:scale-110 transition-all duration-300 object-cover">
      
      <span class="text-lg font-bold tracking-wide text-zinc-100">
        <span class="bg-gradient-to-r from-indigo-300 to-fuchsia-300 bg-clip-text text-transparent">Book</span>mintor
      </span>
    </a>
    <a href="./Top-Academics.html" class="text-sm text-zinc-300 hover:text-white">Back to Library</a>
  </header>

  <section class="max-w-5xl mx-auto px-6 py-12 space-y-8">
      <div class="flex flex-col md:flex-row items-center gap-8">
      <div class="book-wrap relative" data-aos="fade-right">
        
        <div class="book-3d" id="book3d">
          <div class="cover" id="coverFace" aria-busy="true">
            <a href="mailto:bookmintor@gmail.com?subject=Product Support Request" class="cover-support-btn animate-blinkSupport" title="Need Help?">
                <i data-lucide="help-circle" class="h-4 w-4"></i>
            </a>

            <div class="cover-loading-spin" id="loadingSpin" aria-hidden="true"><div class="loading-half-wheel animate-glowspin"></div></div>
            <div class="cover-shine animate-coverFast" id="coverShine" aria-hidden="true"></div>
            <img id="coverImg" alt="ebook cover" src="" loading="eager" />

            <div id="tapPrompt" class="absolute inset-0 z-[15] flex flex-col items-center justify-center pointer-events-none opacity-0">
                <div class="relative flex items-center justify-center">
                    <div class="absolute w-14 h-14 bg-white/30 rounded-full animate-tapRipple"></div>
                    <div class="bg-indigo-600/80 backdrop-blur-md p-4 rounded-full shadow-2xl border border-white/20 animate-softPulse">
                        <i data-lucide="hand" class="h-8 w-8 text-white"></i>
                    </div>
                </div>
                <div class="mt-4 px-3 py-1.5 bg-black/60 backdrop-blur-md rounded-lg border border-white/10 shadow-xl">
                    <span class="text-[11px] font-bold uppercase tracking-widest text-white flex items-center gap-2">
                        Tap to See Preview <i data-lucide="eye" class="h-3 w-3"></i>
                    </span>
                </div>
            </div>
            <div id="previewOverlay" aria-hidden="true">
                <div class="cover-shine" id="previewShine" style="display: none; z-index: 20; opacity: 1;"></div>
                <img id="previewScreenshot" src="" alt="Preview" class="absolute inset-0 w-full h-full object-contain" />
                <button onclick="exitPreview(event)" id="exitPreviewBtn" class="absolute top-2 right-2 p-1 bg-black/30 text-white rounded-full hover:bg-black/50 transition z-10"><i data-lucide="x" class="h-4 w-4"></i></button>
                <p id="imageCounter" class="absolute bottom-2 left-1/2 -translate-x-1/2 text-xs font-medium px-2 py-0.5 bg-black/50 rounded-full text-white/80 z-10"></p>
            </div>
          </div>
          <div class="spine" aria-hidden="true"></div><div class="pages" aria-hidden="true"></div><div class="top-edge" aria-hidden="true"></div><div class="bottom-edge" aria-hidden="true"></div><div class="book-ghost" aria-hidden="true"></div>
        </div>
      </div>

      <div class="flex-1 space-y-4" data-aos="fade-left">
        
        <div id="custom-tag-container">
            <div class="subtle-tag">
                <div class="tag-text-wrapper">
                    <ul class="rolling-text-list">
                        <li><span class="tag-text">Error Book</span></li>
                        <li><span class="tag-text">Last 45 Days</span></li>
                        <li><span class="tag-text">Mistake Proof</span></li>
                        <li><span class="tag-text">Exam Traps</span></li>
                        <li><span class="tag-text">Score Gap</span></li>
                        <li><span class="tag-text">Negative Marking</span></li>
                        <li><span class="tag-text">Topper Thinking</span></li>
                        <li><span class="tag-text">Final Boost</span></li>
                        <li aria-hidden="true"><span class="tag-text">Error Book</span></li>
                    </ul>
                </div>
                <div class="tag-shine"></div>
            </div>
        </div>

        <h1 class="text-3xl font-bold">Topper Error Book â€“ Last 45 Days Survival Guide</h1>
        <p class="text-zinc-300">A last 45 days error fixing guide to stop repeat mistakes and close the score gap.</p>

        <div class="stats-section" id="stats-section">
          <div class="stat-item"><div class="stat-value"><i data-lucide="download-cloud" class="h-5 w-5"></i><span data-target="20350+" id="downloads-value">0</span><span class="text-lg">+</span></div><div class="stat-label">Downloads</div></div>
          <div class="stat-item"><div class="stat-value"><i data-lucide="star" class="h-5 w-5"></i><span data-target="4.8" id="rating-value">0.0</span></div><div class="stat-label">Rating</div></div>
          <div class="stat-item"><div class="stat-value"><i data-lucide="message-square" class="h-5 w-5"></i><span data-target="2755+" id="reviews-value">0</span><span class="text-lg">+</span></div><div class="stat-label">feedback</div></div>
        </div>

        <div class="bundle-showcase mt-4 mb-2">
            <h3 class="text-xs font-semibold text-zinc-500 mb-2 uppercase tracking-widest">Included:</h3>
            <div class="bundle-grid">
                <div class="bundle-card">
                    <div class="bundle-icon-wrap"><i data-lucide="book-open" class="h-4 w-4 text-fuchsia-400"></i></div>
                    <span class="bundle-label">E-Book (pdf)</span>
                </div>
            </div>
        </div>

        <div id="pricingContainer" class="flex flex-col gap-2 mt-4">
            <div class="flex items-center gap-3">
                <span id="displayPrice" class="text-4xl font-bold text-brandGreen" style="text-shadow: 0 0 10px rgba(34, 197, 94, 0.3);">â‚¹139</span>
                <span id="originalPrice" class="text-lg text-zinc-500 line-through decoration-zinc-500/50">â‚¹1769</span>
                <span class="px-2 py-1 bg-[#064e3b] text-brandGreen rounded-md text-xs font-bold border border-brandGreen/20 shadow-saleGlow">LIMITED OFFER</span>
            </div>
            
            <div class="coupon-wrapper" id="couponSection">
                <i data-lucide="tag" class="h-4 w-4 text-fuchsia-400"></i>
                <input type="text" id="couponInput" class="coupon-input" placeholder="Coupon Code">
                <button onclick="handleCoupon()" id="applyCouponBtn" class="coupon-btn">Apply</button>
            </div>
        </div>

        <div class="flex items-center flex-wrap gap-4 mt-4">
            <a id="buyBtn" href="#buy" class="cta-btn inline-flex items-center gap-2 rounded-xl bg-gradient-to-br from-indigo-500 to-fuchsia-500 px-4 py-2 text-sm font-semibold shadow-ctaglow transition hover:scale-105 active:scale-95">
              <span>Get Access</span>
              <i data-lucide="shopping-cart" class="h-4 w-4"></i>
              <span class="cta-shine animate-btnshine"></span>
              <span class="corner-bling"></span>
            </a>

            <div id="mysteryBoxWrap" class="relative cursor-pointer flex items-center justify-center transition hover:scale-110 active:scale-90" onclick="toggleMysteryTooltip(event)">
              <iframe src="https://lottie.host/embed/742bf040-1fc4-44a6-afed-9db4c62c341b/dAmZdAYt2U.lottie" style="border: 0; width: 45px; height: 45px; pointer-events: none; background: transparent;"></iframe>
              <div id="mysteryTooltip" class="absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-56 p-3 bg-brandDark/95 backdrop-blur-md border border-white/10 rounded-xl shadow-2xl opacity-0 scale-95 transition-all duration-300 pointer-events-none z-[60] text-center">
                <p class="text-[11px] font-medium leading-relaxed text-zinc-200">
                  Upon successful acquisition, you shall be furnished with a meticulously structured, comprehensive guided instructional curriculum.
                </p>
                <div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-brandDark/95"></div>
              </div>
            </div>

            <div id="unlockContainer" class="snake-container items-center gap-4">
                <div class="snake-border"></div>
                <div class="snake-glow"></div>
                <div class="snake-mask"></div>
                <button id="unlockBtn" class="unlock-btn" data-unlocked="false" onclick="handleUnlockClick()">
                    <i data-lucide="lock-open" class="h-4 w-4"></i> 
                    <span>View Library</span>
                    <span class="btn-shine"></span>
                </button>
            </div>
        </div>

      </div>
    </div>

    <div data-aos="fade-up" class="mb-2"> <h2 class="text-2xl font-bold mb-2">About this Ebook</h2>
      <p class="text-zinc-300 leading-relaxed">This book is built for the most critical phase before exams. Instead of revising everything again, it shows where students actually lose marks and why the same mistakes repeat under pressure. Covering Physics, Chemistry, Biology, and exam-hall errors, it trains you to recognize traps, fix thinking patterns, and avoid negative marking. Ideal for students who want to convert preparation into real scores.</p>
    </div>

    <div data-aos="fade-up" class="py-2 premium-list-container">
        <div class="premium-list-item"><span class="simple-tick">âœ“</span><span class="feature-text"><strong>PREMIUM E-BOOK (pdf)</strong></span></div>
        <div class="premium-list-item"><span class="simple-tick">âœ“</span><span class="feature-text"><strong>ENGLISH LANGUAGE</strong></span></div>
    </div>

    <div data-aos="fade-up" class="py-4"> <h2 class="text-2xl font-bold mb-4">Q&A</h2>
      <div class="divide-y divide-white/10 rounded-xl border border-white/10 bg-white/5">
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">Q1. What is an Error Book and why is it important?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">An Error Book helps you track and fix repeat mistakes that cost marks in exams.</p></div></details>
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">Q2. Is this useful only in the last 45 days?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">Yes. It is specially designed for final-stage correction and score improvement.</p></div></details>
        <details class="p-4"><summary class="cursor-pointer font-semibold flex justify-between items-center">Q3. Does it cover all subjects?<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg></summary><div class="details-content"><p class="mt-2 text-sm text-zinc-300 py-2">Yes. Physics, Chemistry, Biology, and common exam-hall mistakes are included.</p></div></details>
      </div>
    </div>

    <div id="feedbacks" data-aos="fade-up" class="py-8"> <h2 class="text-2xl font-bold mb-1">What our readers say</h2>
      <p class="mb-4 text-sm text-zinc-400">These are the most repeated points readers mentioned.</p>
      <div class="space-y-3" id="feedback-list">
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #f59e0b, #f97316);">R</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Rohit Kumar</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">This book showed me why my mock scores were not improving even after revision</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">A</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Ankit rajak</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">Honestly useful. It doesnâ€™t teach new things, it fixes the mistakes you keep repeating</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 empty"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #ef4444, #dc2626);">S</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Saurabh Mishra</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">Last 45 days me aisi guidance chahiye hoti hai, not more theory</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">M</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Mohammad Saif</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">This felt very practical. Especially the exam-hall and OMR mistakes part</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item animate-slideUp"><div class="user-avatar" style="background: linear-gradient(135deg, #10b981, #059669);">K</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Khushi ojha</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">Physics ke sign aur graph mistakes hamesha ho jaate the, ab pehle hi notice ho jate hain</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i></div></div></div></div>

        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #f97316, #ea580c);">R</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Ritika Jain</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">Chemistry me NCERT words ko lightly leta tha, ab samajh aa gaya kitna matter karta h</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #6366f1, #4f46e5);">H</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Harshvardhan Singh</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">Not a revision book. More like a mirror that shows where you mess up</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 empty"></i></div></div></div></div>
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #ec4899, #db2777);">A</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Aman dubey</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">Biology option elimination ka approach kaafi clear ho gaya isse</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #14b8a6, #0d9488);">N</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">naman sahu</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">Mocks ke baad ye book open karna became a habit. It actually helps</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 empty"></i></div></div></div></div>
        <div class="feedback-item extra-feedback"><div class="user-avatar" style="background: linear-gradient(135deg, #f59e0b, #d97706);">N</div><div class="feedback-content"><div class="feedback-header"><div class="user-info"><div class="user-details"><div class="user-name">Nikhil Thakur</div><div class="user-location">India</div></div></div><div class="feedback-date">Dec 2025</div></div><div class="feedback-text">The biggest benefit was knowing what NOT to revise in the last days</div><div class="feedback-rating"><div class="star-glow flex items-center gap-1"><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star" class="h-4 w-4 filled"></i><i data-lucide="star-half" class="h-4 w-4 half"></i></div></div></div></div>
      </div>
      <button id="showMore" class="mt-4 inline-block rounded-xl border border-white/10 bg-white/10 px-4 py-2 text-sm text-white hover:bg-white/20 transition" onclick="toggleFeedbacks()">Show More</button>
    </div>
  </section>

  <div id="downloadModal" class="modal">
    <div id="languageSelectionModal" class="modal-content" style="max-width: 450px; display: none; background-color: #1e293b; color: white;">
      <h2 class="text-2xl font-bold mb-6 text-indigo-400 text-center">Select Content Language</h2>
      <p class="text-sm text-zinc-300 text-center mb-6">Which version would you like to view?</p>
      
      <button onclick="closeDownloadModal()" class="language-modal-close"><i data-lucide="x" class="h-6 w-6"></i></button>

      <div id="languageSelectionContainer" class="space-y-4 transition-opacity duration-300">
          <button onclick="saveAndOpenDashboard('HINDI')" class="payment-lang-btn text-sm py-3 px-4" style="background-image: linear-gradient(135deg, #dc2626, #ef4444); box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);">
              <i data-lucide="book" class="h-4 w-4"></i> HINDI
          </button>
          <button onclick="saveAndOpenDashboard('ENGLISH')" class="payment-lang-btn text-sm py-3 px-4" style="background-image: linear-gradient(135deg, #3b82f6, #60a5fa); box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);">
              <i data-lucide="globe" class="h-4 w-4"></i> ENGLISH
          </button>
      </div>
    </div>
  </div>

  <div id="zipConfirmationModal" class="modal" style="display: none;">
      <div id="zipModalContent" class="modal-content animate-modalFadeIn" style="max-width: 380px; width: 90%; background-color: #0f172a; color: #e2e8f0; padding: 25px; border: 1px solid rgba(255, 255, 255, 0.15); box-shadow: 0 0 40px rgba(168,85,247,0.3); opacity: 1; transform: none; display: flex; flex-direction: column; align-items: center;">
          <div id="zipCheckStep" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
              <h3 class="text-xl font-bold mb-4 text-indigo-300 text-center flex items-center justify-center gap-2"><i data-lucide="shield-check" class="h-6 w-6 text-emerald-400"></i> ZIP Compatibility Check</h3>
              <p class="text-base font-semibold text-zinc-300 text-center mb-5 leading-relaxed">Can your device open <span class="text-yellow-400">.ZIP files</span>?</p>
              
              <div class="bg-white/5 border border-white/10 rounded-xl p-4 mb-5 text-left w-full">
                  <p class="text-xs font-bold text-zinc-500 uppercase tracking-widest mb-3">IF NO, FOLLOW THESE 3 STEPS:</p>
                  <div class="space-y-3">
                      <div class="flex items-start gap-3">
                          <div class="mt-0.5 min-w-[18px]"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-500"></i></div>
                          <p class="text-sm text-zinc-300 leading-snug">Open your <strong class="text-white">Play Store / App Store</strong>.</p>
                      </div>
                      <div class="flex items-start gap-3">
                          <div class="mt-0.5 min-w-[18px]"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-500"></i></div>
                          <p class="text-sm text-zinc-300 leading-snug">Search and install ZArchiver or <strong class="text-white">Files by Google</strong>.</p>
                      </div>
                      <div class="flex items-start gap-3">
                          <div class="mt-0.5 min-w-[18px]"><i data-lucide="check-circle" class="h-4 w-4 text-emerald-500"></i></div>
                          <p class="text-sm text-zinc-300 leading-snug">Return here and click the button below.</p>
                      </div>
                  </div>
              </div>

              <button id="understandZipBtn" onclick="handleZipUnderstand()" class="no-shine-button w-full text-sm py-3 px-4" style="background-image: linear-gradient(135deg, #10b981, #059669); box-shadow: 0 4px 15px rgba(16,185,129,0.4); margin: 0; width: 100%;">I Understand</button>
          </div>

          <div id="zipChoiceStep" style="display: none; width: 100%; flex-direction: column; align-items: center; animation: modalFadeIn 0.3s ease-out forwards;">
              <h3 class="text-lg font-bold mb-6 text-white text-center">Select an Action</h3>
              
              <div class="action-card" onclick="handleZipDownloadNow()">
                  <div class="action-icon text-fuchsia-400"><i data-lucide="download" class="h-6 w-6"></i></div>
                  <div class="action-text">
                      <h4>Download Full ZIP Now</h4>
                      <p>Save all content offline instantly.</p>
                  </div>
                  <i data-lucide="chevron-right" class="h-5 w-5 text-zinc-500 ml-auto"></i>
              </div>

              <div class="action-card" onclick="handleZipDownloadLater()">
                  <div class="action-icon text-indigo-400"><i data-lucide="layout-dashboard" class="h-6 w-6"></i></div>
                  <div class="action-text">
                      <h4>Open Dashboard</h4>
                      <p>Watch online & download later.</p>
                  </div>
                  <i data-lucide="chevron-right" class="h-5 w-5 text-zinc-500 ml-auto"></i>
              </div>
          </div>
      </div>
  </div>


  <div id="feedbackModal" class="modal">
    <div class="modal-content" id="feedbackModalContent" style="max-width: 400px; padding: 30px; background-color: #1e293b; color: #e2e8f0; border: 1px solid rgba(255, 255, 255, 0.1);">
        <h2 class="text-xl font-bold mb-2 text-indigo-400 text-center">Tell us what you think!</h2>
        <div id="feedbackForm">
            <textarea id="feedbackTextarea" rows="4" placeholder="Type your honest feedback here (Required)..." class="feedback-textarea w-full p-3 border border-white/20 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm text-white bg-transparent transition duration-300"></textarea>
            <div class="flex flex-col gap-3 mt-4">
                <button id="submitFeedbackBtn" class="no-shine-button w-full" style="background-image: linear-gradient(135deg, #6366f1, #a855f7); margin-top: 0px;" onclick="submitFeedback()"><i data-lucide="send" class="h-5 w-5"></i><span id="submitFeedbackText">Submit Feedback</span></button>
                <button id="noThanksBtn" class="w-full text-sm font-semibold text-zinc-400 hover:text-white transition" onclick="closeFeedbackModal(true)">No Thanks, take me back</button>
            </div>
        </div>
        <div id="feedbackSuccess" class="text-center py-8 hidden">
            <i data-lucide="check-circle" class="h-10 w-10 text-emerald-400 mx-auto mb-4 text-emerald-500 filter drop-shadow-md"></i><h3 class="text-xl font-bold text-emerald-400">Thanks for your feedback!</h3>
        </div>
    </div>
  </div>

  <div id="paymentModal" class="modal">
    <div class="modal-content" id="paymentModalContent" style="max-width: 500px; padding: 0; background-color: #111817;">
        <button id="paymentModalCloseButton" onclick="openConfirmationModal()" style="position: absolute; top: 12px; right: 12px; z-index: 2020;"><i data-lucide="x" class="h-6 w-6 text-zinc-400 hover:text-white"></i></button>
        <div id="paymentContainer" style="width: 100%; height: 550px; position: relative;">
            <div id="topShield" class="invisible-shield" style="top: 0; height: 70px;"></div>
            
            <div id="bottomShield" class="invisible-shield inactive" style="bottom: 0; height: 120px;"></div>
            
            <div id="paymentLoader" style="position: absolute; inset: 0; background-color: #111817; display: none; align-items: center; justify-content: center; flex-direction: column; z-index: 20;">
                <div class="jumping-loader"><span class="ball"></span><span class="ball"></span><span class="ball"></span></div>
                <p class="mt-8 text-lg font-semibold text-indigo-400">Processing...</p>
            </div>
            <div id="paymentLangSelection" style="display: none; position: absolute; inset: 0; background-color: #111817; z-index: 15; flex-direction: column; align-items: center; justify-content: center; padding: 30px;">
                <h3 class="text-xl font-bold text-white mb-6 text-center">Choose your language</h3>
                <button onclick="handlePaymentLanguageSelection('HINDI')" class="payment-lang-btn"><span class="btn-shine"></span><i data-lucide="book" class="h-5 w-5 text-fuchsia-400"></i>Hindi<i data-lucide="arrow-right" class="h-4 w-4 ml-auto text-zinc-400"></i></button>
                <button onclick="handlePaymentLanguageSelection('ENGLISH')" class="payment-lang-btn"><span class="btn-shine"></span><i data-lucide="globe" class="h-5 w-5 text-indigo-400"></i>English<i data-lucide="arrow-right" class="h-4 w-4 ml-auto text-zinc-400"></i></button>
            </div>
            <iframe id="cashfreeIframe" src="" frameborder="0" width="100%" height="100%" style="border-radius: 12px; display: none;" sandbox="allow-forms allow-scripts allow-modals allow-popups allow-same-origin allow-top-navigation"></iframe>
        </div>
        <p class="text-xs text-zinc-500 text-center py-2">Powered by Cashfree Payments</p>
    </div>
  </div>

  <div id="confirmationModal">
    <div id="confirmationContent">
        <div class="mb-4"><i data-lucide="alert-triangle" class="h-8 w-8 text-red-400 mx-auto mb-2"></i><p class="conf-text-glow text-lg">Are you sure to exit payment?</p></div>
        <p class="text-sm text-zinc-300 mb-6">Exiting now may cancel your transaction. Your payment information is secure.</p>
        <div class="flex flex-col gap-3">
            <button id="cancelExitBtn" class="download-button w-full" style="background-image: linear-gradient(135deg, #ef4444, #dc2626); margin-top: 0px;" onclick="confirmExitPayment(false)"><i data-lucide="check" class="h-5 w-5"></i>No, Continue Payment</button>
            <button id="confirmExitBtn" class="w-full text-sm font-semibold text-zinc-400 hover:text-white transition" onclick="confirmExitPayment(true)">Yes, Exit Payment</button>
        </div>
    </div>
  </div>

  <div id="productViewerModal" class="modal">
      <div id="productViewerContent" class="modal-content animate-modalFadeIn">
          <div class="viewer-header">
              <h3 class="text-lg font-bold text-white flex items-center gap-2"><i data-lucide="package-open" class="h-5 w-5 text-emerald-400"></i> <span id="dashboardTitle">Premium Content</span></h3>
              <div class="flex items-center gap-2">
                  <button onclick="handleDownloadBundleClick()" class="flex items-center gap-2 text-zinc-400 hover:text-white transition p-2 rounded-lg border border-white/10 hover:border-white/30 bg-white/5">
                      <i data-lucide="download" class="h-4 w-4"></i>
                      <span class="text-xs font-medium uppercase tracking-wider hidden sm:inline">Download ZIP</span>
                  </button>
                  <button onclick="closeViewerModal()" class="text-zinc-400 hover:text-white hover:bg-white/10 p-2 rounded-full transition">
                      <i data-lucide="x" class="h-5 w-5"></i>
                  </button>
              </div>
          </div>
          <div class="viewer-body">
              <div class="viewer-sidebar">
                  <div id="tab-video" class="viewer-tab active" onclick="switchViewerTab('video')"><i data-lucide="play-circle" class="h-4 w-4"></i> Video </div>
                  <div id="tab-audio" class="viewer-tab" onclick="switchViewerTab('audio')"><i data-lucide="headphones" class="h-4 w-4"></i> Audio Podcast</div>
                  <div id="tab-pdf" class="viewer-tab" onclick="switchViewerTab('pdf')"><i data-lucide="file-text" class="h-4 w-4"></i> eBook PDF</div>
                  <div id="tab-image" class="viewer-tab" onclick="switchViewerTab('image')"><i data-lucide="image" class="h-4 w-4"></i> Mind Map</div>
              </div>
              <div class="viewer-main">
                  <div id="view-video" class="viewer-section active">
                      <button id="btn-dl-video" class="viewer-download-btn"><i data-lucide="download" class="h-4 w-4"></i></button>
                      <div class="w-full h-full flex flex-col items-center justify-center p-4">
                          <video id="videoSource" controls class="w-full h-auto max-h-[60vh] rounded-lg shadow-2xl border border-zinc-800"><source src="" type="video/mp4"></video>
                      </div>
                  </div>
                  
                  <div id="view-audio" class="viewer-section">
                      <button id="btn-dl-audio" class="viewer-download-btn"><i data-lucide="download" class="h-4 w-4"></i></button>
                      <div class="audio-player-card">
                          <div class="w-24 h-24 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-glow"><i data-lucide="mic" class="h-10 w-10 text-white"></i></div>
                          <audio id="audioSource" controls class="w-full mb-4"><source src="" type="audio/mpeg"></audio>
                      </div>
                  </div>
                  
                  <div id="view-pdf" class="viewer-section">
                      <button id="btn-dl-pdf" class="viewer-download-btn"><i data-lucide="download" class="h-4 w-4"></i></button>
                      <div class="pdf-container">
                          <iframe id="pdfFrame" src="" width="100%" height="100%" style="border:none;"></iframe>
                      </div>
                  </div>
                  
                  <div id="view-image" class="viewer-section" style="overflow: hidden;">
                      <button id="btn-dl-image" class="viewer-download-btn"><i data-lucide="download" class="h-4 w-4"></i></button>
                      <div id="mindmapContainer" class="mindmap-container"><img id="imageSource" src="" class="mindmap-img" alt="Mind Map"></div>
                      <div class="absolute bottom-4 right-4 flex gap-2 bg-black/50 p-2 rounded-lg backdrop-blur-sm">
                          <button onclick="zoomMindmap(0.1)" class="p-2 bg-white/10 hover:bg-white/20 rounded text-white"><i data-lucide="plus" class="h-4 w-4"></i></button>
                          <button onclick="zoomMindmap(-0.1)" class="p-2 bg-white/10 hover:bg-white/20 rounded text-white"><i data-lucide="minus" class="h-4 w-4"></i></button>
                          <button onclick="resetMindmap()" class="p-2 bg-white/10 hover:bg-white/20 rounded text-white"><i data-lucide="refresh-ccw" class="h-4 w-4"></i></button>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <footer class="mt-12 border-t border-white/10 py-8 text-center text-sm text-zinc-400">Â© <span id="year"></span> BookMintor. All rights reserved.</footer>

  <script>
    // MODIFICATION 1: Content configuration
    const productConfig = { 
        showVideo: false, 
        showAudio: false, 
        showPdf: true, 
        showMindmap: true 
    };

    const IS_DUAL_LANGUAGE = false; 
    const IS_SALE_ACTIVE = false;
    const ENABLE_COUPON_SECTION = true; 
    
    const SOURCE_IMAGE = 'https://cortex-cradle.github.io/ebook1/pdf4_eng_errorbook/ad434b40-2125-417d-8549-f63b25e82c89.png';
    const PRODUCT_UNIQUE_ID = 'topper-error-book-l654gdw3f67df';
    
    const PAYMENT_LINKS = {
        default: "https://payments.cashfree.com/forms/topper-error-book-fromid43dsa",  
        discounted: "#" 
    };
    
    let currentPaymentUrl = PAYMENT_LINKS.default; 
    const SECRET_KEY = 'EBOOK_SECRET_K3Y_343DSWG53FDS3';
    const VALID_COUPON = "STUMINTOR"; 

    const ZIP_URLS = { HINDI: "#", ENGLISH: "https://github.com/cortex-cradle/ebook1/releases/download/v2.01_pdf1_eng/Class.12.Biology.Practical.Viva.TOPPER.S.MASTER.FILE.2026.-compressed.zip" };

    const CONTENT_URLS = {
        HINDI: { VIDEO: "3", AUDIO: "3", PDF: "3", MINDMAP: "#", ZIP: ZIP_URLS.HINDI },
        ENGLISH: { VIDEO: "", AUDIO: "3", PDF: "https://cortex-cradle.github.io/ebook1/pdf4_eng_errorbook/Topper%20Error%20Book%20%E2%80%93%20Last%2045%20Days%20Survival%20Guide-compressed.pdf", MINDMAP: "https://cortex-cradle.github.io/ebook1/ebook3/file_eng/Mind%20Map.png", ZIP: ZIP_URLS.ENGLISH }
    };
    
    const SCREENSHOT_URLS = [
        'https://cortex-cradle.github.io/ebook1/pdf4_eng_errorbook/ss1%20(3).png',
        'https://cortex-cradle.github.io/ebook1/pdf4_eng_errorbook/ss2%20(1).png',
    ];

    const dom = {
        cover: document.getElementById('coverFace'),
        coverImg: document.getElementById('coverImg'),
        coverShine: document.getElementById('coverShine'),
        loadingSpin: document.getElementById('loadingSpin'),
        previewOverlay: document.getElementById('previewOverlay'),
        previewScreenshot: document.getElementById('previewScreenshot'),
        previewShine: document.getElementById('previewShine'),
        imageCounter: document.getElementById('imageCounter'),
        downloadModal: document.getElementById('downloadModal'),
        languageSelectionModal: document.getElementById('languageSelectionModal'),
        zipConfirmationModal: document.getElementById('zipConfirmationModal'),
        toastNotification: document.getElementById('toastNotification'),
        toastMessage: document.getElementById('toastMessage'),
        buyBtn: document.getElementById('buyBtn'),
        unlockBtn: document.getElementById('unlockBtn'),
        unlockContainer: document.getElementById('unlockContainer'),
        productViewerModal: document.getElementById('productViewerModal'),
        productViewerContent: document.getElementById('productViewerContent'),
        dashboardTitle: document.getElementById('dashboardTitle'),
        videoSource: document.getElementById('videoSource'),
        audioSource: document.getElementById('audioSource'),
        imageSource: document.getElementById('imageSource'),
        pdfFrame: document.getElementById('pdfFrame'),
        displayPrice: document.getElementById('displayPrice'),
        originalPrice: document.getElementById('originalPrice'),
        couponInput: document.getElementById('couponInput'),
        applyCouponBtn: document.getElementById('applyCouponBtn'),
        bottomShield: document.getElementById('bottomShield'),
        tapPrompt: document.getElementById('tapPrompt'),
        mysteryBoxWrap: document.getElementById('mysteryBoxWrap'),
        mysteryTooltip: document.getElementById('mysteryTooltip'),
        feedbackModal: document.getElementById('feedbackModal')
    };

    let currentContentLanguage = 'HINDI';
    let scale = 1, panning = false, pointX = 0, pointY = 0, startX = 0, startY = 0;
    const mmContainer = document.getElementById('mindmapContainer');
    const mmImg = document.getElementById('imageSource');

    mmContainer.onmousedown = function (e) { e.preventDefault(); startX = e.clientX - pointX; startY = e.clientY - pointY; panning = true; }
    mmContainer.onmouseup = function (e) { panning = false; }
    mmContainer.onmousemove = function (e) { e.preventDefault(); if (!panning) return; pointX = e.clientX - startX; pointY = e.clientY - startY; mmImg.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`; }
    
    function zoomMindmap(factor) { scale += factor; if(scale < 0.1) scale = 0.1; mmImg.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`; }
    function resetMindmap() { scale = 1; pointX = 0; pointY = 0; mmImg.style.transform = `translate(0px, 0px) scale(1)`; }

    function toggleFeedbacks() {
        const hiddenItems = document.querySelectorAll('.extra-feedback');
        const btn = document.getElementById('showMore');
        if(!hiddenItems.length || !btn) return;
        const isHidden = window.getComputedStyle(hiddenItems[0]).display === 'none';
        if (isHidden) { hiddenItems.forEach(item => { item.style.display = 'flex'; item.classList.add('animate-slideUp'); }); btn.textContent = 'Show Less'; } 
        else { hiddenItems.forEach(item => { item.style.display = 'none'; item.classList.remove('animate-slideUp'); }); btn.textContent = 'Show More'; document.getElementById('feedbacks').scrollIntoView({behavior: 'smooth', block: 'start'}); }
    }

    // FEATURE 1: Toggle Tooltip
    function toggleMysteryTooltip(e) {
      if(e) e.stopPropagation();
      const tip = dom.mysteryTooltip;
      const isVisible = tip.style.opacity === '1';
      tip.style.opacity = isVisible ? '0' : '1';
      tip.style.scale = isVisible ? '0.95' : '1';
      tip.style.pointerEvents = isVisible ? 'none' : 'auto';
      
      if(!isVisible) {
        setTimeout(() => { 
          tip.style.opacity = '0'; 
          tip.style.scale = '0.95'; 
          tip.style.pointerEvents = 'none'; 
        }, 5000);
      }
    }

    function handleCoupon() {
        if (!ENABLE_COUPON_SECTION) return; 
        const input = dom.couponInput;
        const btn = dom.applyCouponBtn;
        const code = input.value.trim().toUpperCase();

        if(code === VALID_COUPON) {
            confetti({ particleCount: 60, spread: 50, origin: { y: 0.5, x: 0.5 }, colors: ['#22c55e', '#ffffff'], zIndex: 10 });
            input.disabled = true; btn.disabled = true;
            input.classList.add('coupon-applied');
            btn.innerHTML = '<i data-lucide="check" class="h-4 w-4"></i>';
            lucide.createIcons();
            dom.originalPrice.classList.add('animate-priceSlash'); 
            dom.displayPrice.classList.add('animate-popFloat'); 
            setTimeout(() => { dom.originalPrice.innerHTML = 'â‚¹899'; dom.displayPrice.innerHTML = 'â‚¹299'; dom.originalPrice.classList.remove('animate-priceSlash'); }, 600);
            currentPaymentUrl = PAYMENT_LINKS.discounted;
            showToast("Coupon Applied! â‚¹500 Saved ðŸŽ‰", true);
        } else {
            input.classList.add('animate-shakeInput', 'border-red-500');
            setTimeout(() => input.classList.remove('animate-shakeInput', 'border-red-500'), 500);
            showToast("Invalid code. Please check and try again.", false);
        }
    }

    function showToast(msg, isSuccess = true) {
        dom.toastMessage.textContent = msg;
        const iconDiv = document.getElementById('toastIcon');
        if (isSuccess) {
            dom.toastNotification.classList.remove('error');
            iconDiv.innerHTML = '<i data-lucide="check-circle" class="h-5 w-5 text-emerald-400"></i>';
        } else {
            dom.toastNotification.classList.add('error');
            iconDiv.innerHTML = '<i data-lucide="alert-circle" class="h-5 w-5 text-red-400"></i>';
        }
        dom.toastNotification.classList.add('show');
        lucide.createIcons();
        setTimeout(() => dom.toastNotification.classList.remove('show'), 3000);
    }

    function switchViewerTab(tabId) {
        // MODIFICATION 1: Prevent switching to disabled sections
        const cfgKey = 'show' + tabId.charAt(0).toUpperCase() + tabId.slice(1);
        if (productConfig.hasOwnProperty(cfgKey) && !productConfig[cfgKey]) return;

        document.querySelectorAll('video, audio').forEach(v => v.pause());
        document.querySelectorAll('.viewer-sidebar .viewer-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.viewer-main .viewer-section').forEach(s => s.classList.remove('active'));
        const clickedTab = document.getElementById(`tab-${tabId}`);
        if(clickedTab) clickedTab.classList.add('active');
        let targetSectionId = `view-${tabId}`;
        const section = document.getElementById(targetSectionId);
        if(section) section.classList.add('active');
    }

    async function handleDirectDownload(url, filename) {
        if (!url) return;
        showToast("Starting Download...", true);
        try {
            const response = await fetch(url);
            const blob = await response.blob();
            const blobUrl = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = blobUrl;
            a.download = filename || url.split('/').pop();
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(blobUrl);
            document.body.removeChild(a);
            showToast("Download Complete!", true);
        } catch (error) {
            const a = document.createElement('a');
            a.href = url;
            a.target = "_self"; 
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    }

    function openViewerModal(lang) {
        if (lang) { currentContentLanguage = lang; localStorage.setItem('lang_' + PRODUCT_UNIQUE_ID, lang); } 
        else { currentContentLanguage = localStorage.getItem('lang_' + PRODUCT_UNIQUE_ID) || 'HINDI'; }
        try {
            const content = CONTENT_URLS[currentContentLanguage] || CONTENT_URLS.HINDI; 
            document.getElementById('dashboardTitle').innerHTML = `Library <span class="text-xs bg-white/10 px-2 py-1 rounded ml-2 text-indigo-300 font-mono tracking-wide">${currentContentLanguage} </span>`;
            
            // MODIFICATION 1: Update sidebar UI based on config
            const tabs = { video: 'tab-video', audio: 'tab-audio', pdf: 'tab-pdf', image: 'tab-image' };
            let firstEnabled = null;
            
            Object.keys(tabs).forEach(key => {
                const el = document.getElementById(tabs[key]);
                const configKey = 'show' + key.charAt(0).toUpperCase() + key.slice(1);
                if (productConfig[configKey]) {
                    el.classList.remove('tab-disabled');
                    if (!firstEnabled) firstEnabled = key;
                } else {
                    el.classList.add('tab-disabled');
                }
            });

            const videoEl = document.getElementById('videoSource');
            const audioEl = document.getElementById('audioSource');
            const imgEl = document.getElementById('imageSource');
            const pdfFr = document.getElementById('pdfFrame');
            if(content.VIDEO && videoEl) { 
                const source = videoEl.querySelector('source'); 
                if(source) { source.src = content.VIDEO; videoEl.load(); }
                document.getElementById('btn-dl-video').onclick = () => handleDirectDownload(content.VIDEO, 'video_class.mp4');
            }
            if(content.AUDIO && audioEl) { 
                const source = audioEl.querySelector('source'); 
                if(source) { source.src = content.AUDIO; audioEl.load(); }
                document.getElementById('btn-dl-audio').onclick = () => handleDirectDownload(content.AUDIO, 'audio_podcast.mp3');
            }
            if(content.MINDMAP && imgEl) { 
                imgEl.src = content.MINDMAP; 
                document.getElementById('btn-dl-image').onclick = () => handleDirectDownload(content.MINDMAP, 'mindmap.png');
            }
            if(content.PDF && pdfFr) { 
                let pdfLink = content.PDF;
                document.getElementById('btn-dl-pdf').onclick = () => handleDirectDownload(pdfLink, 'ebook.pdf');
                if(pdfLink.includes('drive.google.com')) {
                    pdfLink = pdfLink.replace('/view', '/preview'); 
                    pdfFr.src = pdfLink;
                } else {
                    const encodedUrl = encodeURIComponent(pdfLink);
                    pdfFr.src = `https://docs.google.com/gview?embedded=true&url=${encodedUrl}`;
                }
            }
            dom.productViewerModal.style.display = 'flex';
            dom.productViewerContent.classList.add('animate-modalFadeIn'); 
            
            // Automatically switch to the first enabled tab
            if (firstEnabled) switchViewerTab(firstEnabled);
            
            lucide.createIcons(); 
        } catch(e) { console.error(e); }
    }

    function closeViewerModal() { dom.productViewerModal.style.display = 'none'; document.querySelectorAll('video, audio').forEach(v => v.pause()); }

    function handleUnlockClick() {
        let status = dom.unlockBtn.getAttribute('data-unlocked');
        if (status === 'BOTH') {
            dom.downloadModal.style.display = 'flex'; dom.languageSelectionModal.style.display = 'block'; dom.languageSelectionModal.classList.add('animate-modalFadeIn'); lucide.createIcons();
        } else if (status === 'HINDI') { openViewerModal('HINDI'); } 
        else if (status === 'ENGLISH') { openViewerModal('ENGLISH'); } 
        else { showToast("Please purchase the product first.", false); }
    }

    function saveAndOpenDashboard(lang) { dom.languageSelectionModal.style.display = 'none'; dom.downloadModal.style.display = 'none'; openViewerModal(lang); }
    function closeDownloadModal() { dom.downloadModal.style.display = 'none'; }
    function handleDownloadBundleClick() { const lang = currentContentLanguage; const url = CONTENT_URLS[lang] ? CONTENT_URLS[lang].ZIP : null; if(url) window.location.href = url; }

    let postPaymentLanguage = '';
    function startUnlockProcess(lang) { 
        postPaymentLanguage = lang; 
        triggerCelebration(); 
        dom.zipConfirmationModal.style.display = 'flex'; 
        document.getElementById('zipCheckStep').style.display = 'flex';
        document.getElementById('zipChoiceStep').style.display = 'none';
        lucide.createIcons(); 
    }

    function handleZipUnderstand() {
        document.getElementById('zipCheckStep').style.display = 'none';
        document.getElementById('zipChoiceStep').style.display = 'flex';
    }

    function handleZipDownloadNow() {
        handleZipCompletion();
        const url = CONTENT_URLS[postPaymentLanguage] ? CONTENT_URLS[postPaymentLanguage].ZIP : null;
        if(url) window.location.href = url;
    }

    function handleZipDownloadLater() {
        handleZipCompletion();
        openViewerModal(postPaymentLanguage);
    }

    function handleZipCompletion() {
        dom.zipConfirmationModal.style.display = 'none'; 
        dom.unlockContainer.style.display = 'inline-flex';
        
        if(dom.mysteryBoxWrap) dom.mysteryBoxWrap.style.display = 'none';

        const status = getUpdatedUnlockStatus(postPaymentLanguage);
        dom.unlockBtn.setAttribute('data-unlocked', status);
        dom.unlockContainer.classList.add('snake-active'); 
        dom.buyBtn.classList.add('no-shine');
        showToast("Product Unlocked!", true);

        setTimeout(() => {
          dom.unlockContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 500);

        // MODIFICATION 2: Open Feedback Modal after completion
        setTimeout(() => {
            dom.feedbackModal.style.display = 'flex';
            document.getElementById('feedbackModalContent').classList.add('animate-modalFadeIn');
            lucide.createIcons();
        }, 1500);
    }

    function getUpdatedUnlockStatus(newLang) {
        const current = localStorage.getItem('unlocked_lang_' + PRODUCT_UNIQUE_ID) || '';
        let result = newLang;
        if ((current.includes('HINDI') && newLang === 'ENGLISH') || (current.includes('ENGLISH') && newLang === 'HINDI') || current.includes('BOTH')) { result = 'BOTH'; }
        localStorage.setItem('unlocked_lang_' + PRODUCT_UNIQUE_ID, result);
        return result;
    }

    function preloadAllImages() {
        dom.cover.setAttribute('aria-busy', 'true');
        const imageUrls = [SOURCE_IMAGE, ...SCREENSHOT_URLS];
        const promises = imageUrls.map(url => new Promise((resolve) => {
            const img = new Image(); img.src = url; img.onload = resolve; img.onerror = resolve;
        }));
        Promise.all(promises).then(() => {
            dom.coverImg.src = SOURCE_IMAGE;
            requestAnimationFrame(()=> { dom.coverImg.style.opacity = '0.6'; dom.coverImg.style.transform = 'scale(1)'; });
            setTimeout(() => {
                dom.coverImg.style.opacity = '1'; 
                dom.coverShine.style.transition = 'opacity 0.32s ease'; dom.coverShine.style.opacity = '0';
                dom.loadingSpin.style.opacity = '0';
                setTimeout(()=> {
                    dom.coverShine.style.display = 'none'; dom.loadingSpin.style.display = 'none'; 
                    dom.cover.classList.add('loaded'); dom.cover.setAttribute('aria-busy','false');
                    
                    // START THE EYE-CATCHING TAP PROMPT
                    setTimeout(() => {
                        const tapPrompt = document.getElementById('tapPrompt');
                        if(tapPrompt) {
                            tapPrompt.style.opacity = '1';
                            setTimeout(() => {
                                tapPrompt.style.opacity = '0';
                                setTimeout(() => { tapPrompt.style.display = 'none'; }, 700);
                            }, 5000); // Visible for 5 seconds
                        }
                    }, 1000);

                }, 450); 
            }, 700);
        });
    }

    let currentImageIndex = 0;
    function showPreviewImage(index) {
        if (index >= SCREENSHOT_URLS.length) index = 0; 
        else if (index < 0) index = SCREENSHOT_URLS.length - 1;
        currentImageIndex = index;
        dom.previewShine.style.display = 'block'; 
        dom.previewScreenshot.style.opacity = '0.5';
        const tempImg = new Image(); 
        tempImg.src = SCREENSHOT_URLS[currentImageIndex];
        tempImg.onload = () => {
            dom.previewShine.style.display = 'none'; 
            dom.previewScreenshot.src = tempImg.src;
            dom.imageCounter.textContent = `${currentImageIndex + 1}/${SCREENSHOT_URLS.length}`;
            dom.previewScreenshot.style.opacity = '1';
            dom.previewScreenshot.classList.remove('animate-subtleZoomIn');
            void dom.previewScreenshot.offsetWidth;
            dom.previewScreenshot.classList.add('animate-subtleZoomIn');
        };
    }

    dom.cover.addEventListener('click', e => { 
        if (!dom.cover.classList.contains('loaded')) return;
        
        // Hide tap prompt immediately if user clicks
        const tapPrompt = document.getElementById('tapPrompt');
        if(tapPrompt) tapPrompt.style.display = 'none';

        if(dom.previewOverlay.style.opacity === '1') {
             e.stopPropagation(); 
             showPreviewImage(currentImageIndex + 1);
        } else {
             e.preventDefault(); 
             dom.coverImg.style.opacity = '0'; 
             dom.previewOverlay.style.opacity = '1'; 
             dom.previewOverlay.style.pointerEvents = 'auto'; 
             currentImageIndex = -1; 
             showPreviewImage(0); 
             lucide.createIcons(); 
        }
    });

    function exitPreview(e) { 
        if(e) e.stopPropagation(); 
        dom.previewScreenshot.classList.remove('animate-subtleZoomIn');
        setTimeout(() => { 
            dom.previewOverlay.style.opacity = '0'; 
            dom.previewOverlay.style.pointerEvents = 'none'; 
            dom.previewScreenshot.style.opacity = '0'; 
            dom.coverImg.style.opacity = '1'; 
        }, 300);
    }

    document.addEventListener('DOMContentLoaded', function() {
      if (!ENABLE_COUPON_SECTION) { document.getElementById('couponSection').style.display = 'none'; }
      const unlockedLangs = localStorage.getItem('unlocked_lang_' + PRODUCT_UNIQUE_ID);
      if (unlockedLangs && unlockedLangs !== 'false') {
          dom.unlockContainer.style.display = 'inline-flex';
          dom.unlockBtn.setAttribute('data-unlocked', unlockedLangs);
          dom.unlockContainer.classList.add('snake-active'); 
          dom.buyBtn.classList.add('no-shine');

          if(dom.mysteryBoxWrap) dom.mysteryBoxWrap.style.display = 'none';
      }
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('payment_status') === 'success' && urlParams.get('secret_key') === SECRET_KEY && sessionStorage.getItem('payment_initiated') === 'true') {
        history.replaceState(null, '', window.location.pathname);
        sessionStorage.removeItem('payment_initiated');
        const preSelectedLang = sessionStorage.getItem('selected_language');
        const finalStatus = getUpdatedUnlockStatus(preSelectedLang || 'HINDI');
        dom.unlockBtn.setAttribute('data-unlocked', finalStatus);
        startUnlockProcess(preSelectedLang || 'HINDI');
      }
      if(IS_SALE_ACTIVE) document.getElementById('saleBanner').style.display = 'block';
      AOS.init({ duration: 800, once: true, offset: 120 });
      lucide.createIcons();
      preloadAllImages();
    });

    function animateCount(el, start, end, duration) {
        let startTime = null; let isFloat = end % 1 !== 0;
        function step(timestamp) {
            if (!startTime) startTime = timestamp;
            const progress = timestamp - startTime; const pct = Math.min(progress / duration, 1);
            let val = start + (end - start) * pct;
            el.textContent = isFloat ? val.toFixed(1) : Math.floor(val).toLocaleString('en-IN');
            if (pct < 1) window.requestAnimationFrame(step); else el.textContent = isFloat ? end.toFixed(1) : end.toLocaleString('en-IN');
        } window.requestAnimationFrame(step);
    }
    const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
            document.querySelectorAll('.stat-value span[data-target]').forEach(span => {
                animateCount(span, 0, parseFloat(span.getAttribute('data-target')), 2000);
            });
            observer.disconnect();
        }
    }, { threshold: 0.5 }); observer.observe(document.getElementById('stats-section'));

    function triggerCelebration() { confetti({ particleCount: 180, spread: 100, origin: { y: 0.6 }, colors: ['#6366f1', '#a855f7', '#10b981'], zIndex: 2000 }); }
    
    let countdownInterval;

    function openPaymentModal() { 
        document.body.style.overflow = 'hidden';
        document.getElementById('paymentModal').style.display = 'flex'; 
        document.getElementById('paymentModalContent').classList.add('animate-modalFadeIn'); 
        
        if (!IS_DUAL_LANGUAGE) {
            handlePaymentLanguageSelection('ENGLISH'); 
        } else {
            document.getElementById('paymentLangSelection').style.display = 'flex'; 
            document.getElementById('cashfreeIframe').style.display = 'none'; 
        }

        dom.bottomShield.classList.add('inactive'); 
        lucide.createIcons(); 
    }

    function closePaymentModal() { 
        document.body.style.overflow = '';
        document.getElementById('paymentModal').style.display = 'none'; 
        document.getElementById('paymentTimer').style.display = 'none'; 
        if(countdownInterval) clearInterval(countdownInterval); 
    }
    
    function handlePaymentLanguageSelection(lang) {
        document.getElementById('paymentLangSelection').style.display = 'none'; 
        document.getElementById('paymentLoader').style.display = 'flex';
        sessionStorage.setItem('payment_initiated', 'true'); 
        sessionStorage.setItem('selected_language', lang);
        document.getElementById('cashfreeIframe').src = currentPaymentUrl;
        setTimeout(() => { 
            document.getElementById('paymentLoader').style.display = 'none'; 
            document.getElementById('cashfreeIframe').style.display = 'block'; 
            setTimeout(() => {
                dom.bottomShield.classList.remove('inactive');
                dom.bottomShield.style.zIndex = '25'; 
            }, 36000); 
        }, 2000); 
        let tl = 240; document.getElementById('paymentTimer').style.display='block';
        countdownInterval = setInterval(() => { tl--; document.getElementById('timerCount').textContent = `${Math.floor(tl/60)}:${(tl%60)<10?'0':''}${tl%60}`; if(tl<0) closePaymentModal(); }, 1000);
    }
    document.getElementById('buyBtn').addEventListener('click', (e) => { e.preventDefault(); openPaymentModal(); });

    function openConfirmationModal() { document.getElementById('confirmationModal').classList.add('active'); document.getElementById('confirmationModal').style.display='flex'; }
    function confirmExitPayment(y) { 
        document.getElementById('confirmationModal').classList.remove('active'); 
        setTimeout(()=>document.getElementById('confirmationModal').style.display='none',300); 
        if(y) closePaymentModal(); 
    }

    // MODIFICATION 2: Feedback Logic
    function submitFeedback() {
        const txt = document.getElementById('feedbackTextarea');
        if(!txt.value.trim()) { txt.classList.add('border-red-500'); return; }
        document.getElementById('feedbackForm').style.display='none'; document.getElementById('feedbackSuccess').style.display='block';
        setTimeout(() => { dom.feedbackModal.style.display='none'; }, 2000);
    }

    function closeFeedbackModal(backToLibrary) {
        dom.feedbackModal.style.display = 'none';
    }
    
    document.querySelectorAll('summary').forEach(s => s.addEventListener('click', function(e) {
        e.preventDefault(); const c = this.parentElement.querySelector('.details-content');
        if(this.parentElement.hasAttribute('open')) { c.style.height='0'; setTimeout(()=>this.parentElement.removeAttribute('open'),300); }
        else { this.parentElement.setAttribute('open',''); c.style.height='auto'; const h=c.offsetHeight; c.style.height='0'; void c.offsetWidth; c.style.height=h+'px'; c.style.opacity='1'; }
    }));
  </script>
</body>
</html>
